(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var bi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Oh={exports:{}},Ja={},kh={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Si=Symbol.for("react.element"),Rv=Symbol.for("react.portal"),Pv=Symbol.for("react.fragment"),Dv=Symbol.for("react.strict_mode"),Mv=Symbol.for("react.profiler"),bv=Symbol.for("react.provider"),Ov=Symbol.for("react.context"),kv=Symbol.for("react.forward_ref"),Lv=Symbol.for("react.suspense"),Fv=Symbol.for("react.memo"),Bv=Symbol.for("react.lazy"),sc=Symbol.iterator;function Uv(t){return t===null||typeof t!="object"?null:(t=sc&&t[sc]||t["@@iterator"],typeof t=="function"?t:null)}var Lh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fh=Object.assign,Bh={};function _o(t,e,n){this.props=t,this.context=e,this.refs=Bh,this.updater=n||Lh}_o.prototype.isReactComponent={};_o.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Uh(){}Uh.prototype=_o.prototype;function Ru(t,e,n){this.props=t,this.context=e,this.refs=Bh,this.updater=n||Lh}var Pu=Ru.prototype=new Uh;Pu.constructor=Ru;Fh(Pu,_o.prototype);Pu.isPureReactComponent=!0;var lc=Array.isArray,Vh=Object.prototype.hasOwnProperty,Du={current:null},Gh={key:!0,ref:!0,__self:!0,__source:!0};function Hh(t,e,n){var r,o={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Vh.call(e,r)&&!Gh.hasOwnProperty(r)&&(o[r]=e[r]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];o.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)o[r]===void 0&&(o[r]=s[r]);return{$$typeof:Si,type:t,key:i,ref:a,props:o,_owner:Du.current}}function Vv(t,e){return{$$typeof:Si,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Mu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Si}function Gv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var uc=/\/+/g;function Ns(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gv(""+t.key):e.toString(36)}function ra(t,e,n,r,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Si:case Rv:a=!0}}if(a)return a=t,o=o(a),t=r===""?"."+Ns(a,0):r,lc(o)?(n="",t!=null&&(n=t.replace(uc,"$&/")+"/"),ra(o,e,n,"",function(u){return u})):o!=null&&(Mu(o)&&(o=Vv(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(uc,"$&/")+"/")+t)),e.push(o)),1;if(a=0,r=r===""?".":r+":",lc(t))for(var s=0;s<t.length;s++){i=t[s];var l=r+Ns(i,s);a+=ra(i,e,n,l,o)}else if(l=Uv(t),typeof l=="function")for(t=l.call(t),s=0;!(i=t.next()).done;)i=i.value,l=r+Ns(i,s++),a+=ra(i,e,n,l,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Oi(t,e,n){if(t==null)return t;var r=[],o=0;return ra(t,r,"","",function(i){return e.call(n,i,o++)}),r}function Hv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dt={current:null},oa={transition:null},zv={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:oa,ReactCurrentOwner:Du};function zh(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Oi,forEach:function(t,e,n){Oi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Oi(t,function(){e++}),e},toArray:function(t){return Oi(t,function(e){return e})||[]},only:function(t){if(!Mu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=_o;he.Fragment=Pv;he.Profiler=Mv;he.PureComponent=Ru;he.StrictMode=Dv;he.Suspense=Lv;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zv;he.act=zh;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Fh({},t.props),o=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Du.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)Vh.call(e,l)&&!Gh.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Si,type:t.type,key:o,ref:i,props:r,_owner:a}};he.createContext=function(t){return t={$$typeof:Ov,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:bv,_context:t},t.Consumer=t};he.createElement=Hh;he.createFactory=function(t){var e=Hh.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:kv,render:t}};he.isValidElement=Mu;he.lazy=function(t){return{$$typeof:Bv,_payload:{_status:-1,_result:t},_init:Hv}};he.memo=function(t,e){return{$$typeof:Fv,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=oa.transition;oa.transition={};try{t()}finally{oa.transition=e}};he.unstable_act=zh;he.useCallback=function(t,e){return Dt.current.useCallback(t,e)};he.useContext=function(t){return Dt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return Dt.current.useDeferredValue(t)};he.useEffect=function(t,e){return Dt.current.useEffect(t,e)};he.useId=function(){return Dt.current.useId()};he.useImperativeHandle=function(t,e,n){return Dt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return Dt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return Dt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return Dt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return Dt.current.useReducer(t,e,n)};he.useRef=function(t){return Dt.current.useRef(t)};he.useState=function(t){return Dt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return Dt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return Dt.current.useTransition()};he.version="18.3.1";kh.exports=he;var le=kh.exports;const Wv=Nu(le);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv=le,$v=Symbol.for("react.element"),Yv=Symbol.for("react.fragment"),Xv=Object.prototype.hasOwnProperty,Kv=qv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jv={key:!0,ref:!0,__self:!0,__source:!0};function Wh(t,e,n){var r,o={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Xv.call(e,r)&&!Jv.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:$v,type:t,key:i,ref:a,props:o,_owner:Kv.current}}Ja.Fragment=Yv;Ja.jsx=Wh;Ja.jsxs=Wh;Oh.exports=Ja;var E=Oh.exports,cl={},qh={exports:{}},qt={},$h={exports:{}},Yh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,U){var B=z.length;z.push(U);e:for(;0<B;){var G=B-1>>>1,j=z[G];if(0<o(j,U))z[G]=U,z[B]=j,B=G;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var U=z[0],B=z.pop();if(B!==U){z[0]=B;e:for(var G=0,j=z.length,ie=j>>>1;G<ie;){var ue=2*(G+1)-1,We=z[ue],Be=ue+1,Je=z[Be];if(0>o(We,B))Be<j&&0>o(Je,We)?(z[G]=Je,z[Be]=B,G=Be):(z[G]=We,z[ue]=B,G=ue);else if(Be<j&&0>o(Je,B))z[G]=Je,z[Be]=B,G=Be;else break e}}return U}function o(z,U){var B=z.sortIndex-U.sortIndex;return B!==0?B:z.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],u=[],f=1,d=null,p=3,g=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(z){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=z)r(u),U.sortIndex=U.expirationTime,e(l,U);else break;U=n(u)}}function S(z){if(y=!1,_(z),!v)if(n(l)!==null)v=!0,Ce(A);else{var U=n(u);U!==null&&re(S,U.startTime-z)}}function A(z,U){v=!1,y&&(y=!1,x(M),M=-1),g=!0;var B=p;try{for(_(U),d=n(l);d!==null&&(!(d.expirationTime>U)||z&&!$());){var G=d.callback;if(typeof G=="function"){d.callback=null,p=d.priorityLevel;var j=G(d.expirationTime<=U);U=t.unstable_now(),typeof j=="function"?d.callback=j:d===n(l)&&r(l),_(U)}else r(l);d=n(l)}if(d!==null)var ie=!0;else{var ue=n(u);ue!==null&&re(S,ue.startTime-U),ie=!1}return ie}finally{d=null,p=B,g=!1}}var R=!1,N=null,M=-1,F=5,k=-1;function $(){return!(t.unstable_now()-k<F)}function X(){if(N!==null){var z=t.unstable_now();k=z;var U=!0;try{U=N(!0,z)}finally{U?te():(R=!1,N=null)}}else R=!1}var te;if(typeof m=="function")te=function(){m(X)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,we=Ee.port2;Ee.port1.onmessage=X,te=function(){we.postMessage(null)}}else te=function(){w(X,0)};function Ce(z){N=z,R||(R=!0,te())}function re(z,U){M=w(function(){z(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Ce(A))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var B=p;p=U;try{return z()}finally{p=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,U){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var B=p;p=z;try{return U()}finally{p=B}},t.unstable_scheduleCallback=function(z,U,B){var G=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?G+B:G):B=G,z){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=B+j,z={id:f++,callback:U,priorityLevel:z,startTime:B,expirationTime:j,sortIndex:-1},B>G?(z.sortIndex=B,e(u,z),n(l)===null&&z===n(u)&&(y?(x(M),M=-1):y=!0,re(S,B-G))):(z.sortIndex=j,e(l,z),v||g||(v=!0,Ce(A))),z},t.unstable_shouldYield=$,t.unstable_wrapCallback=function(z){var U=p;return function(){var B=p;p=U;try{return z.apply(this,arguments)}finally{p=B}}}})(Yh);$h.exports=Yh;var Zv=$h.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv=le,Wt=Zv;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xh=new Set,li={};function kr(t,e){co(t,e),co(t+"Capture",e)}function co(t,e){for(li[t]=e,t=0;t<e.length;t++)Xh.add(e[t])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dl=Object.prototype.hasOwnProperty,jv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fc={},cc={};function em(t){return dl.call(cc,t)?!0:dl.call(fc,t)?!1:jv.test(t)?cc[t]=!0:(fc[t]=!0,!1)}function tm(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nm(t,e,n,r){if(e===null||typeof e>"u"||tm(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mt(t,e,n,r,o,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mt[t]=new Mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mt[e]=new Mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mt[t]=new Mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mt[t]=new Mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mt[t]=new Mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mt[t]=new Mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mt[t]=new Mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mt[t]=new Mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mt[t]=new Mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var bu=/[\-:]([a-z])/g;function Ou(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(bu,Ou);mt[e]=new Mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(bu,Ou);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(bu,Ou);mt[e]=new Mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!1,!1)});mt.xlinkHref=new Mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mt[t]=new Mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ku(t,e,n,r){var o=mt.hasOwnProperty(e)?mt[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nm(e,n,o,r)&&(n=null),r||o===null?em(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fn=Qv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ki=Symbol.for("react.element"),Gr=Symbol.for("react.portal"),Hr=Symbol.for("react.fragment"),Lu=Symbol.for("react.strict_mode"),hl=Symbol.for("react.profiler"),Kh=Symbol.for("react.provider"),Jh=Symbol.for("react.context"),Fu=Symbol.for("react.forward_ref"),pl=Symbol.for("react.suspense"),gl=Symbol.for("react.suspense_list"),Bu=Symbol.for("react.memo"),qn=Symbol.for("react.lazy"),Zh=Symbol.for("react.offscreen"),dc=Symbol.iterator;function Do(t){return t===null||typeof t!="object"?null:(t=dc&&t[dc]||t["@@iterator"],typeof t=="function"?t:null)}var ze=Object.assign,Rs;function zo(t){if(Rs===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rs=e&&e[1]||""}return`
`+Rs+t}var Ps=!1;function Ds(t,e){if(!t||Ps)return"";Ps=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),i=r.stack.split(`
`),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(a!==1||s!==1)do if(a--,s--,0>s||o[a]!==i[s]){var l=`
`+o[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=s);break}}}finally{Ps=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zo(t):""}function rm(t){switch(t.tag){case 5:return zo(t.type);case 16:return zo("Lazy");case 13:return zo("Suspense");case 19:return zo("SuspenseList");case 0:case 2:case 15:return t=Ds(t.type,!1),t;case 11:return t=Ds(t.type.render,!1),t;case 1:return t=Ds(t.type,!0),t;default:return""}}function vl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hr:return"Fragment";case Gr:return"Portal";case hl:return"Profiler";case Lu:return"StrictMode";case pl:return"Suspense";case gl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jh:return(t.displayName||"Context")+".Consumer";case Kh:return(t._context.displayName||"Context")+".Provider";case Fu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bu:return e=t.displayName||null,e!==null?e:vl(t.type)||"Memo";case qn:e=t._payload,t=t._init;try{return vl(t(e))}catch{}}return null}function om(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vl(e);case 8:return e===Lu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ur(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function im(t){var e=Qh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Li(t){t._valueTracker||(t._valueTracker=im(t))}function jh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _a(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ml(t,e){var n=e.checked;return ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ur(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function e1(t,e){e=e.checked,e!=null&&ku(t,"checked",e,!1)}function yl(t,e){e1(t,e);var n=ur(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xl(t,e.type,n):e.hasOwnProperty("defaultValue")&&xl(t,e.type,ur(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xl(t,e,n){(e!=="number"||_a(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wo=Array.isArray;function no(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ur(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function _l(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(Wo(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ur(n)}}function t1(t,e){var n=ur(e.value),r=ur(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function vc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function n1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function El(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?n1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fi,r1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fi=Fi||document.createElement("div"),Fi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ui(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},am=["Webkit","ms","Moz","O"];Object.keys(Qo).forEach(function(t){am.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qo[e]=Qo[t]})});function o1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qo.hasOwnProperty(t)&&Qo[t]?(""+e).trim():e+"px"}function i1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=o1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var sm=ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wl(t,e){if(e){if(sm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Cl(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Al=null;function Uu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sl=null,ro=null,oo=null;function mc(t){if(t=Ni(t)){if(typeof Sl!="function")throw Error(q(280));var e=t.stateNode;e&&(e=ts(e),Sl(t.stateNode,t.type,e))}}function a1(t){ro?oo?oo.push(t):oo=[t]:ro=t}function s1(){if(ro){var t=ro,e=oo;if(oo=ro=null,mc(t),e)for(t=0;t<e.length;t++)mc(e[t])}}function l1(t,e){return t(e)}function u1(){}var Ms=!1;function f1(t,e,n){if(Ms)return t(e,n);Ms=!0;try{return l1(t,e,n)}finally{Ms=!1,(ro!==null||oo!==null)&&(u1(),s1())}}function fi(t,e){var n=t.stateNode;if(n===null)return null;var r=ts(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Tl=!1;if(Mn)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Tl=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{Tl=!1}function lm(t,e,n,r,o,i,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var jo=!1,Ea=null,wa=!1,Il=null,um={onError:function(t){jo=!0,Ea=t}};function fm(t,e,n,r,o,i,a,s,l){jo=!1,Ea=null,lm.apply(um,arguments)}function cm(t,e,n,r,o,i,a,s,l){if(fm.apply(this,arguments),jo){if(jo){var u=Ea;jo=!1,Ea=null}else throw Error(q(198));wa||(wa=!0,Il=u)}}function Lr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function c1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yc(t){if(Lr(t)!==t)throw Error(q(188))}function dm(t){var e=t.alternate;if(!e){if(e=Lr(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return yc(o),t;if(i===r)return yc(o),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function d1(t){return t=dm(t),t!==null?h1(t):null}function h1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=h1(t);if(e!==null)return e;t=t.sibling}return null}var p1=Wt.unstable_scheduleCallback,xc=Wt.unstable_cancelCallback,hm=Wt.unstable_shouldYield,pm=Wt.unstable_requestPaint,Ye=Wt.unstable_now,gm=Wt.unstable_getCurrentPriorityLevel,Vu=Wt.unstable_ImmediatePriority,g1=Wt.unstable_UserBlockingPriority,Ca=Wt.unstable_NormalPriority,vm=Wt.unstable_LowPriority,v1=Wt.unstable_IdlePriority,Za=null,wn=null;function mm(t){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Za,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:_m,ym=Math.log,xm=Math.LN2;function _m(t){return t>>>=0,t===0?32:31-(ym(t)/xm|0)|0}var Bi=64,Ui=4194304;function qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Aa(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~o;s!==0?r=qo(s):(i&=a,i!==0&&(r=qo(i)))}else a=n&~o,a!==0?r=qo(a):i!==0&&(r=qo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hn(e),o=1<<n,r|=t[n],e&=~o;return r}function Em(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wm(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-hn(i),s=1<<a,l=o[a];l===-1?(!(s&n)||s&r)&&(o[a]=Em(s,e)):l<=e&&(t.expiredLanes|=s),i&=~s}}function Nl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function m1(){var t=Bi;return Bi<<=1,!(Bi&4194240)&&(Bi=64),t}function bs(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ti(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function Cm(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-hn(n),i=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~i}}function Gu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hn(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var Re=0;function y1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var x1,Hu,_1,E1,w1,Rl=!1,Vi=[],jn=null,er=null,tr=null,ci=new Map,di=new Map,Xn=[],Am="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _c(t,e){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":ci.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":di.delete(e.pointerId)}}function bo(t,e,n,r,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=Ni(e),e!==null&&Hu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Sm(t,e,n,r,o){switch(e){case"focusin":return jn=bo(jn,t,e,n,r,o),!0;case"dragenter":return er=bo(er,t,e,n,r,o),!0;case"mouseover":return tr=bo(tr,t,e,n,r,o),!0;case"pointerover":var i=o.pointerId;return ci.set(i,bo(ci.get(i)||null,t,e,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,di.set(i,bo(di.get(i)||null,t,e,n,r,o)),!0}return!1}function C1(t){var e=wr(t.target);if(e!==null){var n=Lr(e);if(n!==null){if(e=n.tag,e===13){if(e=c1(n),e!==null){t.blockedOn=e,w1(t.priority,function(){_1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ia(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Al=r,n.target.dispatchEvent(r),Al=null}else return e=Ni(n),e!==null&&Hu(e),t.blockedOn=n,!1;e.shift()}return!0}function Ec(t,e,n){ia(t)&&n.delete(e)}function Tm(){Rl=!1,jn!==null&&ia(jn)&&(jn=null),er!==null&&ia(er)&&(er=null),tr!==null&&ia(tr)&&(tr=null),ci.forEach(Ec),di.forEach(Ec)}function Oo(t,e){t.blockedOn===e&&(t.blockedOn=null,Rl||(Rl=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,Tm)))}function hi(t){function e(o){return Oo(o,t)}if(0<Vi.length){Oo(Vi[0],t);for(var n=1;n<Vi.length;n++){var r=Vi[n];r.blockedOn===t&&(r.blockedOn=null)}}for(jn!==null&&Oo(jn,t),er!==null&&Oo(er,t),tr!==null&&Oo(tr,t),ci.forEach(e),di.forEach(e),n=0;n<Xn.length;n++)r=Xn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)C1(n),n.blockedOn===null&&Xn.shift()}var io=Fn.ReactCurrentBatchConfig,Sa=!0;function Im(t,e,n,r){var o=Re,i=io.transition;io.transition=null;try{Re=1,zu(t,e,n,r)}finally{Re=o,io.transition=i}}function Nm(t,e,n,r){var o=Re,i=io.transition;io.transition=null;try{Re=4,zu(t,e,n,r)}finally{Re=o,io.transition=i}}function zu(t,e,n,r){if(Sa){var o=Pl(t,e,n,r);if(o===null)zs(t,e,r,Ta,n),_c(t,r);else if(Sm(o,t,e,n,r))r.stopPropagation();else if(_c(t,r),e&4&&-1<Am.indexOf(t)){for(;o!==null;){var i=Ni(o);if(i!==null&&x1(i),i=Pl(t,e,n,r),i===null&&zs(t,e,r,Ta,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else zs(t,e,r,null,n)}}var Ta=null;function Pl(t,e,n,r){if(Ta=null,t=Uu(r),t=wr(t),t!==null)if(e=Lr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=c1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ta=t,null}function A1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gm()){case Vu:return 1;case g1:return 4;case Ca:case vm:return 16;case v1:return 536870912;default:return 16}default:return 16}}var Jn=null,Wu=null,aa=null;function S1(){if(aa)return aa;var t,e=Wu,n=e.length,r,o="value"in Jn?Jn.value:Jn.textContent,i=o.length;for(t=0;t<n&&e[t]===o[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===o[i-r];r++);return aa=o.slice(t,1<r?1-r:void 0)}function sa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Gi(){return!0}function wc(){return!1}function $t(t){function e(n,r,o,i,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Gi:wc,this.isPropagationStopped=wc,this}return ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),e}var Eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qu=$t(Eo),Ii=ze({},Eo,{view:0,detail:0}),Rm=$t(Ii),Os,ks,ko,Qa=ze({},Ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$u,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ko&&(ko&&t.type==="mousemove"?(Os=t.screenX-ko.screenX,ks=t.screenY-ko.screenY):ks=Os=0,ko=t),Os)},movementY:function(t){return"movementY"in t?t.movementY:ks}}),Cc=$t(Qa),Pm=ze({},Qa,{dataTransfer:0}),Dm=$t(Pm),Mm=ze({},Ii,{relatedTarget:0}),Ls=$t(Mm),bm=ze({},Eo,{animationName:0,elapsedTime:0,pseudoElement:0}),Om=$t(bm),km=ze({},Eo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lm=$t(km),Fm=ze({},Eo,{data:0}),Ac=$t(Fm),Bm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Um={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Vm[t])?!!e[t]:!1}function $u(){return Gm}var Hm=ze({},Ii,{key:function(t){if(t.key){var e=Bm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Um[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$u,charCode:function(t){return t.type==="keypress"?sa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zm=$t(Hm),Wm=ze({},Qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sc=$t(Wm),qm=ze({},Ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$u}),$m=$t(qm),Ym=ze({},Eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xm=$t(Ym),Km=ze({},Qa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jm=$t(Km),Zm=[9,13,27,32],Yu=Mn&&"CompositionEvent"in window,ei=null;Mn&&"documentMode"in document&&(ei=document.documentMode);var Qm=Mn&&"TextEvent"in window&&!ei,T1=Mn&&(!Yu||ei&&8<ei&&11>=ei),Tc=String.fromCharCode(32),Ic=!1;function I1(t,e){switch(t){case"keyup":return Zm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zr=!1;function jm(t,e){switch(t){case"compositionend":return N1(e);case"keypress":return e.which!==32?null:(Ic=!0,Tc);case"textInput":return t=e.data,t===Tc&&Ic?null:t;default:return null}}function ey(t,e){if(zr)return t==="compositionend"||!Yu&&I1(t,e)?(t=S1(),aa=Wu=Jn=null,zr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return T1&&e.locale!=="ko"?null:e.data;default:return null}}var ty={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ty[t.type]:e==="textarea"}function R1(t,e,n,r){a1(r),e=Ia(e,"onChange"),0<e.length&&(n=new qu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ti=null,pi=null;function ny(t){V1(t,0)}function ja(t){var e=$r(t);if(jh(e))return t}function ry(t,e){if(t==="change")return e}var P1=!1;if(Mn){var Fs;if(Mn){var Bs="oninput"in document;if(!Bs){var Rc=document.createElement("div");Rc.setAttribute("oninput","return;"),Bs=typeof Rc.oninput=="function"}Fs=Bs}else Fs=!1;P1=Fs&&(!document.documentMode||9<document.documentMode)}function Pc(){ti&&(ti.detachEvent("onpropertychange",D1),pi=ti=null)}function D1(t){if(t.propertyName==="value"&&ja(pi)){var e=[];R1(e,pi,t,Uu(t)),f1(ny,e)}}function oy(t,e,n){t==="focusin"?(Pc(),ti=e,pi=n,ti.attachEvent("onpropertychange",D1)):t==="focusout"&&Pc()}function iy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ja(pi)}function ay(t,e){if(t==="click")return ja(e)}function sy(t,e){if(t==="input"||t==="change")return ja(e)}function ly(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gn=typeof Object.is=="function"?Object.is:ly;function gi(t,e){if(gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!dl.call(e,o)||!gn(t[o],e[o]))return!1}return!0}function Dc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mc(t,e){var n=Dc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dc(n)}}function M1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?M1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function b1(){for(var t=window,e=_a();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_a(t.document)}return e}function Xu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uy(t){var e=b1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&M1(n.ownerDocument.documentElement,n)){if(r!==null&&Xu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!t.extend&&i>r&&(o=r,r=i,i=o),o=Mc(n,i);var a=Mc(n,r);o&&a&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var fy=Mn&&"documentMode"in document&&11>=document.documentMode,Wr=null,Dl=null,ni=null,Ml=!1;function bc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ml||Wr==null||Wr!==_a(r)||(r=Wr,"selectionStart"in r&&Xu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ni&&gi(ni,r)||(ni=r,r=Ia(Dl,"onSelect"),0<r.length&&(e=new qu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Wr)))}function Hi(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qr={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionend:Hi("Transition","TransitionEnd")},Us={},O1={};Mn&&(O1=document.createElement("div").style,"AnimationEvent"in window||(delete qr.animationend.animation,delete qr.animationiteration.animation,delete qr.animationstart.animation),"TransitionEvent"in window||delete qr.transitionend.transition);function es(t){if(Us[t])return Us[t];if(!qr[t])return t;var e=qr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in O1)return Us[t]=e[n];return t}var k1=es("animationend"),L1=es("animationiteration"),F1=es("animationstart"),B1=es("transitionend"),U1=new Map,Oc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cr(t,e){U1.set(t,e),kr(e,[t])}for(var Vs=0;Vs<Oc.length;Vs++){var Gs=Oc[Vs],cy=Gs.toLowerCase(),dy=Gs[0].toUpperCase()+Gs.slice(1);cr(cy,"on"+dy)}cr(k1,"onAnimationEnd");cr(L1,"onAnimationIteration");cr(F1,"onAnimationStart");cr("dblclick","onDoubleClick");cr("focusin","onFocus");cr("focusout","onBlur");cr(B1,"onTransitionEnd");co("onMouseEnter",["mouseout","mouseover"]);co("onMouseLeave",["mouseout","mouseover"]);co("onPointerEnter",["pointerout","pointerover"]);co("onPointerLeave",["pointerout","pointerover"]);kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hy=new Set("cancel close invalid load scroll toggle".split(" ").concat($o));function kc(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,cm(r,e,void 0,t),t.currentTarget=null}function V1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;kc(o,s,u),i=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;kc(o,s,u),i=l}}}if(wa)throw t=Il,wa=!1,Il=null,t}function be(t,e){var n=e[Fl];n===void 0&&(n=e[Fl]=new Set);var r=t+"__bubble";n.has(r)||(G1(e,t,2,!1),n.add(r))}function Hs(t,e,n){var r=0;e&&(r|=4),G1(n,t,r,e)}var zi="_reactListening"+Math.random().toString(36).slice(2);function vi(t){if(!t[zi]){t[zi]=!0,Xh.forEach(function(n){n!=="selectionchange"&&(hy.has(n)||Hs(n,!1,t),Hs(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zi]||(e[zi]=!0,Hs("selectionchange",!1,e))}}function G1(t,e,n,r){switch(A1(e)){case 1:var o=Im;break;case 4:o=Nm;break;default:o=zu}n=o.bind(null,e,n,t),o=void 0,!Tl||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function zs(t,e,n,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;a=a.return}for(;s!==null;){if(a=wr(s),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}s=s.parentNode}}r=r.return}f1(function(){var u=i,f=Uu(n),d=[];e:{var p=U1.get(t);if(p!==void 0){var g=qu,v=t;switch(t){case"keypress":if(sa(n)===0)break e;case"keydown":case"keyup":g=zm;break;case"focusin":v="focus",g=Ls;break;case"focusout":v="blur",g=Ls;break;case"beforeblur":case"afterblur":g=Ls;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Dm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=$m;break;case k1:case L1:case F1:g=Om;break;case B1:g=Xm;break;case"scroll":g=Rm;break;case"wheel":g=Jm;break;case"copy":case"cut":case"paste":g=Lm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Sc}var y=(e&4)!==0,w=!y&&t==="scroll",x=y?p!==null?p+"Capture":null:p;y=[];for(var m=u,_;m!==null;){_=m;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,x!==null&&(S=fi(m,x),S!=null&&y.push(mi(m,S,_)))),w)break;m=m.return}0<y.length&&(p=new g(p,v,null,n,f),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Al&&(v=n.relatedTarget||n.fromElement)&&(wr(v)||v[bn]))break e;if((g||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?wr(v):null,v!==null&&(w=Lr(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(y=Cc,S="onMouseLeave",x="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(y=Sc,S="onPointerLeave",x="onPointerEnter",m="pointer"),w=g==null?p:$r(g),_=v==null?p:$r(v),p=new y(S,m+"leave",g,n,f),p.target=w,p.relatedTarget=_,S=null,wr(f)===u&&(y=new y(x,m+"enter",v,n,f),y.target=_,y.relatedTarget=w,S=y),w=S,g&&v)t:{for(y=g,x=v,m=0,_=y;_;_=Ur(_))m++;for(_=0,S=x;S;S=Ur(S))_++;for(;0<m-_;)y=Ur(y),m--;for(;0<_-m;)x=Ur(x),_--;for(;m--;){if(y===x||x!==null&&y===x.alternate)break t;y=Ur(y),x=Ur(x)}y=null}else y=null;g!==null&&Lc(d,p,g,y,!1),v!==null&&w!==null&&Lc(d,w,v,y,!0)}}e:{if(p=u?$r(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var A=ry;else if(Nc(p))if(P1)A=sy;else{A=iy;var R=oy}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=ay);if(A&&(A=A(t,u))){R1(d,A,n,f);break e}R&&R(t,p,u),t==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&xl(p,"number",p.value)}switch(R=u?$r(u):window,t){case"focusin":(Nc(R)||R.contentEditable==="true")&&(Wr=R,Dl=u,ni=null);break;case"focusout":ni=Dl=Wr=null;break;case"mousedown":Ml=!0;break;case"contextmenu":case"mouseup":case"dragend":Ml=!1,bc(d,n,f);break;case"selectionchange":if(fy)break;case"keydown":case"keyup":bc(d,n,f)}var N;if(Yu)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else zr?I1(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(T1&&n.locale!=="ko"&&(zr||M!=="onCompositionStart"?M==="onCompositionEnd"&&zr&&(N=S1()):(Jn=f,Wu="value"in Jn?Jn.value:Jn.textContent,zr=!0)),R=Ia(u,M),0<R.length&&(M=new Ac(M,t,null,n,f),d.push({event:M,listeners:R}),N?M.data=N:(N=N1(n),N!==null&&(M.data=N)))),(N=Qm?jm(t,n):ey(t,n))&&(u=Ia(u,"onBeforeInput"),0<u.length&&(f=new Ac("onBeforeInput","beforeinput",null,n,f),d.push({event:f,listeners:u}),f.data=N))}V1(d,e)})}function mi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ia(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=fi(t,n),i!=null&&r.unshift(mi(t,i,o)),i=fi(t,e),i!=null&&r.push(mi(t,i,o))),t=t.return}return r}function Ur(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lc(t,e,n,r,o){for(var i=e._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,o?(l=fi(n,i),l!=null&&a.unshift(mi(n,l,s))):o||(l=fi(n,i),l!=null&&a.push(mi(n,l,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var py=/\r\n?/g,gy=/\u0000|\uFFFD/g;function Fc(t){return(typeof t=="string"?t:""+t).replace(py,`
`).replace(gy,"")}function Wi(t,e,n){if(e=Fc(e),Fc(t)!==e&&n)throw Error(q(425))}function Na(){}var bl=null,Ol=null;function kl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ll=typeof setTimeout=="function"?setTimeout:void 0,vy=typeof clearTimeout=="function"?clearTimeout:void 0,Bc=typeof Promise=="function"?Promise:void 0,my=typeof queueMicrotask=="function"?queueMicrotask:typeof Bc<"u"?function(t){return Bc.resolve(null).then(t).catch(yy)}:Ll;function yy(t){setTimeout(function(){throw t})}function Ws(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),hi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);hi(e)}function nr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Uc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var wo=Math.random().toString(36).slice(2),_n="__reactFiber$"+wo,yi="__reactProps$"+wo,bn="__reactContainer$"+wo,Fl="__reactEvents$"+wo,xy="__reactListeners$"+wo,_y="__reactHandles$"+wo;function wr(t){var e=t[_n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bn]||n[_n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Uc(t);t!==null;){if(n=t[_n])return n;t=Uc(t)}return e}t=n,n=t.parentNode}return null}function Ni(t){return t=t[_n]||t[bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $r(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function ts(t){return t[yi]||null}var Bl=[],Yr=-1;function dr(t){return{current:t}}function Fe(t){0>Yr||(t.current=Bl[Yr],Bl[Yr]=null,Yr--)}function De(t,e){Yr++,Bl[Yr]=t.current,t.current=e}var fr={},At=dr(fr),Ft=dr(!1),Pr=fr;function ho(t,e){var n=t.type.contextTypes;if(!n)return fr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Bt(t){return t=t.childContextTypes,t!=null}function Ra(){Fe(Ft),Fe(At)}function Vc(t,e,n){if(At.current!==fr)throw Error(q(168));De(At,e),De(Ft,n)}function H1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(q(108,om(t)||"Unknown",o));return ze({},n,r)}function Pa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fr,Pr=At.current,De(At,t),De(Ft,Ft.current),!0}function Gc(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=H1(t,e,Pr),r.__reactInternalMemoizedMergedChildContext=t,Fe(Ft),Fe(At),De(At,t)):Fe(Ft),De(Ft,n)}var In=null,ns=!1,qs=!1;function z1(t){In===null?In=[t]:In.push(t)}function Ey(t){ns=!0,z1(t)}function hr(){if(!qs&&In!==null){qs=!0;var t=0,e=Re;try{var n=In;for(Re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}In=null,ns=!1}catch(o){throw In!==null&&(In=In.slice(t+1)),p1(Vu,hr),o}finally{Re=e,qs=!1}}return null}var Xr=[],Kr=0,Da=null,Ma=0,Kt=[],Jt=0,Dr=null,Rn=1,Pn="";function xr(t,e){Xr[Kr++]=Ma,Xr[Kr++]=Da,Da=t,Ma=e}function W1(t,e,n){Kt[Jt++]=Rn,Kt[Jt++]=Pn,Kt[Jt++]=Dr,Dr=t;var r=Rn;t=Pn;var o=32-hn(r)-1;r&=~(1<<o),n+=1;var i=32-hn(e)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Rn=1<<32-hn(e)+o|n<<o|r,Pn=i+t}else Rn=1<<i|n<<o|r,Pn=t}function Ku(t){t.return!==null&&(xr(t,1),W1(t,1,0))}function Ju(t){for(;t===Da;)Da=Xr[--Kr],Xr[Kr]=null,Ma=Xr[--Kr],Xr[Kr]=null;for(;t===Dr;)Dr=Kt[--Jt],Kt[Jt]=null,Pn=Kt[--Jt],Kt[Jt]=null,Rn=Kt[--Jt],Kt[Jt]=null}var zt=null,Ht=null,Ue=!1,fn=null;function q1(t,e){var n=Zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zt=t,Ht=nr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Dr!==null?{id:Rn,overflow:Pn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zt=t,Ht=null,!0):!1;default:return!1}}function Ul(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vl(t){if(Ue){var e=Ht;if(e){var n=e;if(!Hc(t,e)){if(Ul(t))throw Error(q(418));e=nr(n.nextSibling);var r=zt;e&&Hc(t,e)?q1(r,n):(t.flags=t.flags&-4097|2,Ue=!1,zt=t)}}else{if(Ul(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ue=!1,zt=t}}}function zc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zt=t}function qi(t){if(t!==zt)return!1;if(!Ue)return zc(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kl(t.type,t.memoizedProps)),e&&(e=Ht)){if(Ul(t))throw $1(),Error(q(418));for(;e;)q1(t,e),e=nr(e.nextSibling)}if(zc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=nr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=zt?nr(t.stateNode.nextSibling):null;return!0}function $1(){for(var t=Ht;t;)t=nr(t.nextSibling)}function po(){Ht=zt=null,Ue=!1}function Zu(t){fn===null?fn=[t]:fn.push(t)}var wy=Fn.ReactCurrentBatchConfig;function Lo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var o=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var s=o.refs;a===null?delete s[i]:s[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function $i(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Wc(t){var e=t._init;return e(t._payload)}function Y1(t){function e(x,m){if(t){var _=x.deletions;_===null?(x.deletions=[m],x.flags|=16):_.push(m)}}function n(x,m){if(!t)return null;for(;m!==null;)e(x,m),m=m.sibling;return null}function r(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function o(x,m){return x=ar(x,m),x.index=0,x.sibling=null,x}function i(x,m,_){return x.index=_,t?(_=x.alternate,_!==null?(_=_.index,_<m?(x.flags|=2,m):_):(x.flags|=2,m)):(x.flags|=1048576,m)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function s(x,m,_,S){return m===null||m.tag!==6?(m=Qs(_,x.mode,S),m.return=x,m):(m=o(m,_),m.return=x,m)}function l(x,m,_,S){var A=_.type;return A===Hr?f(x,m,_.props.children,S,_.key):m!==null&&(m.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===qn&&Wc(A)===m.type)?(S=o(m,_.props),S.ref=Lo(x,m,_),S.return=x,S):(S=pa(_.type,_.key,_.props,null,x.mode,S),S.ref=Lo(x,m,_),S.return=x,S)}function u(x,m,_,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==_.containerInfo||m.stateNode.implementation!==_.implementation?(m=js(_,x.mode,S),m.return=x,m):(m=o(m,_.children||[]),m.return=x,m)}function f(x,m,_,S,A){return m===null||m.tag!==7?(m=Ir(_,x.mode,S,A),m.return=x,m):(m=o(m,_),m.return=x,m)}function d(x,m,_){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Qs(""+m,x.mode,_),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ki:return _=pa(m.type,m.key,m.props,null,x.mode,_),_.ref=Lo(x,null,m),_.return=x,_;case Gr:return m=js(m,x.mode,_),m.return=x,m;case qn:var S=m._init;return d(x,S(m._payload),_)}if(Wo(m)||Do(m))return m=Ir(m,x.mode,_,null),m.return=x,m;$i(x,m)}return null}function p(x,m,_,S){var A=m!==null?m.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return A!==null?null:s(x,m,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ki:return _.key===A?l(x,m,_,S):null;case Gr:return _.key===A?u(x,m,_,S):null;case qn:return A=_._init,p(x,m,A(_._payload),S)}if(Wo(_)||Do(_))return A!==null?null:f(x,m,_,S,null);$i(x,_)}return null}function g(x,m,_,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(_)||null,s(m,x,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ki:return x=x.get(S.key===null?_:S.key)||null,l(m,x,S,A);case Gr:return x=x.get(S.key===null?_:S.key)||null,u(m,x,S,A);case qn:var R=S._init;return g(x,m,_,R(S._payload),A)}if(Wo(S)||Do(S))return x=x.get(_)||null,f(m,x,S,A,null);$i(m,S)}return null}function v(x,m,_,S){for(var A=null,R=null,N=m,M=m=0,F=null;N!==null&&M<_.length;M++){N.index>M?(F=N,N=null):F=N.sibling;var k=p(x,N,_[M],S);if(k===null){N===null&&(N=F);break}t&&N&&k.alternate===null&&e(x,N),m=i(k,m,M),R===null?A=k:R.sibling=k,R=k,N=F}if(M===_.length)return n(x,N),Ue&&xr(x,M),A;if(N===null){for(;M<_.length;M++)N=d(x,_[M],S),N!==null&&(m=i(N,m,M),R===null?A=N:R.sibling=N,R=N);return Ue&&xr(x,M),A}for(N=r(x,N);M<_.length;M++)F=g(N,x,M,_[M],S),F!==null&&(t&&F.alternate!==null&&N.delete(F.key===null?M:F.key),m=i(F,m,M),R===null?A=F:R.sibling=F,R=F);return t&&N.forEach(function($){return e(x,$)}),Ue&&xr(x,M),A}function y(x,m,_,S){var A=Do(_);if(typeof A!="function")throw Error(q(150));if(_=A.call(_),_==null)throw Error(q(151));for(var R=A=null,N=m,M=m=0,F=null,k=_.next();N!==null&&!k.done;M++,k=_.next()){N.index>M?(F=N,N=null):F=N.sibling;var $=p(x,N,k.value,S);if($===null){N===null&&(N=F);break}t&&N&&$.alternate===null&&e(x,N),m=i($,m,M),R===null?A=$:R.sibling=$,R=$,N=F}if(k.done)return n(x,N),Ue&&xr(x,M),A;if(N===null){for(;!k.done;M++,k=_.next())k=d(x,k.value,S),k!==null&&(m=i(k,m,M),R===null?A=k:R.sibling=k,R=k);return Ue&&xr(x,M),A}for(N=r(x,N);!k.done;M++,k=_.next())k=g(N,x,M,k.value,S),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?M:k.key),m=i(k,m,M),R===null?A=k:R.sibling=k,R=k);return t&&N.forEach(function(X){return e(x,X)}),Ue&&xr(x,M),A}function w(x,m,_,S){if(typeof _=="object"&&_!==null&&_.type===Hr&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ki:e:{for(var A=_.key,R=m;R!==null;){if(R.key===A){if(A=_.type,A===Hr){if(R.tag===7){n(x,R.sibling),m=o(R,_.props.children),m.return=x,x=m;break e}}else if(R.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===qn&&Wc(A)===R.type){n(x,R.sibling),m=o(R,_.props),m.ref=Lo(x,R,_),m.return=x,x=m;break e}n(x,R);break}else e(x,R);R=R.sibling}_.type===Hr?(m=Ir(_.props.children,x.mode,S,_.key),m.return=x,x=m):(S=pa(_.type,_.key,_.props,null,x.mode,S),S.ref=Lo(x,m,_),S.return=x,x=S)}return a(x);case Gr:e:{for(R=_.key;m!==null;){if(m.key===R)if(m.tag===4&&m.stateNode.containerInfo===_.containerInfo&&m.stateNode.implementation===_.implementation){n(x,m.sibling),m=o(m,_.children||[]),m.return=x,x=m;break e}else{n(x,m);break}else e(x,m);m=m.sibling}m=js(_,x.mode,S),m.return=x,x=m}return a(x);case qn:return R=_._init,w(x,m,R(_._payload),S)}if(Wo(_))return v(x,m,_,S);if(Do(_))return y(x,m,_,S);$i(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,m!==null&&m.tag===6?(n(x,m.sibling),m=o(m,_),m.return=x,x=m):(n(x,m),m=Qs(_,x.mode,S),m.return=x,x=m),a(x)):n(x,m)}return w}var go=Y1(!0),X1=Y1(!1),ba=dr(null),Oa=null,Jr=null,Qu=null;function ju(){Qu=Jr=Oa=null}function ef(t){var e=ba.current;Fe(ba),t._currentValue=e}function Gl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ao(t,e){Oa=t,Qu=Jr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(Qu!==t)if(t={context:t,memoizedValue:e,next:null},Jr===null){if(Oa===null)throw Error(q(308));Jr=t,Oa.dependencies={lanes:0,firstContext:t}}else Jr=Jr.next=t;return e}var Cr=null;function tf(t){Cr===null?Cr=[t]:Cr.push(t)}function K1(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,tf(e)):(n.next=o.next,o.next=n),e.interleaved=n,On(t,r)}function On(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $n=!1;function nf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function J1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ve&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,On(t,n)}return o=r.interleaved,o===null?(e.next=e,tf(r)):(e.next=o.next,o.next=e),r.interleaved=e,On(t,n)}function la(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gu(t,n)}}function qc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?o=i=e:i=i.next=e}else o=i=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ka(t,e,n,r){var o=t.updateQueue;$n=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?i=u:a.next=u,a=l;var f=t.alternate;f!==null&&(f=f.updateQueue,s=f.lastBaseUpdate,s!==a&&(s===null?f.firstBaseUpdate=u:s.next=u,f.lastBaseUpdate=l))}if(i!==null){var d=o.baseState;a=0,f=u=l=null,s=i;do{var p=s.lane,g=s.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:g,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=t,y=s;switch(p=e,g=n,y.tag){case 1:if(v=y.payload,typeof v=="function"){d=v.call(g,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,p=typeof v=="function"?v.call(g,d,p):v,p==null)break e;d=ze({},d,p);break e;case 2:$n=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,p=o.effects,p===null?o.effects=[s]:p.push(s))}else g={eventTime:g,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},f===null?(u=f=g,l=d):f=f.next=g,a|=p;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;p=s,s=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(1);if(f===null&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=f,e=o.shared.interleaved,e!==null){o=e;do a|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);br|=a,t.lanes=a,t.memoizedState=d}}function $c(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(q(191,o));o.call(r)}}}var Ri={},Cn=dr(Ri),xi=dr(Ri),_i=dr(Ri);function Ar(t){if(t===Ri)throw Error(q(174));return t}function rf(t,e){switch(De(_i,e),De(xi,t),De(Cn,Ri),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:El(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=El(e,t)}Fe(Cn),De(Cn,e)}function vo(){Fe(Cn),Fe(xi),Fe(_i)}function Z1(t){Ar(_i.current);var e=Ar(Cn.current),n=El(e,t.type);e!==n&&(De(xi,t),De(Cn,n))}function of(t){xi.current===t&&(Fe(Cn),Fe(xi))}var Ve=dr(0);function La(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $s=[];function af(){for(var t=0;t<$s.length;t++)$s[t]._workInProgressVersionPrimary=null;$s.length=0}var ua=Fn.ReactCurrentDispatcher,Ys=Fn.ReactCurrentBatchConfig,Mr=0,He=null,je=null,lt=null,Fa=!1,ri=!1,Ei=0,Cy=0;function xt(){throw Error(q(321))}function sf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gn(t[n],e[n]))return!1;return!0}function lf(t,e,n,r,o,i){if(Mr=i,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ua.current=t===null||t.memoizedState===null?Iy:Ny,t=n(r,o),ri){i=0;do{if(ri=!1,Ei=0,25<=i)throw Error(q(301));i+=1,lt=je=null,e.updateQueue=null,ua.current=Ry,t=n(r,o)}while(ri)}if(ua.current=Ba,e=je!==null&&je.next!==null,Mr=0,lt=je=He=null,Fa=!1,e)throw Error(q(300));return t}function uf(){var t=Ei!==0;return Ei=0,t}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?He.memoizedState=lt=t:lt=lt.next=t,lt}function rn(){if(je===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=lt===null?He.memoizedState:lt.next;if(e!==null)lt=e,je=t;else{if(t===null)throw Error(q(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},lt===null?He.memoizedState=lt=t:lt=lt.next=t}return lt}function wi(t,e){return typeof e=="function"?e(t):e}function Xs(t){var e=rn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=je,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var s=a=null,l=null,u=i;do{var f=u.lane;if((Mr&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,a=r):l=l.next=d,He.lanes|=f,br|=f}u=u.next}while(u!==null&&u!==i);l===null?a=r:l.next=s,gn(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do i=o.lane,He.lanes|=i,br|=i,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ks(t){var e=rn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,i=e.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do i=t(i,a.action),a=a.next;while(a!==o);gn(i,e.memoizedState)||(Lt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Q1(){}function j1(t,e){var n=He,r=rn(),o=e(),i=!gn(r.memoizedState,o);if(i&&(r.memoizedState=o,Lt=!0),r=r.queue,ff(np.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,Ci(9,tp.bind(null,n,r,o,e),void 0,null),ct===null)throw Error(q(349));Mr&30||ep(n,e,o)}return o}function ep(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tp(t,e,n,r){e.value=n,e.getSnapshot=r,rp(e)&&op(t)}function np(t,e,n){return n(function(){rp(e)&&op(t)})}function rp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gn(t,n)}catch{return!0}}function op(t){var e=On(t,1);e!==null&&pn(e,t,1,-1)}function Yc(t){var e=xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wi,lastRenderedState:t},e.queue=t,t=t.dispatch=Ty.bind(null,He,t),[e.memoizedState,t]}function Ci(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ip(){return rn().memoizedState}function fa(t,e,n,r){var o=xn();He.flags|=t,o.memoizedState=Ci(1|e,n,void 0,r===void 0?null:r)}function rs(t,e,n,r){var o=rn();r=r===void 0?null:r;var i=void 0;if(je!==null){var a=je.memoizedState;if(i=a.destroy,r!==null&&sf(r,a.deps)){o.memoizedState=Ci(e,n,i,r);return}}He.flags|=t,o.memoizedState=Ci(1|e,n,i,r)}function Xc(t,e){return fa(8390656,8,t,e)}function ff(t,e){return rs(2048,8,t,e)}function ap(t,e){return rs(4,2,t,e)}function sp(t,e){return rs(4,4,t,e)}function lp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function up(t,e,n){return n=n!=null?n.concat([t]):null,rs(4,4,lp.bind(null,e,t),n)}function cf(){}function fp(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function cp(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function dp(t,e,n){return Mr&21?(gn(n,e)||(n=m1(),He.lanes|=n,br|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function Ay(t,e){var n=Re;Re=n!==0&&4>n?n:4,t(!0);var r=Ys.transition;Ys.transition={};try{t(!1),e()}finally{Re=n,Ys.transition=r}}function hp(){return rn().memoizedState}function Sy(t,e,n){var r=ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pp(t))gp(e,n);else if(n=K1(t,e,n,r),n!==null){var o=Pt();pn(n,t,r,o),vp(n,e,r)}}function Ty(t,e,n){var r=ir(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pp(t))gp(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,gn(s,a)){var l=e.interleaved;l===null?(o.next=o,tf(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}n=K1(t,e,o,r),n!==null&&(o=Pt(),pn(n,t,r,o),vp(n,e,r))}}function pp(t){var e=t.alternate;return t===He||e!==null&&e===He}function gp(t,e){ri=Fa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gu(t,n)}}var Ba={readContext:nn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},Iy={readContext:nn,useCallback:function(t,e){return xn().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:Xc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fa(4194308,4,lp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fa(4194308,4,t,e)},useInsertionEffect:function(t,e){return fa(4,2,t,e)},useMemo:function(t,e){var n=xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Sy.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=xn();return t={current:t},e.memoizedState=t},useState:Yc,useDebugValue:cf,useDeferredValue:function(t){return xn().memoizedState=t},useTransition:function(){var t=Yc(!1),e=t[0];return t=Ay.bind(null,t[1]),xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,o=xn();if(Ue){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),ct===null)throw Error(q(349));Mr&30||ep(r,e,n)}o.memoizedState=n;var i={value:n,getSnapshot:e};return o.queue=i,Xc(np.bind(null,r,i,t),[t]),r.flags|=2048,Ci(9,tp.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=xn(),e=ct.identifierPrefix;if(Ue){var n=Pn,r=Rn;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ei++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Cy++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ny={readContext:nn,useCallback:fp,useContext:nn,useEffect:ff,useImperativeHandle:up,useInsertionEffect:ap,useLayoutEffect:sp,useMemo:cp,useReducer:Xs,useRef:ip,useState:function(){return Xs(wi)},useDebugValue:cf,useDeferredValue:function(t){var e=rn();return dp(e,je.memoizedState,t)},useTransition:function(){var t=Xs(wi)[0],e=rn().memoizedState;return[t,e]},useMutableSource:Q1,useSyncExternalStore:j1,useId:hp,unstable_isNewReconciler:!1},Ry={readContext:nn,useCallback:fp,useContext:nn,useEffect:ff,useImperativeHandle:up,useInsertionEffect:ap,useLayoutEffect:sp,useMemo:cp,useReducer:Ks,useRef:ip,useState:function(){return Ks(wi)},useDebugValue:cf,useDeferredValue:function(t){var e=rn();return je===null?e.memoizedState=t:dp(e,je.memoizedState,t)},useTransition:function(){var t=Ks(wi)[0],e=rn().memoizedState;return[t,e]},useMutableSource:Q1,useSyncExternalStore:j1,useId:hp,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var os={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),o=ir(t),i=Dn(r,o);i.payload=e,n!=null&&(i.callback=n),e=rr(t,i,o),e!==null&&(pn(e,t,o,r),la(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),o=ir(t),i=Dn(r,o);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=rr(t,i,o),e!==null&&(pn(e,t,o,r),la(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=ir(t),o=Dn(n,r);o.tag=2,e!=null&&(o.callback=e),e=rr(t,o,r),e!==null&&(pn(e,t,r,n),la(e,t,r))}};function Kc(t,e,n,r,o,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!gi(n,r)||!gi(o,i):!0}function mp(t,e,n){var r=!1,o=fr,i=e.contextType;return typeof i=="object"&&i!==null?i=nn(i):(o=Bt(e)?Pr:At.current,r=e.contextTypes,i=(r=r!=null)?ho(t,o):fr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=os,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function Jc(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&os.enqueueReplaceState(e,e.state,null)}function zl(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},nf(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=nn(i):(i=Bt(e)?Pr:At.current,o.context=ho(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Hl(t,e,i,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&os.enqueueReplaceState(o,o.state,null),ka(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function mo(t,e){try{var n="",r=e;do n+=rm(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function Js(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Py=typeof WeakMap=="function"?WeakMap:Map;function yp(t,e,n){n=Dn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Va||(Va=!0,eu=r),Wl(t,e)},n}function xp(t,e,n){n=Dn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){Wl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Wl(t,e),typeof r!="function"&&(or===null?or=new Set([this]):or.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Zc(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Py;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=Wy.bind(null,t,e,n),e.then(t,t))}function Qc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jc(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dn(-1,1),e.tag=2,rr(n,e,1))),n.lanes|=1),t)}var Dy=Fn.ReactCurrentOwner,Lt=!1;function Rt(t,e,n,r){e.child=t===null?X1(e,null,n,r):go(e,t.child,n,r)}function ed(t,e,n,r,o){n=n.render;var i=e.ref;return ao(e,o),r=lf(t,e,n,r,i,o),n=uf(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,kn(t,e,o)):(Ue&&n&&Ku(e),e.flags|=1,Rt(t,e,r,o),e.child)}function td(t,e,n,r,o){if(t===null){var i=n.type;return typeof i=="function"&&!xf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,_p(t,e,i,r,o)):(t=pa(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&o)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:gi,n(a,r)&&t.ref===e.ref)return kn(t,e,o)}return e.flags|=1,t=ar(i,r),t.ref=e.ref,t.return=e,e.child=t}function _p(t,e,n,r,o){if(t!==null){var i=t.memoizedProps;if(gi(i,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=i,(t.lanes&o)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,kn(t,e,o)}return ql(t,e,n,r,o)}function Ep(t,e,n){var r=e.pendingProps,o=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Qr,Gt),Gt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Qr,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,De(Qr,Gt),Gt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,De(Qr,Gt),Gt|=r;return Rt(t,e,o,n),e.child}function wp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ql(t,e,n,r,o){var i=Bt(n)?Pr:At.current;return i=ho(e,i),ao(e,o),n=lf(t,e,n,r,i,o),r=uf(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,kn(t,e,o)):(Ue&&r&&Ku(e),e.flags|=1,Rt(t,e,n,o),e.child)}function nd(t,e,n,r,o){if(Bt(n)){var i=!0;Pa(e)}else i=!1;if(ao(e,o),e.stateNode===null)ca(t,e),mp(e,n,r),zl(e,n,r,o),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=nn(u):(u=Bt(n)?Pr:At.current,u=ho(e,u));var f=n.getDerivedStateFromProps,d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==u)&&Jc(e,a,r,u),$n=!1;var p=e.memoizedState;a.state=p,ka(e,r,a,o),l=e.memoizedState,s!==r||p!==l||Ft.current||$n?(typeof f=="function"&&(Hl(e,n,f,r),l=e.memoizedState),(s=$n||Kc(e,n,s,r,p,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,J1(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:ln(e.type,s),a.props=u,d=e.pendingProps,p=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=nn(l):(l=Bt(n)?Pr:At.current,l=ho(e,l));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||p!==l)&&Jc(e,a,r,l),$n=!1,p=e.memoizedState,a.state=p,ka(e,r,a,o);var v=e.memoizedState;s!==d||p!==v||Ft.current||$n?(typeof g=="function"&&(Hl(e,n,g,r),v=e.memoizedState),(u=$n||Kc(e,n,u,r,p,v,l)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),a.props=r,a.state=v,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return $l(t,e,n,r,i,o)}function $l(t,e,n,r,o,i){wp(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return o&&Gc(e,n,!1),kn(t,e,i);r=e.stateNode,Dy.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=go(e,t.child,null,i),e.child=go(e,null,s,i)):Rt(t,e,s,i),e.memoizedState=r.state,o&&Gc(e,n,!0),e.child}function Cp(t){var e=t.stateNode;e.pendingContext?Vc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Vc(t,e.context,!1),rf(t,e.containerInfo)}function rd(t,e,n,r,o){return po(),Zu(o),e.flags|=256,Rt(t,e,n,r),e.child}var Yl={dehydrated:null,treeContext:null,retryLane:0};function Xl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ap(t,e,n){var r=e.pendingProps,o=Ve.current,i=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(o&2)!==0),s?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),De(Ve,o&1),t===null)return Vl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ss(a,r,0,null),t=Ir(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Xl(n),e.memoizedState=Yl,t):df(e,a));if(o=t.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return My(t,e,a,r,s,o,n);if(i){i=r.fallback,a=e.mode,o=t.child,s=o.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ar(o,l),r.subtreeFlags=o.subtreeFlags&14680064),s!==null?i=ar(s,i):(i=Ir(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Xl(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Yl,r}return i=t.child,t=i.sibling,r=ar(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function df(t,e){return e=ss({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yi(t,e,n,r){return r!==null&&Zu(r),go(e,t.child,null,n),t=df(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function My(t,e,n,r,o,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Js(Error(q(422))),Yi(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=ss({mode:"visible",children:r.children},o,0,null),i=Ir(i,o,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&go(e,t.child,null,a),e.child.memoizedState=Xl(a),e.memoizedState=Yl,i);if(!(e.mode&1))return Yi(t,e,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(q(419)),r=Js(i,r,void 0),Yi(t,e,a,r)}if(s=(a&t.childLanes)!==0,Lt||s){if(r=ct,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,On(t,o),pn(r,t,o,-1))}return yf(),r=Js(Error(q(421))),Yi(t,e,a,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=qy.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,Ht=nr(o.nextSibling),zt=e,Ue=!0,fn=null,t!==null&&(Kt[Jt++]=Rn,Kt[Jt++]=Pn,Kt[Jt++]=Dr,Rn=t.id,Pn=t.overflow,Dr=e),e=df(e,r.children),e.flags|=4096,e)}function od(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gl(t.return,e,n)}function Zs(t,e,n,r,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Sp(t,e,n){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(Rt(t,e,r.children,n),r=Ve.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&od(t,n,e);else if(t.tag===19)od(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De(Ve,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&La(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Zs(e,!1,o,n,i);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&La(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Zs(e,!0,n,null,i);break;case"together":Zs(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ca(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),br|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function by(t,e,n){switch(e.tag){case 3:Cp(e),po();break;case 5:Z1(e);break;case 1:Bt(e.type)&&Pa(e);break;case 4:rf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;De(ba,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De(Ve,Ve.current&1),e.flags|=128,null):n&e.child.childLanes?Ap(t,e,n):(De(Ve,Ve.current&1),t=kn(t,e,n),t!==null?t.sibling:null);De(Ve,Ve.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Sp(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),De(Ve,Ve.current),r)break;return null;case 22:case 23:return e.lanes=0,Ep(t,e,n)}return kn(t,e,n)}var Tp,Kl,Ip,Np;Tp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kl=function(){};Ip=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Ar(Cn.current);var i=null;switch(n){case"input":o=ml(t,o),r=ml(t,r),i=[];break;case"select":o=ze({},o,{value:void 0}),r=ze({},r,{value:void 0}),i=[];break;case"textarea":o=_l(t,o),r=_l(t,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Na)}wl(n,r);var a;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var s=o[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(li.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(s=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(li.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&be("scroll",t),i||s===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Np=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fo(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Oy(t,e,n){var r=e.pendingProps;switch(Ju(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Bt(e.type)&&Ra(),_t(e),null;case 3:return r=e.stateNode,vo(),Fe(Ft),Fe(At),af(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(ru(fn),fn=null))),Kl(t,e),_t(e),null;case 5:of(e);var o=Ar(_i.current);if(n=e.type,t!==null&&e.stateNode!=null)Ip(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return _t(e),null}if(t=Ar(Cn.current),qi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_n]=e,r[yi]=i,t=(e.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(o=0;o<$o.length;o++)be($o[o],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":hc(r,i),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},be("invalid",r);break;case"textarea":gc(r,i),be("invalid",r)}wl(n,i),o=null;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];a==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&Wi(r.textContent,s,t),o=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&Wi(r.textContent,s,t),o=["children",""+s]):li.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&be("scroll",r)}switch(n){case"input":Li(r),pc(r,i,!0);break;case"textarea":Li(r),vc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Na)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=n1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[_n]=e,t[yi]=r,Tp(t,e,!1,!1),e.stateNode=t;e:{switch(a=Cl(n,r),n){case"dialog":be("cancel",t),be("close",t),o=r;break;case"iframe":case"object":case"embed":be("load",t),o=r;break;case"video":case"audio":for(o=0;o<$o.length;o++)be($o[o],t);o=r;break;case"source":be("error",t),o=r;break;case"img":case"image":case"link":be("error",t),be("load",t),o=r;break;case"details":be("toggle",t),o=r;break;case"input":hc(t,r),o=ml(t,r),be("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=ze({},r,{value:void 0}),be("invalid",t);break;case"textarea":gc(t,r),o=_l(t,r),be("invalid",t);break;default:o=r}wl(n,o),s=o;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?i1(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&r1(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ui(t,l):typeof l=="number"&&ui(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(li.hasOwnProperty(i)?l!=null&&i==="onScroll"&&be("scroll",t):l!=null&&ku(t,i,l,a))}switch(n){case"input":Li(t),pc(t,r,!1);break;case"textarea":Li(t),vc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ur(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?no(t,!!r.multiple,i,!1):r.defaultValue!=null&&no(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Na)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)Np(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Ar(_i.current),Ar(Cn.current),qi(e)){if(r=e.stateNode,n=e.memoizedProps,r[_n]=e,(i=r.nodeValue!==n)&&(t=zt,t!==null))switch(t.tag){case 3:Wi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wi(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=e,e.stateNode=r}return _t(e),null;case 13:if(Fe(Ve),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&Ht!==null&&e.mode&1&&!(e.flags&128))$1(),po(),e.flags|=98560,i=!1;else if(i=qi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[_n]=e}else po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),i=!1}else fn!==null&&(ru(fn),fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ve.current&1?rt===0&&(rt=3):yf())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return vo(),Kl(t,e),t===null&&vi(e.stateNode.containerInfo),_t(e),null;case 10:return ef(e.type._context),_t(e),null;case 17:return Bt(e.type)&&Ra(),_t(e),null;case 19:if(Fe(Ve),i=e.memoizedState,i===null)return _t(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Fo(i,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=La(t),a!==null){for(e.flags|=128,Fo(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(Ve,Ve.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ye()>yo&&(e.flags|=128,r=!0,Fo(i,!1),e.lanes=4194304)}else{if(!r)if(t=La(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ue)return _t(e),null}else 2*Ye()-i.renderingStartTime>yo&&n!==1073741824&&(e.flags|=128,r=!0,Fo(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ye(),e.sibling=null,n=Ve.current,De(Ve,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return mf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gt&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function ky(t,e){switch(Ju(e),e.tag){case 1:return Bt(e.type)&&Ra(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vo(),Fe(Ft),Fe(At),af(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return of(e),null;case 13:if(Fe(Ve),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(Ve),null;case 4:return vo(),null;case 10:return ef(e.type._context),null;case 22:case 23:return mf(),null;case 24:return null;default:return null}}var Xi=!1,wt=!1,Ly=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Zr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(t,e,r)}else n.current=null}function Jl(t,e,n){try{n()}catch(r){qe(t,e,r)}}var id=!1;function Fy(t,e){if(bl=Sa,t=b1(),Xu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,u=0,f=0,d=t,p=null;t:for(;;){for(var g;d!==n||o!==0&&d.nodeType!==3||(s=a+o),d!==i||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++u===o&&(s=a),p===i&&++f===r&&(l=a),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ol={focusedElem:t,selectionRange:n},Sa=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,x=e.stateNode,m=x.getSnapshotBeforeUpdate(e.elementType===e.type?y:ln(e.type,y),w);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(S){qe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return v=id,id=!1,v}function oi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&Jl(e,n,i)}o=o.next}while(o!==r)}}function is(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Rp(t){var e=t.alternate;e!==null&&(t.alternate=null,Rp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_n],delete e[yi],delete e[Fl],delete e[xy],delete e[_y])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Pp(t){return t.tag===5||t.tag===3||t.tag===4}function ad(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ql(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Na));else if(r!==4&&(t=t.child,t!==null))for(Ql(t,e,n),t=t.sibling;t!==null;)Ql(t,e,n),t=t.sibling}function jl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jl(t,e,n),t=t.sibling;t!==null;)jl(t,e,n),t=t.sibling}var pt=null,un=!1;function Hn(t,e,n){for(n=n.child;n!==null;)Dp(t,e,n),n=n.sibling}function Dp(t,e,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Za,n)}catch{}switch(n.tag){case 5:wt||Zr(n,e);case 6:var r=pt,o=un;pt=null,Hn(t,e,n),pt=r,un=o,pt!==null&&(un?(t=pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(un?(t=pt,n=n.stateNode,t.nodeType===8?Ws(t.parentNode,n):t.nodeType===1&&Ws(t,n),hi(t)):Ws(pt,n.stateNode));break;case 4:r=pt,o=un,pt=n.stateNode.containerInfo,un=!0,Hn(t,e,n),pt=r,un=o;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Jl(n,e,a),o=o.next}while(o!==r)}Hn(t,e,n);break;case 1:if(!wt&&(Zr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){qe(n,e,s)}Hn(t,e,n);break;case 21:Hn(t,e,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,Hn(t,e,n),wt=r):Hn(t,e,n);break;default:Hn(t,e,n)}}function sd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ly),e.forEach(function(r){var o=$y.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:pt=s.stateNode,un=!1;break e;case 3:pt=s.stateNode.containerInfo,un=!0;break e;case 4:pt=s.stateNode.containerInfo,un=!0;break e}s=s.return}if(pt===null)throw Error(q(160));Dp(i,a,o),pt=null,un=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(u){qe(o,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mp(e,t),e=e.sibling}function Mp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),mn(t),r&4){try{oi(3,t,t.return),is(3,t)}catch(y){qe(t,t.return,y)}try{oi(5,t,t.return)}catch(y){qe(t,t.return,y)}}break;case 1:on(e,t),mn(t),r&512&&n!==null&&Zr(n,n.return);break;case 5:if(on(e,t),mn(t),r&512&&n!==null&&Zr(n,n.return),t.flags&32){var o=t.stateNode;try{ui(o,"")}catch(y){qe(t,t.return,y)}}if(r&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&e1(o,i),Cl(s,a);var u=Cl(s,i);for(a=0;a<l.length;a+=2){var f=l[a],d=l[a+1];f==="style"?i1(o,d):f==="dangerouslySetInnerHTML"?r1(o,d):f==="children"?ui(o,d):ku(o,f,d,u)}switch(s){case"input":yl(o,i);break;case"textarea":t1(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?no(o,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?no(o,!!i.multiple,i.defaultValue,!0):no(o,!!i.multiple,i.multiple?[]:"",!1))}o[yi]=i}catch(y){qe(t,t.return,y)}}break;case 6:if(on(e,t),mn(t),r&4){if(t.stateNode===null)throw Error(q(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(y){qe(t,t.return,y)}}break;case 3:if(on(e,t),mn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hi(e.containerInfo)}catch(y){qe(t,t.return,y)}break;case 4:on(e,t),mn(t);break;case 13:on(e,t),mn(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(gf=Ye())),r&4&&sd(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(wt=(u=wt)||f,on(e,t),wt=u):on(e,t),mn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(ee=t,f=t.child;f!==null;){for(d=ee=f;ee!==null;){switch(p=ee,g=p.child,p.tag){case 0:case 11:case 14:case 15:oi(4,p,p.return);break;case 1:Zr(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){qe(r,n,y)}}break;case 5:Zr(p,p.return);break;case 22:if(p.memoizedState!==null){ud(d);continue}}g!==null?(g.return=p,ee=g):ud(d)}f=f.sibling}e:for(f=null,d=t;;){if(d.tag===5){if(f===null){f=d;try{o=d.stateNode,u?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=o1("display",a))}catch(y){qe(t,t.return,y)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){qe(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:on(e,t),mn(t),r&4&&sd(t);break;case 21:break;default:on(e,t),mn(t)}}function mn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Pp(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(ui(o,""),r.flags&=-33);var i=ad(t);jl(t,i,o);break;case 3:case 4:var a=r.stateNode.containerInfo,s=ad(t);Ql(t,s,a);break;default:throw Error(q(161))}}catch(l){qe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function By(t,e,n){ee=t,bp(t)}function bp(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var o=ee,i=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||Xi;if(!a){var s=o.alternate,l=s!==null&&s.memoizedState!==null||wt;s=Xi;var u=wt;if(Xi=a,(wt=l)&&!u)for(ee=o;ee!==null;)a=ee,l=a.child,a.tag===22&&a.memoizedState!==null?fd(o):l!==null?(l.return=a,ee=l):fd(o);for(;i!==null;)ee=i,bp(i),i=i.sibling;ee=o,Xi=s,wt=u}ld(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,ee=i):ld(t)}}function ld(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wt||is(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wt)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$c(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$c(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&hi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}wt||e.flags&512&&Zl(e)}catch(p){qe(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function ud(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function fd(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{is(4,e)}catch(l){qe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(l){qe(e,o,l)}}var i=e.return;try{Zl(e)}catch(l){qe(e,i,l)}break;case 5:var a=e.return;try{Zl(e)}catch(l){qe(e,a,l)}}}catch(l){qe(e,e.return,l)}if(e===t){ee=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ee=s;break}ee=e.return}}var Uy=Math.ceil,Ua=Fn.ReactCurrentDispatcher,hf=Fn.ReactCurrentOwner,jt=Fn.ReactCurrentBatchConfig,ve=0,ct=null,Ke=null,vt=0,Gt=0,Qr=dr(0),rt=0,Ai=null,br=0,as=0,pf=0,ii=null,Ot=null,gf=0,yo=1/0,Tn=null,Va=!1,eu=null,or=null,Ki=!1,Zn=null,Ga=0,ai=0,tu=null,da=-1,ha=0;function Pt(){return ve&6?Ye():da!==-1?da:da=Ye()}function ir(t){return t.mode&1?ve&2&&vt!==0?vt&-vt:wy.transition!==null?(ha===0&&(ha=m1()),ha):(t=Re,t!==0||(t=window.event,t=t===void 0?16:A1(t.type)),t):1}function pn(t,e,n,r){if(50<ai)throw ai=0,tu=null,Error(q(185));Ti(t,n,r),(!(ve&2)||t!==ct)&&(t===ct&&(!(ve&2)&&(as|=n),rt===4&&Kn(t,vt)),Ut(t,r),n===1&&ve===0&&!(e.mode&1)&&(yo=Ye()+500,ns&&hr()))}function Ut(t,e){var n=t.callbackNode;wm(t,e);var r=Aa(t,t===ct?vt:0);if(r===0)n!==null&&xc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xc(n),e===1)t.tag===0?Ey(cd.bind(null,t)):z1(cd.bind(null,t)),my(function(){!(ve&6)&&hr()}),n=null;else{switch(y1(r)){case 1:n=Vu;break;case 4:n=g1;break;case 16:n=Ca;break;case 536870912:n=v1;break;default:n=Ca}n=Gp(n,Op.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Op(t,e){if(da=-1,ha=0,ve&6)throw Error(q(327));var n=t.callbackNode;if(so()&&t.callbackNode!==n)return null;var r=Aa(t,t===ct?vt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ha(t,r);else{e=r;var o=ve;ve|=2;var i=Lp();(ct!==t||vt!==e)&&(Tn=null,yo=Ye()+500,Tr(t,e));do try{Hy();break}catch(s){kp(t,s)}while(1);ju(),Ua.current=i,ve=o,Ke!==null?e=0:(ct=null,vt=0,e=rt)}if(e!==0){if(e===2&&(o=Nl(t),o!==0&&(r=o,e=nu(t,o))),e===1)throw n=Ai,Tr(t,0),Kn(t,r),Ut(t,Ye()),n;if(e===6)Kn(t,r);else{if(o=t.current.alternate,!(r&30)&&!Vy(o)&&(e=Ha(t,r),e===2&&(i=Nl(t),i!==0&&(r=i,e=nu(t,i))),e===1))throw n=Ai,Tr(t,0),Kn(t,r),Ut(t,Ye()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:_r(t,Ot,Tn);break;case 3:if(Kn(t,r),(r&130023424)===r&&(e=gf+500-Ye(),10<e)){if(Aa(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Ll(_r.bind(null,t,Ot,Tn),e);break}_r(t,Ot,Tn);break;case 4:if(Kn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var a=31-hn(r);i=1<<a,a=e[a],a>o&&(o=a),r&=~i}if(r=o,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Uy(r/1960))-r,10<r){t.timeoutHandle=Ll(_r.bind(null,t,Ot,Tn),r);break}_r(t,Ot,Tn);break;case 5:_r(t,Ot,Tn);break;default:throw Error(q(329))}}}return Ut(t,Ye()),t.callbackNode===n?Op.bind(null,t):null}function nu(t,e){var n=ii;return t.current.memoizedState.isDehydrated&&(Tr(t,e).flags|=256),t=Ha(t,e),t!==2&&(e=Ot,Ot=n,e!==null&&ru(e)),t}function ru(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function Vy(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!gn(i(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kn(t,e){for(e&=~pf,e&=~as,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),r=1<<n;t[n]=-1,e&=~r}}function cd(t){if(ve&6)throw Error(q(327));so();var e=Aa(t,0);if(!(e&1))return Ut(t,Ye()),null;var n=Ha(t,e);if(t.tag!==0&&n===2){var r=Nl(t);r!==0&&(e=r,n=nu(t,r))}if(n===1)throw n=Ai,Tr(t,0),Kn(t,e),Ut(t,Ye()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_r(t,Ot,Tn),Ut(t,Ye()),null}function vf(t,e){var n=ve;ve|=1;try{return t(e)}finally{ve=n,ve===0&&(yo=Ye()+500,ns&&hr())}}function Or(t){Zn!==null&&Zn.tag===0&&!(ve&6)&&so();var e=ve;ve|=1;var n=jt.transition,r=Re;try{if(jt.transition=null,Re=1,t)return t()}finally{Re=r,jt.transition=n,ve=e,!(ve&6)&&hr()}}function mf(){Gt=Qr.current,Fe(Qr)}function Tr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vy(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Ju(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ra();break;case 3:vo(),Fe(Ft),Fe(At),af();break;case 5:of(r);break;case 4:vo();break;case 13:Fe(Ve);break;case 19:Fe(Ve);break;case 10:ef(r.type._context);break;case 22:case 23:mf()}n=n.return}if(ct=t,Ke=t=ar(t.current,null),vt=Gt=e,rt=0,Ai=null,pf=as=br=0,Ot=ii=null,Cr!==null){for(e=0;e<Cr.length;e++)if(n=Cr[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=o,r.next=a}n.pending=r}Cr=null}return t}function kp(t,e){do{var n=Ke;try{if(ju(),ua.current=Ba,Fa){for(var r=He.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Fa=!1}if(Mr=0,lt=je=He=null,ri=!1,Ei=0,hf.current=null,n===null||n.return===null){rt=1,Ai=e,Ke=null;break}e:{var i=t,a=n.return,s=n,l=e;if(e=vt,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=s,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=Qc(a);if(g!==null){g.flags&=-257,jc(g,a,s,i,e),g.mode&1&&Zc(i,u,e),e=g,l=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){Zc(i,u,e),yf();break e}l=Error(q(426))}}else if(Ue&&s.mode&1){var w=Qc(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),jc(w,a,s,i,e),Zu(mo(l,s));break e}}i=l=mo(l,s),rt!==4&&(rt=2),ii===null?ii=[i]:ii.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=yp(i,l,e);qc(i,x);break e;case 1:s=l;var m=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(or===null||!or.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=xp(i,s,e);qc(i,S);break e}}i=i.return}while(i!==null)}Bp(n)}catch(A){e=A,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(1)}function Lp(){var t=Ua.current;return Ua.current=Ba,t===null?Ba:t}function yf(){(rt===0||rt===3||rt===2)&&(rt=4),ct===null||!(br&268435455)&&!(as&268435455)||Kn(ct,vt)}function Ha(t,e){var n=ve;ve|=2;var r=Lp();(ct!==t||vt!==e)&&(Tn=null,Tr(t,e));do try{Gy();break}catch(o){kp(t,o)}while(1);if(ju(),ve=n,Ua.current=r,Ke!==null)throw Error(q(261));return ct=null,vt=0,rt}function Gy(){for(;Ke!==null;)Fp(Ke)}function Hy(){for(;Ke!==null&&!hm();)Fp(Ke)}function Fp(t){var e=Vp(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?Bp(t):Ke=e,hf.current=null}function Bp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ky(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rt=6,Ke=null;return}}else if(n=Oy(n,e,Gt),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);rt===0&&(rt=5)}function _r(t,e,n){var r=Re,o=jt.transition;try{jt.transition=null,Re=1,zy(t,e,n,r)}finally{jt.transition=o,Re=r}return null}function zy(t,e,n,r){do so();while(Zn!==null);if(ve&6)throw Error(q(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Cm(t,i),t===ct&&(Ke=ct=null,vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ki||(Ki=!0,Gp(Ca,function(){return so(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jt.transition,jt.transition=null;var a=Re;Re=1;var s=ve;ve|=4,hf.current=null,Fy(t,n),Mp(n,t),uy(Ol),Sa=!!bl,Ol=bl=null,t.current=n,By(n),pm(),ve=s,Re=a,jt.transition=i}else t.current=n;if(Ki&&(Ki=!1,Zn=t,Ga=o),i=t.pendingLanes,i===0&&(or=null),mm(n.stateNode),Ut(t,Ye()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(Va)throw Va=!1,t=eu,eu=null,t;return Ga&1&&t.tag!==0&&so(),i=t.pendingLanes,i&1?t===tu?ai++:(ai=0,tu=t):ai=0,hr(),null}function so(){if(Zn!==null){var t=y1(Ga),e=jt.transition,n=Re;try{if(jt.transition=null,Re=16>t?16:t,Zn===null)var r=!1;else{if(t=Zn,Zn=null,Ga=0,ve&6)throw Error(q(331));var o=ve;for(ve|=4,ee=t.current;ee!==null;){var i=ee,a=i.child;if(ee.flags&16){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(ee=u;ee!==null;){var f=ee;switch(f.tag){case 0:case 11:case 15:oi(8,f,i)}var d=f.child;if(d!==null)d.return=f,ee=d;else for(;ee!==null;){f=ee;var p=f.sibling,g=f.return;if(Rp(f),f===u){ee=null;break}if(p!==null){p.return=g,ee=p;break}ee=g}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ee=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ee=a;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:oi(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ee=x;break e}ee=i.return}}var m=t.current;for(ee=m;ee!==null;){a=ee;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,ee=_;else e:for(a=m;ee!==null;){if(s=ee,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(A){qe(s,s.return,A)}if(s===a){ee=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,ee=S;break e}ee=s.return}}if(ve=o,hr(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Za,t)}catch{}r=!0}return r}finally{Re=n,jt.transition=e}}return!1}function dd(t,e,n){e=mo(n,e),e=yp(t,e,1),t=rr(t,e,1),e=Pt(),t!==null&&(Ti(t,1,e),Ut(t,e))}function qe(t,e,n){if(t.tag===3)dd(t,t,n);else for(;e!==null;){if(e.tag===3){dd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(or===null||!or.has(r))){t=mo(n,t),t=xp(e,t,1),e=rr(e,t,1),t=Pt(),e!==null&&(Ti(e,1,t),Ut(e,t));break}}e=e.return}}function Wy(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,ct===t&&(vt&n)===n&&(rt===4||rt===3&&(vt&130023424)===vt&&500>Ye()-gf?Tr(t,0):pf|=n),Ut(t,e)}function Up(t,e){e===0&&(t.mode&1?(e=Ui,Ui<<=1,!(Ui&130023424)&&(Ui=4194304)):e=1);var n=Pt();t=On(t,e),t!==null&&(Ti(t,e,n),Ut(t,n))}function qy(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Up(t,n)}function $y(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),Up(t,n)}var Vp;Vp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ft.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,by(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,Ue&&e.flags&1048576&&W1(e,Ma,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ca(t,e),t=e.pendingProps;var o=ho(e,At.current);ao(e,n),o=lf(null,e,r,t,o,n);var i=uf();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Bt(r)?(i=!0,Pa(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,nf(e),o.updater=os,e.stateNode=o,o._reactInternals=e,zl(e,r,t,n),e=$l(null,e,r,!0,i,n)):(e.tag=0,Ue&&i&&Ku(e),Rt(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ca(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=Xy(r),t=ln(r,t),o){case 0:e=ql(null,e,r,t,n);break e;case 1:e=nd(null,e,r,t,n);break e;case 11:e=ed(null,e,r,t,n);break e;case 14:e=td(null,e,r,ln(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:ln(r,o),ql(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:ln(r,o),nd(t,e,r,o,n);case 3:e:{if(Cp(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,o=i.element,J1(t,e),ka(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=mo(Error(q(423)),e),e=rd(t,e,r,n,o);break e}else if(r!==o){o=mo(Error(q(424)),e),e=rd(t,e,r,n,o);break e}else for(Ht=nr(e.stateNode.containerInfo.firstChild),zt=e,Ue=!0,fn=null,n=X1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(po(),r===o){e=kn(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return Z1(e),t===null&&Vl(e),r=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,a=o.children,kl(r,o)?a=null:i!==null&&kl(r,i)&&(e.flags|=32),wp(t,e),Rt(t,e,a,n),e.child;case 6:return t===null&&Vl(e),null;case 13:return Ap(t,e,n);case 4:return rf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=go(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:ln(r,o),ed(t,e,r,o,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,a=o.value,De(ba,r._currentValue),r._currentValue=a,i!==null)if(gn(i.value,a)){if(i.children===o.children&&!Ft.current){e=kn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var s=i.dependencies;if(s!==null){a=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Dn(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Gl(i.return,n,e),s.lanes|=n;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(q(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Gl(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Rt(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,ao(e,n),o=nn(o),r=r(o),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,o=ln(r,e.pendingProps),o=ln(r.type,o),td(t,e,r,o,n);case 15:return _p(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:ln(r,o),ca(t,e),e.tag=1,Bt(r)?(t=!0,Pa(e)):t=!1,ao(e,n),mp(e,r,o),zl(e,r,o,n),$l(null,e,r,!0,t,n);case 19:return Sp(t,e,n);case 22:return Ep(t,e,n)}throw Error(q(156,e.tag))};function Gp(t,e){return p1(t,e)}function Yy(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zt(t,e,n,r){return new Yy(t,e,n,r)}function xf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xy(t){if(typeof t=="function")return xf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fu)return 11;if(t===Bu)return 14}return 2}function ar(t,e){var n=t.alternate;return n===null?(n=Zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pa(t,e,n,r,o,i){var a=2;if(r=t,typeof t=="function")xf(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Hr:return Ir(n.children,o,i,e);case Lu:a=8,o|=8;break;case hl:return t=Zt(12,n,e,o|2),t.elementType=hl,t.lanes=i,t;case pl:return t=Zt(13,n,e,o),t.elementType=pl,t.lanes=i,t;case gl:return t=Zt(19,n,e,o),t.elementType=gl,t.lanes=i,t;case Zh:return ss(n,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Kh:a=10;break e;case Jh:a=9;break e;case Fu:a=11;break e;case Bu:a=14;break e;case qn:a=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Zt(a,n,e,o),e.elementType=t,e.type=r,e.lanes=i,e}function Ir(t,e,n,r){return t=Zt(7,t,r,e),t.lanes=n,t}function ss(t,e,n,r){return t=Zt(22,t,r,e),t.elementType=Zh,t.lanes=n,t.stateNode={isHidden:!1},t}function Qs(t,e,n){return t=Zt(6,t,null,e),t.lanes=n,t}function js(t,e,n){return e=Zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ky(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bs(0),this.expirationTimes=bs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bs(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function _f(t,e,n,r,o,i,a,s,l){return t=new Ky(t,e,n,s,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Zt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},nf(i),t}function Jy(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Hp(t){if(!t)return fr;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Bt(n))return H1(t,n,e)}return e}function zp(t,e,n,r,o,i,a,s,l){return t=_f(n,r,!0,t,o,i,a,s,l),t.context=Hp(null),n=t.current,r=Pt(),o=ir(n),i=Dn(r,o),i.callback=e??null,rr(n,i,o),t.current.lanes=o,Ti(t,o,r),Ut(t,r),t}function ls(t,e,n,r){var o=e.current,i=Pt(),a=ir(o);return n=Hp(n),e.context===null?e.context=n:e.pendingContext=n,e=Dn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=rr(o,e,a),t!==null&&(pn(t,o,a,i),la(t,o,a)),a}function za(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ef(t,e){hd(t,e),(t=t.alternate)&&hd(t,e)}function Zy(){return null}var Wp=typeof reportError=="function"?reportError:function(t){console.error(t)};function wf(t){this._internalRoot=t}us.prototype.render=wf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));ls(t,e,null,null)};us.prototype.unmount=wf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Or(function(){ls(null,t,null,null)}),e[bn]=null}};function us(t){this._internalRoot=t}us.prototype.unstable_scheduleHydration=function(t){if(t){var e=E1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xn.length&&e!==0&&e<Xn[n].priority;n++);Xn.splice(n,0,t),n===0&&C1(t)}};function Cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fs(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pd(){}function Qy(t,e,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var u=za(a);i.call(u)}}var a=zp(e,r,t,0,null,!1,!1,"",pd);return t._reactRootContainer=a,t[bn]=a.current,vi(t.nodeType===8?t.parentNode:t),Or(),a}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var s=r;r=function(){var u=za(l);s.call(u)}}var l=_f(t,0,!1,null,null,!1,!1,"",pd);return t._reactRootContainer=l,t[bn]=l.current,vi(t.nodeType===8?t.parentNode:t),Or(function(){ls(e,l,n,r)}),l}function cs(t,e,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if(typeof o=="function"){var s=o;o=function(){var l=za(a);s.call(l)}}ls(e,a,t,o)}else a=Qy(n,e,t,o,r);return za(a)}x1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qo(e.pendingLanes);n!==0&&(Gu(e,n|1),Ut(e,Ye()),!(ve&6)&&(yo=Ye()+500,hr()))}break;case 13:Or(function(){var r=On(t,1);if(r!==null){var o=Pt();pn(r,t,1,o)}}),Ef(t,1)}};Hu=function(t){if(t.tag===13){var e=On(t,134217728);if(e!==null){var n=Pt();pn(e,t,134217728,n)}Ef(t,134217728)}};_1=function(t){if(t.tag===13){var e=ir(t),n=On(t,e);if(n!==null){var r=Pt();pn(n,t,e,r)}Ef(t,e)}};E1=function(){return Re};w1=function(t,e){var n=Re;try{return Re=t,e()}finally{Re=n}};Sl=function(t,e,n){switch(e){case"input":if(yl(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=ts(r);if(!o)throw Error(q(90));jh(r),yl(r,o)}}}break;case"textarea":t1(t,n);break;case"select":e=n.value,e!=null&&no(t,!!n.multiple,e,!1)}};l1=vf;u1=Or;var jy={usingClientEntryPoint:!1,Events:[Ni,$r,ts,a1,s1,vf]},Bo={findFiberByHostInstance:wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e2={bundleType:Bo.bundleType,version:Bo.version,rendererPackageName:Bo.rendererPackageName,rendererConfig:Bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=d1(t),t===null?null:t.stateNode},findFiberByHostInstance:Bo.findFiberByHostInstance||Zy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ji=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ji.isDisabled&&Ji.supportsFiber)try{Za=Ji.inject(e2),wn=Ji}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jy;qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cf(e))throw Error(q(200));return Jy(t,e,null,n)};qt.createRoot=function(t,e){if(!Cf(t))throw Error(q(299));var n=!1,r="",o=Wp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=_f(t,1,!1,null,null,n,!1,r,o),t[bn]=e.current,vi(t.nodeType===8?t.parentNode:t),new wf(e)};qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=d1(e),t=t===null?null:t.stateNode,t};qt.flushSync=function(t){return Or(t)};qt.hydrate=function(t,e,n){if(!fs(e))throw Error(q(200));return cs(null,t,e,!0,n)};qt.hydrateRoot=function(t,e,n){if(!Cf(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",a=Wp;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=zp(e,null,t,1,n??null,o,!1,i,a),t[bn]=e.current,vi(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new us(e)};qt.render=function(t,e,n){if(!fs(e))throw Error(q(200));return cs(null,t,e,!1,n)};qt.unmountComponentAtNode=function(t){if(!fs(t))throw Error(q(40));return t._reactRootContainer?(Or(function(){cs(null,null,t,!1,function(){t._reactRootContainer=null,t[bn]=null})}),!0):!1};qt.unstable_batchedUpdates=vf;qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fs(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return cs(t,e,n,!1,r)};qt.version="18.3.1-next-f1338f8080-20240426";function qp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qp)}catch(t){console.error(t)}}qp(),qh.exports=qt;var t2=qh.exports,gd=t2;cl.createRoot=gd.createRoot,cl.hydrateRoot=gd.hydrateRoot;function Yo(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var $p={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,o,i){function a(u,f){if(!o[u]){if(!r[u]){var d=typeof Yo=="function"&&Yo;if(!f&&d)return d(u,!0);if(s)return s(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var g=o[u]={exports:{}};r[u][0].call(g.exports,function(v){var y=r[u][1][v];return a(y||v)},g,g.exports,n,r,o,i)}return o[u].exports}for(var s=typeof Yo=="function"&&Yo,l=0;l<i.length;l++)a(i[l]);return a}({1:[function(n,r,o){(function(i){var a=i.MutationObserver||i.WebKitMutationObserver,s;if(a){var l=0,u=new a(v),f=i.document.createTextNode("");u.observe(f,{characterData:!0}),s=function(){f.data=l=++l%2}}else if(!i.setImmediate&&typeof i.MessageChannel<"u"){var d=new i.MessageChannel;d.port1.onmessage=v,s=function(){d.port2.postMessage(0)}}else"document"in i&&"onreadystatechange"in i.document.createElement("script")?s=function(){var w=i.document.createElement("script");w.onreadystatechange=function(){v(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},i.document.documentElement.appendChild(w)}:s=function(){setTimeout(v,0)};var p,g=[];function v(){p=!0;for(var w,x,m=g.length;m;){for(x=g,g=[],w=-1;++w<m;)x[w]();m=g.length}p=!1}r.exports=y;function y(w){g.push(w)===1&&!p&&s()}}).call(this,typeof bi<"u"?bi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,o){var i=n(1);function a(){}var s={},l=["REJECTED"],u=["FULFILLED"],f=["PENDING"];r.exports=d;function d(A){if(typeof A!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,A!==a&&y(this,A)}d.prototype.catch=function(A){return this.then(null,A)},d.prototype.then=function(A,R){if(typeof A!="function"&&this.state===u||typeof R!="function"&&this.state===l)return this;var N=new this.constructor(a);if(this.state!==f){var M=this.state===u?A:R;g(N,M,this.outcome)}else this.queue.push(new p(N,A,R));return N};function p(A,R,N){this.promise=A,typeof R=="function"&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}p.prototype.callFulfilled=function(A){s.resolve(this.promise,A)},p.prototype.otherCallFulfilled=function(A){g(this.promise,this.onFulfilled,A)},p.prototype.callRejected=function(A){s.reject(this.promise,A)},p.prototype.otherCallRejected=function(A){g(this.promise,this.onRejected,A)};function g(A,R,N){i(function(){var M;try{M=R(N)}catch(F){return s.reject(A,F)}M===A?s.reject(A,new TypeError("Cannot resolve promise with itself")):s.resolve(A,M)})}s.resolve=function(A,R){var N=w(v,R);if(N.status==="error")return s.reject(A,N.value);var M=N.value;if(M)y(A,M);else{A.state=u,A.outcome=R;for(var F=-1,k=A.queue.length;++F<k;)A.queue[F].callFulfilled(R)}return A},s.reject=function(A,R){A.state=l,A.outcome=R;for(var N=-1,M=A.queue.length;++N<M;)A.queue[N].callRejected(R);return A};function v(A){var R=A&&A.then;if(A&&(typeof A=="object"||typeof A=="function")&&typeof R=="function")return function(){R.apply(A,arguments)}}function y(A,R){var N=!1;function M(X){N||(N=!0,s.reject(A,X))}function F(X){N||(N=!0,s.resolve(A,X))}function k(){R(F,M)}var $=w(k);$.status==="error"&&M($.value)}function w(A,R){var N={};try{N.value=A(R),N.status="success"}catch(M){N.status="error",N.value=M}return N}d.resolve=x;function x(A){return A instanceof this?A:s.resolve(new this(a),A)}d.reject=m;function m(A){var R=new this(a);return s.reject(R,A)}d.all=_;function _(A){var R=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=A.length,M=!1;if(!N)return this.resolve([]);for(var F=new Array(N),k=0,$=-1,X=new this(a);++$<N;)te(A[$],$);return X;function te(Ee,we){R.resolve(Ee).then(Ce,function(re){M||(M=!0,s.reject(X,re))});function Ce(re){F[we]=re,++k===N&&!M&&(M=!0,s.resolve(X,F))}}}d.race=S;function S(A){var R=this;if(Object.prototype.toString.call(A)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=A.length,M=!1;if(!N)return this.resolve([]);for(var F=-1,k=new this(a);++F<N;)$(A[F]);return k;function $(X){R.resolve(X).then(function(te){M||(M=!0,s.resolve(k,te))},function(te){M||(M=!0,s.reject(k,te))})}}},{1:1}],3:[function(n,r,o){(function(i){typeof i.Promise!="function"&&(i.Promise=n(2))}).call(this,typeof bi<"u"?bi:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,o){var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C};function a(C,P){if(!(C instanceof P))throw new TypeError("Cannot call a class as a function")}function s(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=s();function u(){try{if(!l||!l.open)return!1;var C=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),P=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!C||P)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function f(C,P){C=C||[],P=P||{};try{return new Blob(C,P)}catch(D){if(D.name!=="TypeError")throw D;for(var I=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,b=new I,O=0;O<C.length;O+=1)b.append(C[O]);return b.getBlob(P.type)}}typeof Promise>"u"&&n(3);var d=Promise;function p(C,P){P&&C.then(function(I){P(null,I)},function(I){P(I)})}function g(C,P,I){typeof P=="function"&&C.then(P),typeof I=="function"&&C.catch(I)}function v(C){return typeof C!="string"&&(console.warn(C+" used as a key, but it is not a string."),C=String(C)),C}function y(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var w="local-forage-detect-blob-support",x=void 0,m={},_=Object.prototype.toString,S="readonly",A="readwrite";function R(C){for(var P=C.length,I=new ArrayBuffer(P),b=new Uint8Array(I),O=0;O<P;O++)b[O]=C.charCodeAt(O);return I}function N(C){return new d(function(P){var I=C.transaction(w,A),b=f([""]);I.objectStore(w).put(b,"key"),I.onabort=function(O){O.preventDefault(),O.stopPropagation(),P(!1)},I.oncomplete=function(){var O=navigator.userAgent.match(/Chrome\/(\d+)/),D=navigator.userAgent.match(/Edge\//);P(D||!O||parseInt(O[1],10)>=43)}}).catch(function(){return!1})}function M(C){return typeof x=="boolean"?d.resolve(x):N(C).then(function(P){return x=P,x})}function F(C){var P=m[C.name],I={};I.promise=new d(function(b,O){I.resolve=b,I.reject=O}),P.deferredOperations.push(I),P.dbReady?P.dbReady=P.dbReady.then(function(){return I.promise}):P.dbReady=I.promise}function k(C){var P=m[C.name],I=P.deferredOperations.pop();if(I)return I.resolve(),I.promise}function $(C,P){var I=m[C.name],b=I.deferredOperations.pop();if(b)return b.reject(P),b.promise}function X(C,P){return new d(function(I,b){if(m[C.name]=m[C.name]||j(),C.db)if(P)F(C),C.db.close();else return I(C.db);var O=[C.name];P&&O.push(C.version);var D=l.open.apply(l,O);P&&(D.onupgradeneeded=function(H){var W=D.result;try{W.createObjectStore(C.storeName),H.oldVersion<=1&&W.createObjectStore(w)}catch(Y){if(Y.name==="ConstraintError")console.warn('The database "'+C.name+'" has been upgraded from version '+H.oldVersion+" to version "+H.newVersion+', but the storage "'+C.storeName+'" already exists.');else throw Y}}),D.onerror=function(H){H.preventDefault(),b(D.error)},D.onsuccess=function(){var H=D.result;H.onversionchange=function(W){W.target.close()},I(H),k(C)}})}function te(C){return X(C,!1)}function Ee(C){return X(C,!0)}function we(C,P){if(!C.db)return!0;var I=!C.db.objectStoreNames.contains(C.storeName),b=C.version<C.db.version,O=C.version>C.db.version;if(b&&(C.version!==P&&console.warn('The database "'+C.name+`" can't be downgraded from version `+C.db.version+" to version "+C.version+"."),C.version=C.db.version),O||I){if(I){var D=C.db.version+1;D>C.version&&(C.version=D)}return!0}return!1}function Ce(C){return new d(function(P,I){var b=new FileReader;b.onerror=I,b.onloadend=function(O){var D=btoa(O.target.result||"");P({__local_forage_encoded_blob:!0,data:D,type:C.type})},b.readAsBinaryString(C)})}function re(C){var P=R(atob(C.data));return f([P],{type:C.type})}function z(C){return C&&C.__local_forage_encoded_blob}function U(C){var P=this,I=P._initReady().then(function(){var b=m[P._dbInfo.name];if(b&&b.dbReady)return b.dbReady});return g(I,C,C),I}function B(C){F(C);for(var P=m[C.name],I=P.forages,b=0;b<I.length;b++){var O=I[b];O._dbInfo.db&&(O._dbInfo.db.close(),O._dbInfo.db=null)}return C.db=null,te(C).then(function(D){return C.db=D,we(C)?Ee(C):D}).then(function(D){C.db=P.db=D;for(var H=0;H<I.length;H++)I[H]._dbInfo.db=D}).catch(function(D){throw $(C,D),D})}function G(C,P,I,b){b===void 0&&(b=1);try{var O=C.db.transaction(C.storeName,P);I(null,O)}catch(D){if(b>0&&(!C.db||D.name==="InvalidStateError"||D.name==="NotFoundError"))return d.resolve().then(function(){if(!C.db||D.name==="NotFoundError"&&!C.db.objectStoreNames.contains(C.storeName)&&C.version<=C.db.version)return C.db&&(C.version=C.db.version+1),Ee(C)}).then(function(){return B(C).then(function(){G(C,P,I,b-1)})}).catch(I);I(D)}}function j(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ie(C){var P=this,I={db:null};if(C)for(var b in C)I[b]=C[b];var O=m[I.name];O||(O=j(),m[I.name]=O),O.forages.push(P),P._initReady||(P._initReady=P.ready,P.ready=U);var D=[];function H(){return d.resolve()}for(var W=0;W<O.forages.length;W++){var Y=O.forages[W];Y!==P&&D.push(Y._initReady().catch(H))}var K=O.forages.slice(0);return d.all(D).then(function(){return I.db=O.db,te(I)}).then(function(J){return I.db=J,we(I,P._defaultConfig.version)?Ee(I):J}).then(function(J){I.db=O.db=J,P._dbInfo=I;for(var oe=0;oe<K.length;oe++){var ce=K[oe];ce!==P&&(ce._dbInfo.db=I.db,ce._dbInfo.version=I.version)}})}function ue(C,P){var I=this;C=v(C);var b=new d(function(O,D){I.ready().then(function(){G(I._dbInfo,S,function(H,W){if(H)return D(H);try{var Y=W.objectStore(I._dbInfo.storeName),K=Y.get(C);K.onsuccess=function(){var J=K.result;J===void 0&&(J=null),z(J)&&(J=re(J)),O(J)},K.onerror=function(){D(K.error)}}catch(J){D(J)}})}).catch(D)});return p(b,P),b}function We(C,P){var I=this,b=new d(function(O,D){I.ready().then(function(){G(I._dbInfo,S,function(H,W){if(H)return D(H);try{var Y=W.objectStore(I._dbInfo.storeName),K=Y.openCursor(),J=1;K.onsuccess=function(){var oe=K.result;if(oe){var ce=oe.value;z(ce)&&(ce=re(ce));var Ae=C(ce,oe.key,J++);Ae!==void 0?O(Ae):oe.continue()}else O()},K.onerror=function(){D(K.error)}}catch(oe){D(oe)}})}).catch(D)});return p(b,P),b}function Be(C,P,I){var b=this;C=v(C);var O=new d(function(D,H){var W;b.ready().then(function(){return W=b._dbInfo,_.call(P)==="[object Blob]"?M(W.db).then(function(Y){return Y?P:Ce(P)}):P}).then(function(Y){G(b._dbInfo,A,function(K,J){if(K)return H(K);try{var oe=J.objectStore(b._dbInfo.storeName);Y===null&&(Y=void 0);var ce=oe.put(Y,C);J.oncomplete=function(){Y===void 0&&(Y=null),D(Y)},J.onabort=J.onerror=function(){var Ae=ce.error?ce.error:ce.transaction.error;H(Ae)}}catch(Ae){H(Ae)}})}).catch(H)});return p(O,I),O}function Je(C,P){var I=this;C=v(C);var b=new d(function(O,D){I.ready().then(function(){G(I._dbInfo,A,function(H,W){if(H)return D(H);try{var Y=W.objectStore(I._dbInfo.storeName),K=Y.delete(C);W.oncomplete=function(){O()},W.onerror=function(){D(K.error)},W.onabort=function(){var J=K.error?K.error:K.transaction.error;D(J)}}catch(J){D(J)}})}).catch(D)});return p(b,P),b}function yt(C){var P=this,I=new d(function(b,O){P.ready().then(function(){G(P._dbInfo,A,function(D,H){if(D)return O(D);try{var W=H.objectStore(P._dbInfo.storeName),Y=W.clear();H.oncomplete=function(){b()},H.onabort=H.onerror=function(){var K=Y.error?Y.error:Y.transaction.error;O(K)}}catch(K){O(K)}})}).catch(O)});return p(I,C),I}function No(C){var P=this,I=new d(function(b,O){P.ready().then(function(){G(P._dbInfo,S,function(D,H){if(D)return O(D);try{var W=H.objectStore(P._dbInfo.storeName),Y=W.count();Y.onsuccess=function(){b(Y.result)},Y.onerror=function(){O(Y.error)}}catch(K){O(K)}})}).catch(O)});return p(I,C),I}function gr(C,P){var I=this,b=new d(function(O,D){if(C<0){O(null);return}I.ready().then(function(){G(I._dbInfo,S,function(H,W){if(H)return D(H);try{var Y=W.objectStore(I._dbInfo.storeName),K=!1,J=Y.openKeyCursor();J.onsuccess=function(){var oe=J.result;if(!oe){O(null);return}C===0||K?O(oe.key):(K=!0,oe.advance(C))},J.onerror=function(){D(J.error)}}catch(oe){D(oe)}})}).catch(D)});return p(b,P),b}function Sn(C){var P=this,I=new d(function(b,O){P.ready().then(function(){G(P._dbInfo,S,function(D,H){if(D)return O(D);try{var W=H.objectStore(P._dbInfo.storeName),Y=W.openKeyCursor(),K=[];Y.onsuccess=function(){var J=Y.result;if(!J){b(K);return}K.push(J.key),J.continue()},Y.onerror=function(){O(Y.error)}}catch(J){O(J)}})}).catch(O)});return p(I,C),I}function Gg(C,P){P=y.apply(this,arguments);var I=this.config();C=typeof C!="function"&&C||{},C.name||(C.name=C.name||I.name,C.storeName=C.storeName||I.storeName);var b=this,O;if(!C.name)O=d.reject("Invalid arguments");else{var D=C.name===I.name&&b._dbInfo.db,H=D?d.resolve(b._dbInfo.db):te(C).then(function(W){var Y=m[C.name],K=Y.forages;Y.db=W;for(var J=0;J<K.length;J++)K[J]._dbInfo.db=W;return W});C.storeName?O=H.then(function(W){if(W.objectStoreNames.contains(C.storeName)){var Y=W.version+1;F(C);var K=m[C.name],J=K.forages;W.close();for(var oe=0;oe<J.length;oe++){var ce=J[oe];ce._dbInfo.db=null,ce._dbInfo.version=Y}var Ae=new d(function(Te,Xe){var $e=l.open(C.name,Y);$e.onerror=function(Yt){var Po=$e.result;Po.close(),Xe(Yt)},$e.onupgradeneeded=function(){var Yt=$e.result;Yt.deleteObjectStore(C.storeName)},$e.onsuccess=function(){var Yt=$e.result;Yt.close(),Te(Yt)}});return Ae.then(function(Te){K.db=Te;for(var Xe=0;Xe<J.length;Xe++){var $e=J[Xe];$e._dbInfo.db=Te,k($e._dbInfo)}}).catch(function(Te){throw($(C,Te)||d.resolve()).catch(function(){}),Te})}}):O=H.then(function(W){F(C);var Y=m[C.name],K=Y.forages;W.close();for(var J=0;J<K.length;J++){var oe=K[J];oe._dbInfo.db=null}var ce=new d(function(Ae,Te){var Xe=l.deleteDatabase(C.name);Xe.onerror=function(){var $e=Xe.result;$e&&$e.close(),Te(Xe.error)},Xe.onblocked=function(){console.warn('dropInstance blocked for database "'+C.name+'" until all open connections are closed')},Xe.onsuccess=function(){var $e=Xe.result;$e&&$e.close(),Ae($e)}});return ce.then(function(Ae){Y.db=Ae;for(var Te=0;Te<K.length;Te++){var Xe=K[Te];k(Xe._dbInfo)}}).catch(function(Ae){throw($(C,Ae)||d.resolve()).catch(function(){}),Ae})})}return p(O,P),O}var Hg={_driver:"asyncStorage",_initStorage:ie,_support:u(),iterate:We,getItem:ue,setItem:Be,removeItem:Je,clear:yt,length:No,key:gr,keys:Sn,dropInstance:Gg};function zg(){return typeof openDatabase=="function"}var Vn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wg="~~local_forage_type~",Hf=/^~~local_forage_type~([^~]+)~/,Di="__lfsc__:",xs=Di.length,_s="arbf",Es="blob",zf="si08",Wf="ui08",qf="uic8",$f="si16",Yf="si32",Xf="ur16",Kf="ui32",Jf="fl32",Zf="fl64",Qf=xs+_s.length,jf=Object.prototype.toString;function ec(C){var P=C.length*.75,I=C.length,b,O=0,D,H,W,Y;C[C.length-1]==="="&&(P--,C[C.length-2]==="="&&P--);var K=new ArrayBuffer(P),J=new Uint8Array(K);for(b=0;b<I;b+=4)D=Vn.indexOf(C[b]),H=Vn.indexOf(C[b+1]),W=Vn.indexOf(C[b+2]),Y=Vn.indexOf(C[b+3]),J[O++]=D<<2|H>>4,J[O++]=(H&15)<<4|W>>2,J[O++]=(W&3)<<6|Y&63;return K}function ws(C){var P=new Uint8Array(C),I="",b;for(b=0;b<P.length;b+=3)I+=Vn[P[b]>>2],I+=Vn[(P[b]&3)<<4|P[b+1]>>4],I+=Vn[(P[b+1]&15)<<2|P[b+2]>>6],I+=Vn[P[b+2]&63];return P.length%3===2?I=I.substring(0,I.length-1)+"=":P.length%3===1&&(I=I.substring(0,I.length-2)+"=="),I}function qg(C,P){var I="";if(C&&(I=jf.call(C)),C&&(I==="[object ArrayBuffer]"||C.buffer&&jf.call(C.buffer)==="[object ArrayBuffer]")){var b,O=Di;C instanceof ArrayBuffer?(b=C,O+=_s):(b=C.buffer,I==="[object Int8Array]"?O+=zf:I==="[object Uint8Array]"?O+=Wf:I==="[object Uint8ClampedArray]"?O+=qf:I==="[object Int16Array]"?O+=$f:I==="[object Uint16Array]"?O+=Xf:I==="[object Int32Array]"?O+=Yf:I==="[object Uint32Array]"?O+=Kf:I==="[object Float32Array]"?O+=Jf:I==="[object Float64Array]"?O+=Zf:P(new Error("Failed to get type for BinaryArray"))),P(O+ws(b))}else if(I==="[object Blob]"){var D=new FileReader;D.onload=function(){var H=Wg+C.type+"~"+ws(this.result);P(Di+Es+H)},D.readAsArrayBuffer(C)}else try{P(JSON.stringify(C))}catch(H){console.error("Couldn't convert value into a JSON string: ",C),P(null,H)}}function $g(C){if(C.substring(0,xs)!==Di)return JSON.parse(C);var P=C.substring(Qf),I=C.substring(xs,Qf),b;if(I===Es&&Hf.test(P)){var O=P.match(Hf);b=O[1],P=P.substring(O[0].length)}var D=ec(P);switch(I){case _s:return D;case Es:return f([D],{type:b});case zf:return new Int8Array(D);case Wf:return new Uint8Array(D);case qf:return new Uint8ClampedArray(D);case $f:return new Int16Array(D);case Xf:return new Uint16Array(D);case Yf:return new Int32Array(D);case Kf:return new Uint32Array(D);case Jf:return new Float32Array(D);case Zf:return new Float64Array(D);default:throw new Error("Unkown type: "+I)}}var Cs={serialize:qg,deserialize:$g,stringToBuffer:ec,bufferToString:ws};function tc(C,P,I,b){C.executeSql("CREATE TABLE IF NOT EXISTS "+P.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],I,b)}function Yg(C){var P=this,I={db:null};if(C)for(var b in C)I[b]=typeof C[b]!="string"?C[b].toString():C[b];var O=new d(function(D,H){try{I.db=openDatabase(I.name,String(I.version),I.description,I.size)}catch(W){return H(W)}I.db.transaction(function(W){tc(W,I,function(){P._dbInfo=I,D()},function(Y,K){H(K)})},H)});return I.serializer=Cs,O}function Gn(C,P,I,b,O,D){C.executeSql(I,b,O,function(H,W){W.code===W.SYNTAX_ERR?H.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[P.storeName],function(Y,K){K.rows.length?D(Y,W):tc(Y,P,function(){Y.executeSql(I,b,O,D)},D)},D):D(H,W)},D)}function Xg(C,P){var I=this;C=v(C);var b=new d(function(O,D){I.ready().then(function(){var H=I._dbInfo;H.db.transaction(function(W){Gn(W,H,"SELECT * FROM "+H.storeName+" WHERE key = ? LIMIT 1",[C],function(Y,K){var J=K.rows.length?K.rows.item(0).value:null;J&&(J=H.serializer.deserialize(J)),O(J)},function(Y,K){D(K)})})}).catch(D)});return p(b,P),b}function Kg(C,P){var I=this,b=new d(function(O,D){I.ready().then(function(){var H=I._dbInfo;H.db.transaction(function(W){Gn(W,H,"SELECT * FROM "+H.storeName,[],function(Y,K){for(var J=K.rows,oe=J.length,ce=0;ce<oe;ce++){var Ae=J.item(ce),Te=Ae.value;if(Te&&(Te=H.serializer.deserialize(Te)),Te=C(Te,Ae.key,ce+1),Te!==void 0){O(Te);return}}O()},function(Y,K){D(K)})})}).catch(D)});return p(b,P),b}function nc(C,P,I,b){var O=this;C=v(C);var D=new d(function(H,W){O.ready().then(function(){P===void 0&&(P=null);var Y=P,K=O._dbInfo;K.serializer.serialize(P,function(J,oe){oe?W(oe):K.db.transaction(function(ce){Gn(ce,K,"INSERT OR REPLACE INTO "+K.storeName+" (key, value) VALUES (?, ?)",[C,J],function(){H(Y)},function(Ae,Te){W(Te)})},function(ce){if(ce.code===ce.QUOTA_ERR){if(b>0){H(nc.apply(O,[C,Y,I,b-1]));return}W(ce)}})})}).catch(W)});return p(D,I),D}function Jg(C,P,I){return nc.apply(this,[C,P,I,1])}function Zg(C,P){var I=this;C=v(C);var b=new d(function(O,D){I.ready().then(function(){var H=I._dbInfo;H.db.transaction(function(W){Gn(W,H,"DELETE FROM "+H.storeName+" WHERE key = ?",[C],function(){O()},function(Y,K){D(K)})})}).catch(D)});return p(b,P),b}function Qg(C){var P=this,I=new d(function(b,O){P.ready().then(function(){var D=P._dbInfo;D.db.transaction(function(H){Gn(H,D,"DELETE FROM "+D.storeName,[],function(){b()},function(W,Y){O(Y)})})}).catch(O)});return p(I,C),I}function jg(C){var P=this,I=new d(function(b,O){P.ready().then(function(){var D=P._dbInfo;D.db.transaction(function(H){Gn(H,D,"SELECT COUNT(key) as c FROM "+D.storeName,[],function(W,Y){var K=Y.rows.item(0).c;b(K)},function(W,Y){O(Y)})})}).catch(O)});return p(I,C),I}function ev(C,P){var I=this,b=new d(function(O,D){I.ready().then(function(){var H=I._dbInfo;H.db.transaction(function(W){Gn(W,H,"SELECT key FROM "+H.storeName+" WHERE id = ? LIMIT 1",[C+1],function(Y,K){var J=K.rows.length?K.rows.item(0).key:null;O(J)},function(Y,K){D(K)})})}).catch(D)});return p(b,P),b}function tv(C){var P=this,I=new d(function(b,O){P.ready().then(function(){var D=P._dbInfo;D.db.transaction(function(H){Gn(H,D,"SELECT key FROM "+D.storeName,[],function(W,Y){for(var K=[],J=0;J<Y.rows.length;J++)K.push(Y.rows.item(J).key);b(K)},function(W,Y){O(Y)})})}).catch(O)});return p(I,C),I}function nv(C){return new d(function(P,I){C.transaction(function(b){b.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(O,D){for(var H=[],W=0;W<D.rows.length;W++)H.push(D.rows.item(W).name);P({db:C,storeNames:H})},function(O,D){I(D)})},function(b){I(b)})})}function rv(C,P){P=y.apply(this,arguments);var I=this.config();C=typeof C!="function"&&C||{},C.name||(C.name=C.name||I.name,C.storeName=C.storeName||I.storeName);var b=this,O;return C.name?O=new d(function(D){var H;C.name===I.name?H=b._dbInfo.db:H=openDatabase(C.name,"","",0),C.storeName?D({db:H,storeNames:[C.storeName]}):D(nv(H))}).then(function(D){return new d(function(H,W){D.db.transaction(function(Y){function K(Ae){return new d(function(Te,Xe){Y.executeSql("DROP TABLE IF EXISTS "+Ae,[],function(){Te()},function($e,Yt){Xe(Yt)})})}for(var J=[],oe=0,ce=D.storeNames.length;oe<ce;oe++)J.push(K(D.storeNames[oe]));d.all(J).then(function(){H()}).catch(function(Ae){W(Ae)})},function(Y){W(Y)})})}):O=d.reject("Invalid arguments"),p(O,P),O}var ov={_driver:"webSQLStorage",_initStorage:Yg,_support:zg(),iterate:Kg,getItem:Xg,setItem:Jg,removeItem:Zg,clear:Qg,length:jg,key:ev,keys:tv,dropInstance:rv};function iv(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function rc(C,P){var I=C.name+"/";return C.storeName!==P.storeName&&(I+=C.storeName+"/"),I}function av(){var C="_localforage_support_test";try{return localStorage.setItem(C,!0),localStorage.removeItem(C),!1}catch{return!0}}function sv(){return!av()||localStorage.length>0}function lv(C){var P=this,I={};if(C)for(var b in C)I[b]=C[b];return I.keyPrefix=rc(C,P._defaultConfig),sv()?(P._dbInfo=I,I.serializer=Cs,d.resolve()):d.reject()}function uv(C){var P=this,I=P.ready().then(function(){for(var b=P._dbInfo.keyPrefix,O=localStorage.length-1;O>=0;O--){var D=localStorage.key(O);D.indexOf(b)===0&&localStorage.removeItem(D)}});return p(I,C),I}function fv(C,P){var I=this;C=v(C);var b=I.ready().then(function(){var O=I._dbInfo,D=localStorage.getItem(O.keyPrefix+C);return D&&(D=O.serializer.deserialize(D)),D});return p(b,P),b}function cv(C,P){var I=this,b=I.ready().then(function(){for(var O=I._dbInfo,D=O.keyPrefix,H=D.length,W=localStorage.length,Y=1,K=0;K<W;K++){var J=localStorage.key(K);if(J.indexOf(D)===0){var oe=localStorage.getItem(J);if(oe&&(oe=O.serializer.deserialize(oe)),oe=C(oe,J.substring(H),Y++),oe!==void 0)return oe}}});return p(b,P),b}function dv(C,P){var I=this,b=I.ready().then(function(){var O=I._dbInfo,D;try{D=localStorage.key(C)}catch{D=null}return D&&(D=D.substring(O.keyPrefix.length)),D});return p(b,P),b}function hv(C){var P=this,I=P.ready().then(function(){for(var b=P._dbInfo,O=localStorage.length,D=[],H=0;H<O;H++){var W=localStorage.key(H);W.indexOf(b.keyPrefix)===0&&D.push(W.substring(b.keyPrefix.length))}return D});return p(I,C),I}function pv(C){var P=this,I=P.keys().then(function(b){return b.length});return p(I,C),I}function gv(C,P){var I=this;C=v(C);var b=I.ready().then(function(){var O=I._dbInfo;localStorage.removeItem(O.keyPrefix+C)});return p(b,P),b}function vv(C,P,I){var b=this;C=v(C);var O=b.ready().then(function(){P===void 0&&(P=null);var D=P;return new d(function(H,W){var Y=b._dbInfo;Y.serializer.serialize(P,function(K,J){if(J)W(J);else try{localStorage.setItem(Y.keyPrefix+C,K),H(D)}catch(oe){(oe.name==="QuotaExceededError"||oe.name==="NS_ERROR_DOM_QUOTA_REACHED")&&W(oe),W(oe)}})})});return p(O,I),O}function mv(C,P){if(P=y.apply(this,arguments),C=typeof C!="function"&&C||{},!C.name){var I=this.config();C.name=C.name||I.name,C.storeName=C.storeName||I.storeName}var b=this,O;return C.name?O=new d(function(D){C.storeName?D(rc(C,b._defaultConfig)):D(C.name+"/")}).then(function(D){for(var H=localStorage.length-1;H>=0;H--){var W=localStorage.key(H);W.indexOf(D)===0&&localStorage.removeItem(W)}}):O=d.reject("Invalid arguments"),p(O,P),O}var yv={_driver:"localStorageWrapper",_initStorage:lv,_support:iv(),iterate:cv,getItem:fv,setItem:vv,removeItem:gv,clear:uv,length:pv,key:dv,keys:hv,dropInstance:mv},xv=function(P,I){return P===I||typeof P=="number"&&typeof I=="number"&&isNaN(P)&&isNaN(I)},_v=function(P,I){for(var b=P.length,O=0;O<b;){if(xv(P[O],I))return!0;O++}return!1},oc=Array.isArray||function(C){return Object.prototype.toString.call(C)==="[object Array]"},Ro={},ic={},Br={INDEXEDDB:Hg,WEBSQL:ov,LOCALSTORAGE:yv},Ev=[Br.INDEXEDDB._driver,Br.WEBSQL._driver,Br.LOCALSTORAGE._driver],Mi=["dropInstance"],As=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Mi),wv={description:"",driver:Ev.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Cv(C,P){C[P]=function(){var I=arguments;return C.ready().then(function(){return C[P].apply(C,I)})}}function Ss(){for(var C=1;C<arguments.length;C++){var P=arguments[C];if(P)for(var I in P)P.hasOwnProperty(I)&&(oc(P[I])?arguments[0][I]=P[I].slice():arguments[0][I]=P[I])}return arguments[0]}var Av=function(){function C(P){a(this,C);for(var I in Br)if(Br.hasOwnProperty(I)){var b=Br[I],O=b._driver;this[I]=O,Ro[O]||this.defineDriver(b)}this._defaultConfig=Ss({},wv),this._config=Ss({},this._defaultConfig,P),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return C.prototype.config=function(I){if((typeof I>"u"?"undefined":i(I))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in I){if(b==="storeName"&&(I[b]=I[b].replace(/\W/g,"_")),b==="version"&&typeof I[b]!="number")return new Error("Database version must be a number.");this._config[b]=I[b]}return"driver"in I&&I.driver?this.setDriver(this._config.driver):!0}else return typeof I=="string"?this._config[I]:this._config},C.prototype.defineDriver=function(I,b,O){var D=new d(function(H,W){try{var Y=I._driver,K=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!I._driver){W(K);return}for(var J=As.concat("_initStorage"),oe=0,ce=J.length;oe<ce;oe++){var Ae=J[oe],Te=!_v(Mi,Ae);if((Te||I[Ae])&&typeof I[Ae]!="function"){W(K);return}}var Xe=function(){for(var Po=function(Iv){return function(){var Nv=new Error("Method "+Iv+" is not implemented by the current driver"),ac=d.reject(Nv);return p(ac,arguments[arguments.length-1]),ac}},Ts=0,Tv=Mi.length;Ts<Tv;Ts++){var Is=Mi[Ts];I[Is]||(I[Is]=Po(Is))}};Xe();var $e=function(Po){Ro[Y]&&console.info("Redefining LocalForage driver: "+Y),Ro[Y]=I,ic[Y]=Po,H()};"_support"in I?I._support&&typeof I._support=="function"?I._support().then($e,W):$e(!!I._support):$e(!0)}catch(Yt){W(Yt)}});return g(D,b,O),D},C.prototype.driver=function(){return this._driver||null},C.prototype.getDriver=function(I,b,O){var D=Ro[I]?d.resolve(Ro[I]):d.reject(new Error("Driver not found."));return g(D,b,O),D},C.prototype.getSerializer=function(I){var b=d.resolve(Cs);return g(b,I),b},C.prototype.ready=function(I){var b=this,O=b._driverSet.then(function(){return b._ready===null&&(b._ready=b._initDriver()),b._ready});return g(O,I,I),O},C.prototype.setDriver=function(I,b,O){var D=this;oc(I)||(I=[I]);var H=this._getSupportedDrivers(I);function W(){D._config.driver=D.driver()}function Y(oe){return D._extend(oe),W(),D._ready=D._initStorage(D._config),D._ready}function K(oe){return function(){var ce=0;function Ae(){for(;ce<oe.length;){var Te=oe[ce];return ce++,D._dbInfo=null,D._ready=null,D.getDriver(Te).then(Y).catch(Ae)}W();var Xe=new Error("No available storage method found.");return D._driverSet=d.reject(Xe),D._driverSet}return Ae()}}var J=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=J.then(function(){var oe=H[0];return D._dbInfo=null,D._ready=null,D.getDriver(oe).then(function(ce){D._driver=ce._driver,W(),D._wrapLibraryMethodsWithReady(),D._initDriver=K(H)})}).catch(function(){W();var oe=new Error("No available storage method found.");return D._driverSet=d.reject(oe),D._driverSet}),g(this._driverSet,b,O),this._driverSet},C.prototype.supports=function(I){return!!ic[I]},C.prototype._extend=function(I){Ss(this,I)},C.prototype._getSupportedDrivers=function(I){for(var b=[],O=0,D=I.length;O<D;O++){var H=I[O];this.supports(H)&&b.push(H)}return b},C.prototype._wrapLibraryMethodsWithReady=function(){for(var I=0,b=As.length;I<b;I++)Cv(this,As[I])},C.prototype.createInstance=function(I){return new C(I)},C}(),Sv=new Av;r.exports=Sv},{3:3}]},{},[4])(4)})})($p);var n2=$p.exports;const Nn=Nu(n2);Nn.config({name:"NutritionTracker",version:1,storeName:"nutrition_data",description:"Nutrition tracker offline storage"});const r2=async t=>{var e,n,r,o;try{const i=await Nn.getItem(`product_${t}`);if(i)return i;const a=await fetch(`https://world.openfoodfacts.org/api/v0/product/${t}.json`);if(!a.ok)throw new Error("Product not found");const s=await a.json();if(s.status===1){const l=s.product,u={name:l.product_name||"Unknown Product",brand:l.brands||"",calories:((e=l.nutriments)==null?void 0:e["energy-kcal"])||0,protein:((n=l.nutriments)==null?void 0:n.proteins)||0,carbs:((r=l.nutriments)==null?void 0:r.carbohydrates)||0,fats:((o=l.nutriments)==null?void 0:o.fat)||0,servingSize:l.serving_size||"100g",ingredients:l.ingredients_text||"",barcode:t};return await Nn.setItem(`product_${t}`,u),u}else throw new Error("Product not found in database")}catch(i){throw console.error("Error fetching product:",i),i}};var o2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const i2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a2=(t,e)=>{const n=le.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:s,...l},u)=>le.createElement("svg",{ref:u,...o2,width:o,height:o,stroke:r,strokeWidth:a?Number(i)*24/Number(o):i,className:`lucide lucide-${i2(t)}`,...l},[...e.map(([f,d])=>le.createElement(f,d)),...(Array.isArray(s)?s:[s])||[]]));return n.displayName=`${t}`,n};var it=a2;const s2=it("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),vd=it("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),l2=it("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),u2=it("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),f2=it("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Yp=it("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),md=it("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),c2=it("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),d2=it("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),h2=it("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),p2=it("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),g2=it("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),v2=it("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Xp=it("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),m2=it("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),y2=it("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),x2=it("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Nr=it("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),Kp=it("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_2=({userData:t,dailyLog:e,onAddFood:n,onRemoveFood:r})=>{const i=(()=>e.reduce((u,f)=>({calories:u.calories+(f.calories||0),protein:u.protein+(f.protein||0),carbs:u.carbs+(f.carbs||0),fats:u.fats+(f.fats||0)}),{calories:0,protein:0,carbs:0,fats:0}))(),a=Math.max(0,((t==null?void 0:t.dailyCalories)||2e3)-i.calories),s=(i.calories/((t==null?void 0:t.dailyCalories)||2e3)*100).toFixed(1),l=({progress:u,color:f,label:d,value:p,max:g})=>{const v=2*Math.PI*45,y=v,w=v-Math.min(u,100)/100*v;return E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsxs("div",{className:"relative",children:[E.jsxs("svg",{className:"w-24 h-24 transform -rotate-90",children:[E.jsx("circle",{cx:"48",cy:"48",r:"45",stroke:"#e5e7eb",strokeWidth:"6",fill:"transparent"}),E.jsx("circle",{cx:"48",cy:"48",r:"45",stroke:f,strokeWidth:"6",fill:"transparent",strokeDasharray:y,strokeDashoffset:w,strokeLinecap:"round"})]}),E.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[E.jsx("span",{className:"text-lg font-bold text-gray-900",children:p}),E.jsxs("span",{className:"text-xs text-gray-500",children:["/ ",g]})]})]}),E.jsx("span",{className:"text-sm text-gray-600 mt-2",children:d})]})};return E.jsxs("div",{className:"space-y-6 ",children:[E.jsxs("div",{className:"text-center mt-12",children:[E.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Nutrition Tracker"}),E.jsxs("p",{className:"text-gray-600",children:["Today's Progress  ",new Date().toLocaleDateString()]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 text-center",children:[E.jsx(Xp,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),E.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Math.round(a)}),E.jsx("div",{className:"text-sm text-gray-600",children:"Calories Left"}),E.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s,"% of goal"]})]}),E.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 text-center",children:[E.jsx(Nr,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),E.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.length}),E.jsx("div",{className:"text-sm text-gray-600",children:"Foods Logged"}),E.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"meals & snacks"})]})]}),E.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[E.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Daily Progress"}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsx(l,{progress:i.calories/((t==null?void 0:t.dailyCalories)||2e3)*100,color:"#3b82f6",label:"Calories",value:Math.round(i.calories),max:(t==null?void 0:t.dailyCalories)||2e3}),E.jsx(l,{progress:i.protein/150*100,color:"#10b981",label:"Protein (g)",value:i.protein.toFixed(1),max:150})]})]}),E.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[E.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Macros"}),E.jsxs("div",{className:"space-y-3",children:[E.jsx(el,{label:"Protein",value:i.protein,color:"bg-green-500",max:150}),E.jsx(el,{label:"Carbs",value:i.carbs,color:"bg-blue-500",max:300}),E.jsx(el,{label:"Fats",value:i.fats,color:"bg-yellow-500",max:70})]})]}),e.length>0&&E.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[E.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Today's Foods"}),E.jsx("div",{className:"space-y-2",children:e.map(u=>{var f,d,p;return E.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("div",{className:"font-medium text-gray-900",children:u.name}),u.brand&&E.jsx("div",{className:"text-xs text-gray-500",children:u.brand}),E.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[Math.round(u.calories)," cal  P:"," ",(f=u.protein)==null?void 0:f.toFixed(1),"g  C: ",(d=u.carbs)==null?void 0:d.toFixed(1),"g  F: ",(p=u.fats)==null?void 0:p.toFixed(1),"g"]})]}),r&&E.jsx("button",{onClick:()=>r(u.id),className:"ml-2 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:E.jsx(m2,{className:"w-4 h-4"})})]},u.id)})})]}),E.jsxs("button",{onClick:n,className:"w-full bg-black text-white py-4 rounded-lg font-semibold flex items-center justify-center space-x-2 hover:bg-gray-800 transition-colors",children:[E.jsx(p2,{className:"w-5 h-5"}),E.jsx("span",{children:"Add Food"})]})]})},el=({label:t,value:e,color:n,max:r})=>{const o=Math.min(e/r*100,100);return E.jsxs("div",{children:[E.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[E.jsx("span",{className:"text-gray-700",children:t}),E.jsxs("span",{className:"text-gray-900 font-medium",children:[e.toFixed(1),"g / ",r,"g (",o.toFixed(0),"%)"]})]}),E.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:E.jsx("div",{className:`h-2 rounded-full ${n} transition-all duration-300`,style:{width:`${o}%`}})})]})};function E2(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function w2(t,e){e===void 0&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var C2=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(o[a]=i[a])},t(n,r)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),A2=function(t){C2(e,t);function e(n,r){var o=this.constructor,i=t.call(this,n,r)||this;return Object.defineProperty(i,"name",{value:o.name,enumerable:!1,configurable:!0}),E2(i,o.prototype),w2(i),i}return e}(Error),S2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vt=function(t){S2(e,t);function e(n){n===void 0&&(n=void 0);var r=t.call(this,n)||this;return r.message=n,r}return e.prototype.getKind=function(){var n=this.constructor;return n.kind},e.kind="Exception",e}(A2),T2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sn=function(t){T2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Vt),I2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),se=function(t){I2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Vt),N2=function(){function t(e){if(this.binarizer=e,e===null)throw new se("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,n,r,o){var i=this.binarizer.getLuminanceSource().crop(e,n,r,o);return new t(this.binarizer.createBinarizer(i))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),R2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ut=function(t){R2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Vt),P2=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),Me=function(){function t(){}return t.arraycopy=function(e,n,r,o,i){for(;i--;)r[o++]=e[n++]},t.currentTimeMillis=function(){return Date.now()},t}(),D2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Af=function(t){D2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Vt),M2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yd=function(t){M2(e,t);function e(n,r){n===void 0&&(n=void 0),r===void 0&&(r=void 0);var o=t.call(this,r)||this;return o.index=n,o.message=r,o}return e.kind="ArrayIndexOutOfBoundsException",e}(Af),b2=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nt=function(){function t(){}return t.fill=function(e,n){for(var r=0,o=e.length;r<o;r++)e[r]=n},t.fillWithin=function(e,n,r,o){t.rangeCheck(e.length,n,r);for(var i=n;i<r;i++)e[i]=o},t.rangeCheck=function(e,n,r){if(n>r)throw new se("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new yd(n);if(r>e)throw new yd(r)},t.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},t.create=function(e,n,r){var o=Array.from({length:e});return o.map(function(i){return Array.from({length:n}).fill(r)})},t.createInt32Array=function(e,n,r){var o=Array.from({length:e});return o.map(function(i){return Int32Array.from({length:n}).fill(r)})},t.equals=function(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(var r=0,o=e.length;r<o;r++)if(e[r]!==n[r])return!1;return!0},t.hashCode=function(e){var n,r;if(e===null)return 0;var o=1;try{for(var i=b2(e),a=i.next();!a.done;a=i.next()){var s=a.value;o=31*o+s}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},t.fillUint8Array=function(e,n){for(var r=0;r!==e.length;r++)e[r]=n},t.copyOf=function(e,n){return e.slice(0,n)},t.copyOfUint8Array=function(e,n){if(e.length<=n){var r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)},t.copyOfRange=function(e,n,r){var o=r-n,i=new Int32Array(o);return Me.arraycopy(e,n,i,0,o),i},t.binarySearch=function(e,n,r){r===void 0&&(r=t.numberComparator);for(var o=0,i=e.length-1;o<=i;){var a=i+o>>1,s=r(n,e[a]);if(s>0)o=a+1;else if(s<0)i=a-1;else return a}return-o-1},t.numberComparator=function(e,n){return e-n},t}(),de=function(){function t(){}return t.numberOfTrailingZeros=function(e){var n;if(e===0)return 32;var r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,n){return Math.trunc(e/n)},t.parseInt=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),ft=function(){function t(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=t.makeArray(e):this.bits=n)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var n=t.makeArray(e);Me.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,o=Math.floor(e/32),i=r[o];i&=~((1<<(e&31))-1);for(var a=r.length;i===0;){if(++o===a)return n;i=r[o]}var s=o*32+de.numberOfTrailingZeros(i);return s>n?n:s},t.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,o=Math.floor(e/32),i=~r[o];i&=~((1<<(e&31))-1);for(var a=r.length;i===0;){if(++o===a)return n;i=~r[o]}var s=o*32+de.numberOfTrailingZeros(i);return s>n?n:s},t.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},t.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new se;if(n!==e){n--;for(var r=Math.floor(e/32),o=Math.floor(n/32),i=this.bits,a=r;a<=o;a++){var s=a>r?0:e&31,l=a<o?31:n&31,u=(2<<l)-(1<<s);i[a]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,r=0;r<e;r++)n[r]=0},t.prototype.isRange=function(e,n,r){if(n<e||e<0||n>this.size)throw new se;if(n===e)return!0;n--;for(var o=Math.floor(e/32),i=Math.floor(n/32),a=this.bits,s=o;s<=i;s++){var l=s>o?0:e&31,u=s<i?31:n&31,f=(2<<u)-(1<<l)&4294967295;if((a[s]&f)!==(r?f:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,n){if(n<0||n>32)throw new se("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)},t.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var r=0;r<n;r++)this.appendBit(e.get(r))},t.prototype.xor=function(e){if(this.size!==e.size)throw new se("Sizes don't match");for(var n=this.bits,r=0,o=n.length;r<o;r++)n[r]^=e.bits[r]},t.prototype.toBytes=function(e,n,r,o){for(var i=0;i<o;i++){for(var a=0,s=0;s<8;s++)this.get(e)&&(a|=1<<7-s),e++;n[r+i]=a}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,o=this.bits,i=0;i<r;i++){var a=o[i];a=a>>1&1431655765|(a&1431655765)<<1,a=a>>2&858993459|(a&858993459)<<2,a=a>>4&252645135|(a&252645135)<<4,a=a>>8&16711935|(a&16711935)<<8,a=a>>16&65535|(a&65535)<<16,e[n-i]=a}if(this.size!==r*32){for(var s=r*32-this.size,l=e[0]>>>s,i=1;i<r;i++){var u=e[i];l|=u<<32-s,e[i-1]=l,l=u>>>s}e[r-1]=l}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.size===n.size&&nt.equals(this.bits,n.bits)},t.prototype.hashCode=function(){return 31*this.size+nt.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",n=0,r=this.size;n<r;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],n=0,r=this.size;n<r;n++)e.push(this.get(n));return e},t}(),ou;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ASSUME_GS1=7]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ou||(ou={}));const Ge=ou;var O2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Z=function(t){O2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Vt),k2=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ie;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(Ie||(Ie={}));var tt=function(){function t(e,n,r){for(var o,i,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=a,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(r,this);for(var l=this.values,u=0,f=l.length;u!==f;u++){var d=l[u];t.VALUES_TO_ECI.set(d,this)}try{for(var p=k2(a),g=p.next();!g.done;g=p.next()){var v=g.value;t.NAME_TO_ECI.set(v,this)}}catch(y){o={error:y}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new Z("incorect value");var n=t.VALUES_TO_ECI.get(e);if(n===void 0)throw new Z("incorect value");return n},t.getCharacterSetECIByName=function(e){var n=t.NAME_TO_ECI.get(e);if(n===void 0)throw new Z("incorect value");return n},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.getName()===n.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Ie.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Ie.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Ie.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Ie.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Ie.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Ie.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Ie.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Ie.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Ie.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Ie.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Ie.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Ie.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Ie.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Ie.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Ie.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Ie.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Ie.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Ie.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Ie.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Ie.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Ie.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Ie.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Ie.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Ie.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Ie.Big5,28,"Big5"),t.GB18030=new t(Ie.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Ie.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),L2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ga=function(t){L2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Vt),en=function(){function t(){}return t.decode=function(e,n){var r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,n){var r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof tt?e:tt.getCharacterSetECIByName(e)},t.decodeFallback=function(e,n){var r=this.encodingCharacterSet(n);if(t.isDecodeFallbackSupported(r)){for(var o="",i=0,a=e.length;i<a;i++){var s=e[i].toString(16);s.length<2&&(s="0"+s),o+="%"+s}return decodeURIComponent(o)}if(r.equals(tt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new ga("Encoding "+this.encodingName(n)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(tt.UTF8)||e.equals(tt.ISO8859_1)||e.equals(tt.ASCII)},t.encodeFallback=function(e){for(var n=btoa(unescape(encodeURIComponent(e))),r=n.split(""),o=[],i=0;i<r.length;i++)o.push(r[i].charCodeAt(0));return new Uint8Array(o)},t}(),pe=function(){function t(){}return t.castAsNonUtf8Char=function(e,n){n===void 0&&(n=null);var r=n?n.getName():this.ISO88591;return en.decode(new Uint8Array([e]),r)},t.guessEncoding=function(e,n){if(n!=null&&n.get(Ge.CHARACTER_SET)!==void 0)return n.get(Ge.CHARACTER_SET).toString();for(var r=e.length,o=!0,i=!0,a=!0,s=0,l=0,u=0,f=0,d=0,p=0,g=0,v=0,y=0,w=0,x=0,m=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,_=0;_<r&&(o||i||a);_++){var S=e[_]&255;a&&(s>0?S&128?s--:a=!1:S&128&&(S&64?(s++,S&32?(s++,S&16?(s++,S&8?a=!1:f++):u++):l++):a=!1)),o&&(S>127&&S<160?o=!1:S>159&&(S<192||S===215||S===247)&&x++),i&&(d>0?S<64||S===127||S>252?i=!1:d--:S===128||S===160||S>239?i=!1:S>160&&S<224?(p++,v=0,g++,g>y&&(y=g)):S>127?(d++,g=0,v++,v>w&&(w=v)):(g=0,v=0))}return a&&s>0&&(a=!1),i&&d>0&&(i=!1),a&&(m||l+u+f>0)?t.UTF8:i&&(t.ASSUME_SHIFT_JIS||y>=3||w>=3)?t.SHIFT_JIS:o&&i?y===2&&p===2||x*10>=r?t.SHIFT_JIS:t.ISO88591:o?t.ISO88591:i?t.SHIFT_JIS:a?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=-1;function i(s,l,u,f,d,p){if(s==="%%")return"%";if(n[++o]!==void 0){s=f?parseInt(f.substr(1)):void 0;var g=d?parseInt(d.substr(1)):void 0,v;switch(p){case"s":v=n[o];break;case"c":v=n[o][0];break;case"f":v=parseFloat(n[o]).toFixed(s);break;case"p":v=parseFloat(n[o]).toPrecision(s);break;case"e":v=parseFloat(n[o]).toExponential(s);break;case"x":v=parseInt(n[o]).toString(g||16);break;case"d":v=parseFloat(parseInt(n[o],g||10).toPrecision(s)).toFixed(0);break}v=typeof v=="object"?JSON.stringify(v):(+v).toString(g);for(var y=parseInt(u),w=u&&u[0]+""=="0"?"0":" ";v.length<y;)v=l!==void 0?v+w:w+v;return v}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},t.getBytes=function(e,n){return en.encode(e,n)},t.getCharCode=function(e,n){return n===void 0&&(n=0),e.charCodeAt(n)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=tt.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=tt.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=tt.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),fe=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=pe.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,n,r){for(var o=n;n<n+r;o++)this.append(e[o]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},t.prototype.substring=function(e,n){return this.value.substring(e,n)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},t}(),An=function(){function t(e,n,r,o){if(this.width=e,this.height=n,this.rowSize=r,this.bits=o,n==null&&(n=e),this.height=n,e<1||n<1)throw new se("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var n=e.length,r=e[0].length,o=new t(r,n),i=0;i<n;i++)for(var a=e[i],s=0;s<r;s++)a[s]&&o.set(s,i);return o},t.parseFromString=function(e,n,r){if(e===null)throw new se("stringRepresentation cannot be null");for(var o=new Array(e.length),i=0,a=0,s=-1,l=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(i>a){if(s===-1)s=i-a;else if(i-a!==s)throw new se("row lengths do not match");a=i,l++}u++}else if(e.substring(u,u+n.length)===n)u+=n.length,o[i]=!0,i++;else if(e.substring(u,u+r.length)===r)u+=r.length,o[i]=!1,i++;else throw new se("illegal character encountered: "+e.substring(u));if(i>a){if(s===-1)s=i-a;else if(i-a!==s)throw new se("row lengths do not match");l++}for(var f=new t(s,l),d=0;d<i;d++)o[d]&&f.set(Math.floor(d%s),Math.floor(d/s));return f},t.prototype.get=function(e,n){var r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},t.prototype.set=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new se("input matrix dimensions do not match");for(var n=new ft(Math.floor(this.width/32)+1),r=this.rowSize,o=this.bits,i=0,a=this.height;i<a;i++)for(var s=i*r,l=e.getRow(i,n).getBitArray(),u=0;u<r;u++)o[s+u]^=l[u]},t.prototype.clear=function(){for(var e=this.bits,n=e.length,r=0;r<n;r++)e[r]=0},t.prototype.setRegion=function(e,n,r,o){if(n<0||e<0)throw new se("Left and top must be nonnegative");if(o<1||r<1)throw new se("Height and width must be at least 1");var i=e+r,a=n+o;if(a>this.height||i>this.width)throw new se("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,u=n;u<a;u++)for(var f=u*s,d=e;d<i;d++)l[f+Math.floor(d/32)]|=1<<(d&31)&4294967295},t.prototype.getRow=function(e,n){n==null||n.getSize()<this.width?n=new ft(this.width):n.clear();for(var r=this.rowSize,o=this.bits,i=e*r,a=0;a<r;a++)n.setBulk(a*32,o[i+a]);return n},t.prototype.setRow=function(e,n){Me.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),r=new ft(e),o=new ft(e),i=0,a=Math.floor((n+1)/2);i<a;i++)r=this.getRow(i,r),o=this.getRow(n-1-i,o),r.reverse(),o.reverse(),this.setRow(i,o),this.setRow(n-1-i,r)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,n=this.height,r=this.rowSize,o=this.bits,i=e,a=n,s=-1,l=-1,u=0;u<n;u++)for(var f=0;f<r;f++){var d=o[u*r+f];if(d!==0){if(u<a&&(a=u),u>l&&(l=u),f*32<i){for(var p=0;!(d<<31-p&4294967295);)p++;f*32+p<i&&(i=f*32+p)}if(f*32+31>s){for(var p=31;!(d>>>p);)p--;f*32+p>s&&(s=f*32+p)}}}return s<i||l<a?null:Int32Array.from([i,a,s-i+1,l-a+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,r=0;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;for(var o=r/e,i=r%e*32,a=n[r],s=0;!(a<<31-s&4294967295);)s++;return i+=s,Int32Array.from([i,o])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,r=n.length-1;r>=0&&n[r]===0;)r--;if(r<0)return null;for(var o=Math.floor(r/e),i=Math.floor(r%e)*32,a=n[r],s=31;!(a>>>s);)s--;return i+=s,Int32Array.from([i,o])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&nt.equals(this.bits,n.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+nt.hashCode(this.bits),e},t.prototype.toString=function(e,n,r){return e===void 0&&(e="X "),n===void 0&&(n="  "),r===void 0&&(r=`
`),this.buildToString(e,n,r)},t.prototype.buildToString=function(e,n,r){for(var o=new fe,i=0,a=this.height;i<a;i++){for(var s=0,l=this.width;s<l;s++)o.append(this.get(s,i)?e:n);o.append(r)}return o.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),F2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),V=function(t){F2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Vt),B2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),U2=function(t){B2(e,t);function e(n){var r=t.call(this,n)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(n,r){var o=this.getLuminanceSource(),i=o.getWidth();r==null||r.getSize()<i?r=new ft(i):r.clear(),this.initArrays(i);for(var a=o.getRow(n,this.luminances),s=this.buckets,l=0;l<i;l++)s[(a[l]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(s);if(i<3)for(var l=0;l<i;l++)(a[l]&255)<u&&r.set(l);else for(var f=a[0]&255,d=a[1]&255,l=1;l<i-1;l++){var p=a[l+1]&255;(d*4-f-p)/2<u&&r.set(l),f=d,d=p}return r},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),r=n.getWidth(),o=n.getHeight(),i=new An(r,o);this.initArrays(r);for(var a=this.buckets,s=1;s<5;s++)for(var l=Math.floor(o*s/5),u=n.getRow(l,this.luminances),f=Math.floor(r*4/5),d=Math.floor(r/5);d<f;d++){var p=u[d]&255;a[p>>e.LUMINANCE_SHIFT]++}for(var g=e.estimateBlackPoint(a),v=n.getMatrix(),s=0;s<o;s++)for(var y=s*r,d=0;d<r;d++){var p=v[y+d]&255;p<g&&i.set(d,s)}return i},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var r=this.buckets,o=0;o<e.LUMINANCE_BUCKETS;o++)r[o]=0},e.estimateBlackPoint=function(n){for(var r=n.length,o=0,i=0,a=0,s=0;s<r;s++)n[s]>a&&(i=s,a=n[s]),n[s]>o&&(o=n[s]);for(var l=0,u=0,s=0;s<r;s++){var f=s-i,d=n[s]*f*f;d>u&&(l=s,u=d)}if(i>l){var p=i;i=l,l=p}if(l-i<=r/16)throw new V;for(var g=l-1,v=-1,s=l-1;s>i;s--){var y=s-i,d=y*y*(l-s)*(o-n[s]);d>v&&(g=s,v=d)}return g<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(P2),V2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),G2=function(t){V2(e,t);function e(n){var r=t.call(this,n)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),o=n.getHeight();if(r>=e.MINIMUM_DIMENSION&&o>=e.MINIMUM_DIMENSION){var i=n.getMatrix(),a=r>>e.BLOCK_SIZE_POWER;r&e.BLOCK_SIZE_MASK&&a++;var s=o>>e.BLOCK_SIZE_POWER;o&e.BLOCK_SIZE_MASK&&s++;var l=e.calculateBlackPoints(i,a,s,r,o),u=new An(r,o);e.calculateThresholdForBlock(i,a,s,r,o,l,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,r,o,i,a,s,l){for(var u=a-e.BLOCK_SIZE,f=i-e.BLOCK_SIZE,d=0;d<o;d++){var p=d<<e.BLOCK_SIZE_POWER;p>u&&(p=u);for(var g=e.cap(d,2,o-3),v=0;v<r;v++){var y=v<<e.BLOCK_SIZE_POWER;y>f&&(y=f);for(var w=e.cap(v,2,r-3),x=0,m=-2;m<=2;m++){var _=s[g+m];x+=_[w-2]+_[w-1]+_[w]+_[w+1]+_[w+2]}var S=x/25;e.thresholdBlock(n,y,p,S,i,l)}}},e.cap=function(n,r,o){return n<r?r:n>o?o:n},e.thresholdBlock=function(n,r,o,i,a,s){for(var l=0,u=o*a+r;l<e.BLOCK_SIZE;l++,u+=a)for(var f=0;f<e.BLOCK_SIZE;f++)(n[u+f]&255)<=i&&s.set(r+f,o+l)},e.calculateBlackPoints=function(n,r,o,i,a){for(var s=a-e.BLOCK_SIZE,l=i-e.BLOCK_SIZE,u=new Array(o),f=0;f<o;f++){u[f]=new Int32Array(r);var d=f<<e.BLOCK_SIZE_POWER;d>s&&(d=s);for(var p=0;p<r;p++){var g=p<<e.BLOCK_SIZE_POWER;g>l&&(g=l);for(var v=0,y=255,w=0,x=0,m=d*i+g;x<e.BLOCK_SIZE;x++,m+=i){for(var _=0;_<e.BLOCK_SIZE;_++){var S=n[m+_]&255;v+=S,S<y&&(y=S),S>w&&(w=S)}if(w-y>e.MIN_DYNAMIC_RANGE)for(x++,m+=i;x<e.BLOCK_SIZE;x++,m+=i)for(var _=0;_<e.BLOCK_SIZE;_++)v+=n[m+_]&255}var A=v>>e.BLOCK_SIZE_POWER*2;if(w-y<=e.MIN_DYNAMIC_RANGE&&(A=y/2,f>0&&p>0)){var R=(u[f-1][p]+2*u[f][p-1]+u[f-1][p-1])/4;y<R&&(A=R)}u[f][p]=A}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(U2),ds=function(){function t(e,n){this.width=e,this.height=n}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,n,r,o){throw new ga("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new ga("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new ga("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new fe,r=0;r<this.height;r++){for(var o=this.getRow(r,e),i=0;i<this.width;i++){var a=o[i]&255,s=void 0;a<64?s="#":a<128?s="+":a<192?s=".":s=" ",n.append(s)}n.append(`
`)}return n.toString()},t}(),H2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sf=function(t){H2(e,t);function e(n){var r=t.call(this,n.getWidth(),n.getHeight())||this;return r.delegate=n,r}return e.prototype.getRow=function(n,r){for(var o=this.delegate.getRow(n,r),i=this.getWidth(),a=0;a<i;a++)o[a]=255-(o[a]&255);return o},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(r),i=0;i<r;i++)o[i]=255-(n[i]&255);return o},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,r,o,i){return new e(this.delegate.crop(n,r,o,i))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(ds),z2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),W2=function(t){z2(e,t);function e(n){var r=t.call(this,n.width,n.height)||this;return r.canvas=n,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(n),r}return e.makeBufferFromCanvasImageData=function(n){var r=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(r.data,n.width,n.height)},e.toGrayscaleBuffer=function(n,r,o){var i=new Uint8ClampedArray(r*o);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX)for(var a=0,s=0,l=n.length;a<l;a+=4,s++){var u=void 0,f=n[a+3];if(f===0)u=255;else{var d=n[a],p=n[a+1],g=n[a+2];u=306*d+601*p+117*g+512>>10}i[s]=u}else for(var a=0,s=0,v=n.length;a<v;a+=4,s++){var u=void 0,f=n[a+3];if(f===0)u=255;else{var d=n[a],p=n[a+1],g=n[a+2];u=306*d+601*p+117*g+512>>10}i[s]=255-u}return i},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new se("Requested row is outside the image: "+n);var o=this.getWidth(),i=n*o;return r===null?r=this.buffer.slice(i,i+o):(r.length<o&&(r=new Uint8ClampedArray(o)),r.set(this.buffer.slice(i,i+o))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,o,i){return t.prototype.crop.call(this,n,r,o,i),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement(),o=r.getContext("2d"),i=n*e.DEGREE_TO_RADIANS,a=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*s),u=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*s);return r.width=l,r.height=u,o.translate(l/2,u/2),o.rotate(i),o.drawImage(this.canvas,a/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new Sf(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(ds),q2=function(){function t(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Tt=globalThis&&globalThis.__awaiter||function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(f){try{u(r.next(f))}catch(d){a(d)}}function l(f){try{u(r.throw(f))}catch(d){a(d)}}function u(f){f.done?i(f.value):o(f.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},It=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(f){return l([u,f])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(f){u=[6,f],o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},$2=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Co=function(){function t(e,n,r){n===void 0&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Tt(this,void 0,void 0,function(){var e,n,r,o,i,a,s,l,u,f,d,p;return It(this,function(g){switch(g.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=g.sent(),n=[];try{for(r=$2(e),o=r.next();!o.done;o=r.next())i=o.value,a=i.kind==="video"?"videoinput":i.kind,a==="videoinput"&&(s=i.deviceId||i.id,l=i.label||"Video device "+(n.length+1),u=i.groupId,f={deviceId:s,label:l,kind:a,groupId:u},n.push(f))}catch(v){d={error:v}}finally{try{o&&!o.done&&(p=r.return)&&p.call(r)}finally{if(d)throw d.error}}return[2,n]}})})},t.prototype.getVideoInputDevices=function(){return Tt(this,void 0,void 0,function(){var e;return It(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=n.sent(),[2,e.map(function(r){return new q2(r.deviceId,r.label)})]}})})},t.prototype.findDeviceById=function(e){return Tt(this,void 0,void 0,function(){var n;return It(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(o){return o.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,n){return Tt(this,void 0,void 0,function(){return It(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return Tt(this,void 0,void 0,function(){var r,o;return It(this,function(i){switch(i.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},o={video:r},[4,this.decodeOnceFromConstraints(o,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return Tt(this,void 0,void 0,function(){var r;return It(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=o.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,o.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return Tt(this,void 0,void 0,function(){var r,o;return It(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return r=i.sent(),[4,this.decodeOnce(r)];case 2:return o=i.sent(),[2,o]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,r){return Tt(this,void 0,void 0,function(){return It(this,function(o){switch(o.label){case 0:return[4,this.decodeFromVideoDevice(e,n,r)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return Tt(this,void 0,void 0,function(){var o,i;return It(this,function(a){switch(a.label){case 0:return e?o={deviceId:{exact:e}}:o={facingMode:"environment"},i={video:o},[4,this.decodeFromConstraints(i,n,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return Tt(this,void 0,void 0,function(){var o;return It(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return o=i.sent(),[4,this.decodeFromStream(o,n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeFromStream=function(e,n,r){return Tt(this,void 0,void 0,function(){var o;return It(this,function(i){switch(i.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return o=i.sent(),[4,this.decodeContinuously(o,r)];case 2:return[2,i.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,n){return Tt(this,void 0,void 0,function(){var r;return It(this,function(o){switch(o.label){case 0:return r=this.prepareVideoElement(n),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return o.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(r,o){return n.playVideoOnLoad(e,function(){return r()})})},t.prototype.playVideoOnLoad=function(e,n){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Tt(this,void 0,void 0,function(){return It(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new sn("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new sn("element with id '"+e+"' must be an "+n+" element");return r},t.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new sn("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new sn("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,n,r){if(e===void 0&&n===void 0)throw new sn("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new sn("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);this.imageElement=n;var r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r},t.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},t.prototype.decodeFromVideoElementContinuously=function(e,n){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new sn("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new sn("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var r=this._decodeOnLoadImage(n);return n.src=e,r},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new sn("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r},t.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new sn("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(r,n);return r.src=e,o},t.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(r,o){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(r,o)},e.addEventListener("load",n.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Tt(this,void 0,void 0,function(){return It(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,n){return Tt(this,void 0,void 0,function(){return It(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,n),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},t.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.prototype.decodeOnce=function(e,n,r){var o=this;n===void 0&&(n=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var i=function(a,s){if(o._stopAsyncDecode){s(new V("Video stream has ended before any code could be detected.")),o._stopAsyncDecode=void 0;return}try{var l=o.decode(e);a(l)}catch(p){var u=n&&p instanceof V,f=p instanceof ut||p instanceof Z,d=f&&r;if(u||d)return setTimeout(i,o._timeBetweenDecodingAttempts,a,s);s(p)}};return new Promise(function(a,s){return i(a,s)})},t.prototype.decodeContinuously=function(e,n){var r=this;this._stopContinuousDecode=!1;var o=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var i=r.decode(e);n(i,null),setTimeout(o,r.timeBetweenScansMillis)}catch(l){n(null,l);var a=l instanceof ut||l instanceof Z,s=l instanceof V;(a||s)&&setTimeout(o,r._timeBetweenDecodingAttempts)}};o()},t.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e),e instanceof HTMLVideoElement?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),r=new W2(n),o=new G2(r);return new N2(o)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),r=void 0;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.drawImageOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var n=document.createElement("canvas"),r,o;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,o=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,o=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=o+"px",n.width=r,n.height=o,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),St=function(){function t(e,n,r,o,i,a){r===void 0&&(r=n==null?0:8*n.length),a===void 0&&(a=Me.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=o,this.format=i,this.timestamp=a,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=o,this.format=i,this.resultMetadata=null,a==null?this.timestamp=Me.currentTimeMillis():this.timestamp=a}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(n.length+e.length);Me.arraycopy(n,0,r,0,n.length),Me.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),iu;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(iu||(iu={}));const ae=iu;var au;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(au||(au={}));const gt=au;var hs=function(){function t(e,n,r,o,i,a){i===void 0&&(i=-1),a===void 0&&(a=-1),this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=o,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=a,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),Xo=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new se;return this.logTable[e]},t.addOrSubtract=function(e,n){return e^n},t}(),sr=function(){function t(e,n){if(n.length===0)throw new se;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var o=1;o<r&&n[o]===0;)o++;o===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-o),Me.arraycopy(n,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var n=this.coefficients,r;if(e===1){r=0;for(var o=0,i=n.length;o!==i;o++){var a=n[o];r=Xo.addOrSubtract(r,a)}return r}r=n[0];for(var s=n.length,l=this.field,o=1;o<s;o++)r=Xo.addOrSubtract(l.multiply(e,r),n[o]);return r},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new se("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var o=n;n=r,r=o}var i=new Int32Array(r.length),a=r.length-n.length;Me.arraycopy(r,0,i,0,a);for(var s=a;s<r.length;s++)i[s]=Xo.addOrSubtract(n[s-a],r[s]);return new t(this.field,i)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new se("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,o=e.coefficients,i=o.length,a=new Int32Array(r+i-1),s=this.field,l=0;l<r;l++)for(var u=n[l],f=0;f<i;f++)a[l+f]=Xo.addOrSubtract(a[l+f],s.multiply(u,o[f]));return new t(s,a)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var n=this.coefficients.length,r=this.field,o=new Int32Array(n),i=this.coefficients,a=0;a<n;a++)o[a]=r.multiply(i[a],e);return new t(r,o)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new se;if(n===0)return this.field.getZero();for(var r=this.coefficients,o=r.length,i=new Int32Array(o+e),a=this.field,s=0;s<o;s++)i[s]=a.multiply(r[s],n);return new t(a,i)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new se("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new se("Divide by 0");for(var n=this.field,r=n.getZero(),o=this,i=e.getCoefficient(e.getDegree()),a=n.inverse(i);o.getDegree()>=e.getDegree()&&!o.isZero();){var s=o.getDegree()-e.getDegree(),l=n.multiply(o.getCoefficient(o.getDegree()),a),u=e.multiplyByMonomial(s,l),f=n.buildMonomial(s,l);r=r.addOrSubtract(f),o=o.addOrSubtract(u)}return[r,o]},t.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){var o=this.field.log(r);o===0?e+="1":o===1?e+="a":(e+="a^",e+=o)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e},t}(),Y2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jp=function(t){Y2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Vt),X2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kt=function(t){X2(e,t);function e(n,r,o){var i=t.call(this)||this;i.primitive=n,i.size=r,i.generatorBase=o;for(var a=new Int32Array(r),s=1,l=0;l<r;l++)a[l]=s,s*=2,s>=r&&(s^=n,s&=r-1);i.expTable=a;for(var u=new Int32Array(r),l=0;l<r-1;l++)u[a[l]]=l;return i.logTable=u,i.zero=new sr(i,Int32Array.from([0])),i.one=new sr(i,Int32Array.from([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new se;if(r===0)return this.zero;var o=new Int32Array(n+1);return o[0]=r,new sr(this,o)},e.prototype.inverse=function(n){if(n===0)throw new Jp;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+de.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Xo),K2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zi=function(t){K2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Vt),J2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pi=function(t){J2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Vt),ps=function(){function t(e){this.field=e}return t.prototype.decode=function(e,n){for(var r=this.field,o=new sr(r,e),i=new Int32Array(n),a=!0,s=0;s<n;s++){var l=o.evaluateAt(r.exp(s+r.getGeneratorBase()));i[i.length-1-s]=l,l!==0&&(a=!1)}if(!a)for(var u=new sr(r,i),f=this.runEuclideanAlgorithm(r.buildMonomial(n,1),u,n),d=f[0],p=f[1],g=this.findErrorLocations(d),v=this.findErrorMagnitudes(p,g),s=0;s<g.length;s++){var y=e.length-1-r.log(g[s]);if(y<0)throw new Zi("Bad error location");e[y]=kt.addOrSubtract(e[y],v[s])}},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var o=e;e=n,n=o}for(var i=this.field,a=e,s=n,l=i.getZero(),u=i.getOne();s.getDegree()>=(r/2|0);){var f=a,d=l;if(a=s,l=u,a.isZero())throw new Zi("r_{i-1} was zero");s=f;for(var p=i.getZero(),g=a.getCoefficient(a.getDegree()),v=i.inverse(g);s.getDegree()>=a.getDegree()&&!s.isZero();){var y=s.getDegree()-a.getDegree(),w=i.multiply(s.getCoefficient(s.getDegree()),v);p=p.addOrSubtract(i.buildMonomial(y,w)),s=s.addOrSubtract(a.multiplyByMonomial(y,w))}if(u=p.multiply(l).addOrSubtract(d),s.getDegree()>=a.getDegree())throw new Pi("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new Zi("sigmaTilde(0) was zero");var m=i.inverse(x),_=u.multiplyScalar(m),S=s.multiplyScalar(m);return[_,S]},t.prototype.findErrorLocations=function(e){var n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(n),o=0,i=this.field,a=1;a<i.getSize()&&o<n;a++)e.evaluateAt(a)===0&&(r[o]=i.inverse(a),o++);if(o!==n)throw new Zi("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(e,n){for(var r=n.length,o=new Int32Array(r),i=this.field,a=0;a<r;a++){for(var s=i.inverse(n[a]),l=1,u=0;u<r;u++)if(a!==u){var f=i.multiply(n[u],s),d=f&1?f&-2:f|1;l=i.multiply(l,d)}o[a]=i.multiply(e.evaluateAt(s),i.inverse(l)),i.getGeneratorBase()!==0&&(o[a]=i.multiply(o[a],s))}return o},t}(),dt;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(dt||(dt={}));var xd=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),r=this.extractBits(n),o=this.correctBits(r),i=t.convertBoolArrayToByteArray(o),a=t.getEncodedData(o),s=new hs(i,a,null,null);return s.setNumBits(o.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var n=e.length,r=dt.UPPER,o=dt.UPPER,i="",a=0;a<n;)if(o===dt.BINARY){if(n-a<5)break;var s=t.readCode(e,a,5);if(a+=5,s===0){if(n-a<11)break;s=t.readCode(e,a,11)+31,a+=11}for(var l=0;l<s;l++){if(n-a<8){a=n;break}var u=t.readCode(e,a,8);i+=pe.castAsNonUtf8Char(u),a+=8}o=r}else{var f=o===dt.DIGIT?4:5;if(n-a<f)break;var u=t.readCode(e,a,f);a+=f;var d=t.getCharacter(o,u);d.startsWith("CTRL_")?(r=o,o=t.getTable(d.charAt(5)),d.charAt(6)==="L"&&(r=o)):(i+=d,o=r)}return i},t.getTable=function(e){switch(e){case"L":return dt.LOWER;case"P":return dt.PUNCT;case"M":return dt.MIXED;case"D":return dt.DIGIT;case"B":return dt.BINARY;case"U":default:return dt.UPPER}},t.getCharacter=function(e,n){switch(e){case dt.UPPER:return t.UPPER_TABLE[n];case dt.LOWER:return t.LOWER_TABLE[n];case dt.MIXED:return t.MIXED_TABLE[n];case dt.PUNCT:return t.PUNCT_TABLE[n];case dt.DIGIT:return t.DIGIT_TABLE[n];default:throw new Pi("Bad table")}},t.prototype.correctBits=function(e){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=kt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=kt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=kt.AZTEC_DATA_10):(r=12,n=kt.AZTEC_DATA_12);var o=this.ddata.getNbDatablocks(),i=e.length/r;if(i<o)throw new Z;for(var a=e.length%r,s=new Int32Array(i),l=0;l<i;l++,a+=r)s[l]=t.readCode(e,a,r);try{var u=new ps(n);u.decode(s,i-o)}catch(w){throw new Z(w)}for(var f=(1<<r)-1,d=0,l=0;l<o;l++){var p=s[l];if(p===0||p===f)throw new Z;(p===1||p===f-1)&&d++}for(var g=new Array(o*r-d),v=0,l=0;l<o;l++){var p=s[l];if(p===1||p===f-1)g.fill(p>1,v,v+r-1),v+=r-1;else for(var y=r-1;y>=0;--y)g[v++]=(p&1<<y)!==0}return g},t.prototype.extractBits=function(e){var n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),o=(n?11:14)+r*4,i=new Int32Array(o),a=new Array(this.totalBitsInLayer(r,n));if(n)for(var s=0;s<i.length;s++)i[s]=s;else for(var l=o+1+2*de.truncDivision(de.truncDivision(o,2)-1,15),u=o/2,f=de.truncDivision(l,2),s=0;s<u;s++){var d=s+de.truncDivision(s,15);i[u-s-1]=f-d-1,i[u+s]=f+d+1}for(var s=0,p=0;s<r;s++){for(var g=(r-s)*4+(n?9:12),v=s*2,y=o-1-v,w=0;w<g;w++)for(var x=w*2,m=0;m<2;m++)a[p+x+m]=e.get(i[v+m],i[v+w]),a[p+2*g+x+m]=e.get(i[v+w],i[y-m]),a[p+4*g+x+m]=e.get(i[y-m],i[y-w]),a[p+6*g+x+m]=e.get(i[y-w],i[v+m]);p+=g*8}return a},t.readCode=function(e,n,r){for(var o=0,i=n;i<n+r;i++)o<<=1,e[i]&&(o|=1);return o},t.readByte=function(e,n){var r=e.length-n;return r>=8?t.readCode(e,n,8):t.readCode(e,n,r)<<8-r},t.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),r=0;r<n.length;r++)n[r]=t.readByte(e,8*r);return n},t.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),me=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,n,r,o){var i=e-r,a=n-o;return Math.sqrt(i*i+a*a)},t.sum=function(e){for(var n=0,r=0,o=e.length;r!==o;r++){var i=e[r];n+=i}return n},t}(),su=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),ne=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var n=e;return this.x===n.x&&this.y===n.y}return!1},t.prototype.hashCode=function(){return 31*su.floatToIntBits(this.x)+su.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),o=this.distance(e[0],e[2]),i,a,s;if(r>=n&&r>=o?(a=e[0],i=e[1],s=e[2]):o>=r&&o>=n?(a=e[1],i=e[0],s=e[2]):(a=e[2],i=e[0],s=e[1]),this.crossProductZ(i,a,s)<0){var l=i;i=s,s=l}e[0]=i,e[1]=a,e[2]=s},t.distance=function(e,n){return me.distance(e.x,e.y,n.x,n.y)},t.crossProductZ=function(e,n,r){var o=n.x,i=n.y;return(r.x-o)*(e.y-i)-(r.y-i)*(e.x-o)},t}(),Tf=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),Z2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q2=function(t){Z2(e,t);function e(n,r,o,i,a){var s=t.call(this,n,r)||this;return s.compact=o,s.nbDatablocks=i,s.nbLayers=a,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(Tf),lu=function(){function t(e,n,r,o){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=t.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),o==null&&(o=e.getHeight()/2|0);var i=n/2|0;if(this.leftInit=r-i,this.rightInit=r+i,this.upInit=o-i,this.downInit=o+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}return t.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,r=this.upInit,o=this.downInit,i=!1,a=!0,s=!1,l=!1,u=!1,f=!1,d=!1,p=this.width,g=this.height;a;){a=!1;for(var v=!0;(v||!l)&&n<p;)v=this.containsBlackPoint(r,o,n,!1),v?(n++,a=!0,l=!0):l||n++;if(n>=p){i=!0;break}for(var y=!0;(y||!u)&&o<g;)y=this.containsBlackPoint(e,n,o,!0),y?(o++,a=!0,u=!0):u||o++;if(o>=g){i=!0;break}for(var w=!0;(w||!f)&&e>=0;)w=this.containsBlackPoint(r,o,e,!1),w?(e--,a=!0,f=!0):f||e--;if(e<0){i=!0;break}for(var x=!0;(x||!d)&&r>=0;)x=this.containsBlackPoint(e,n,r,!0),x?(r--,a=!0,d=!0):d||r--;if(r<0){i=!0;break}a&&(s=!0)}if(!i&&s){for(var m=n-e,_=null,S=1;_===null&&S<m;S++)_=this.getBlackPointOnSegment(e,o-S,e+S,o);if(_==null)throw new V;for(var A=null,S=1;A===null&&S<m;S++)A=this.getBlackPointOnSegment(e,r+S,e+S,r);if(A==null)throw new V;for(var R=null,S=1;R===null&&S<m;S++)R=this.getBlackPointOnSegment(n,r+S,n-S,r);if(R==null)throw new V;for(var N=null,S=1;N===null&&S<m;S++)N=this.getBlackPointOnSegment(n,o-S,n-S,o);if(N==null)throw new V;return this.centerEdges(N,_,R,A)}else throw new V},t.prototype.getBlackPointOnSegment=function(e,n,r,o){for(var i=me.round(me.distance(e,n,r,o)),a=(r-e)/i,s=(o-n)/i,l=this.image,u=0;u<i;u++){var f=me.round(e+u*a),d=me.round(n+u*s);if(l.get(f,d))return new ne(f,d)}return null},t.prototype.centerEdges=function(e,n,r,o){var i=e.getX(),a=e.getY(),s=n.getX(),l=n.getY(),u=r.getX(),f=r.getY(),d=o.getX(),p=o.getY(),g=t.CORR;return i<this.width/2?[new ne(d-g,p+g),new ne(s+g,l+g),new ne(u-g,f-g),new ne(i+g,a-g)]:[new ne(d+g,p+g),new ne(s+g,l-g),new ne(u-g,f+g),new ne(i-g,a-g)]},t.prototype.containsBlackPoint=function(e,n,r,o){var i=this.image;if(o){for(var a=e;a<=n;a++)if(i.get(a,r))return!0}else for(var s=e;s<=n;s++)if(i.get(r,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),_d=function(){function t(){}return t.checkAndNudgePoints=function(e,n){for(var r=e.getWidth(),o=e.getHeight(),i=!0,a=0;a<n.length&&i;a+=2){var s=Math.floor(n[a]),l=Math.floor(n[a+1]);if(s<-1||s>r||l<-1||l>o)throw new V;i=!1,s===-1?(n[a]=0,i=!0):s===r&&(n[a]=r-1,i=!0),l===-1?(n[a+1]=0,i=!0):l===o&&(n[a+1]=o-1,i=!0)}i=!0;for(var a=n.length-2;a>=0&&i;a-=2){var s=Math.floor(n[a]),l=Math.floor(n[a+1]);if(s<-1||s>r||l<-1||l>o)throw new V;i=!1,s===-1?(n[a]=0,i=!0):s===r&&(n[a]=r-1,i=!0),l===-1?(n[a+1]=0,i=!0):l===o&&(n[a+1]=o-1,i=!0)}},t}(),Zp=function(){function t(e,n,r,o,i,a,s,l,u){this.a11=e,this.a21=n,this.a31=r,this.a12=o,this.a22=i,this.a32=a,this.a13=s,this.a23=l,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,n,r,o,i,a,s,l,u,f,d,p,g,v,y,w){var x=t.quadrilateralToSquare(e,n,r,o,i,a,s,l),m=t.squareToQuadrilateral(u,f,d,p,g,v,y,w);return m.times(x)},t.prototype.transformPoints=function(e){for(var n=e.length,r=this.a11,o=this.a12,i=this.a13,a=this.a21,s=this.a22,l=this.a23,u=this.a31,f=this.a32,d=this.a33,p=0;p<n;p+=2){var g=e[p],v=e[p+1],y=i*g+l*v+d;e[p]=(r*g+a*v+u)/y,e[p+1]=(o*g+s*v+f)/y}},t.prototype.transformPointsWithValues=function(e,n){for(var r=this.a11,o=this.a12,i=this.a13,a=this.a21,s=this.a22,l=this.a23,u=this.a31,f=this.a32,d=this.a33,p=e.length,g=0;g<p;g++){var v=e[g],y=n[g],w=i*v+l*y+d;e[g]=(r*v+a*y+u)/w,n[g]=(o*v+s*y+f)/w}},t.squareToQuadrilateral=function(e,n,r,o,i,a,s,l){var u=e-r+i-s,f=n-o+a-l;if(u===0&&f===0)return new t(r-e,i-r,e,o-n,a-o,n,0,0,1);var d=r-i,p=s-i,g=o-a,v=l-a,y=d*v-p*g,w=(u*v-p*f)/y,x=(d*f-u*g)/y;return new t(r-e+w*r,s-e+x*s,e,o-n+w*o,l-n+x*l,n,w,x,1)},t.quadrilateralToSquare=function(e,n,r,o,i,a,s,l){return t.squareToQuadrilateral(e,n,r,o,i,a,s,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),j2=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ex=function(t){j2(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(n,r,o,i,a,s,l,u,f,d,p,g,v,y,w,x,m,_,S){var A=Zp.quadrilateralToQuadrilateral(i,a,s,l,u,f,d,p,g,v,y,w,x,m,_,S);return this.sampleGridWithTransform(n,r,o,A)},e.prototype.sampleGridWithTransform=function(n,r,o,i){if(r<=0||o<=0)throw new V;for(var a=new An(r,o),s=new Float32Array(2*r),l=0;l<o;l++){for(var u=s.length,f=l+.5,d=0;d<u;d+=2)s[d]=d/2+.5,s[d+1]=f;i.transformPoints(s),_d.checkAndNudgePoints(n,s);try{for(var d=0;d<u;d+=2)n.get(Math.floor(s[d]),Math.floor(s[d+1]))&&a.set(d/2,l)}catch{throw new V}}return a},e}(_d),If=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new ex,t}(),bt=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.toResultPoint=function(){return new ne(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),tx=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){var o=r[0];r[0]=r[2],r[2]=o}this.extractParameters(r);var i=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),a=this.getMatrixCornerPoints(r);return new Q2(i,a,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new V;var n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);for(var o=0,i=0;i<4;i++){var a=r[(this.shift+i)%4];this.compact?(o<<=7,o+=a>>1&127):(o<<=10,o+=(a>>2&992)+(a>>1&31))}var s=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,n){var r=0;e.forEach(function(i,a,s){var l=(i>>n-2<<1)+(i&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var o=0;o<4;o++)if(de.bitCount(r^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new V},t.prototype.getCorrectedParameterData=function(e,n){var r,o;n?(r=7,o=2):(r=10,o=4);for(var i=r-o,a=new Int32Array(r),s=r-1;s>=0;--s)a[s]=e&15,e>>=4;try{var l=new ps(kt.AZTEC_PARAM);l.decode(a,i)}catch{throw new V}for(var u=0,s=0;s<o;s++)u=(u<<4)+a[s];return u},t.prototype.getBullsEyeCorners=function(e){var n=e,r=e,o=e,i=e,a=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(n,a,1,-1),l=this.getFirstDifferent(r,a,1,1),u=this.getFirstDifferent(o,a,-1,1),f=this.getFirstDifferent(i,a,-1,-1);if(this.nbCenterLayers>2){var d=this.distancePoint(f,s)*this.nbCenterLayers/(this.distancePoint(i,n)*(this.nbCenterLayers+2));if(d<.75||d>1.25||!this.isWhiteOrBlackRectangle(s,l,u,f))break}n=s,r=l,o=u,i=f,a=!a}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;var p=new ne(n.getX()+.5,n.getY()-.5),g=new ne(r.getX()+.5,r.getY()+.5),v=new ne(o.getX()-.5,o.getY()+.5),y=new ne(i.getX()-.5,i.getY()-.5);return this.expandSquare([p,g,v,y],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,n,r,o;try{var i=new lu(this.image).detect();e=i[0],n=i[1],r=i[2],o=i[3]}catch{var a=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new bt(a+7,s-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new bt(a+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new bt(a-7,s+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new bt(a-7,s-7),!1,-1,-1).toResultPoint()}var l=me.round((e.getX()+o.getX()+n.getX()+r.getX())/4),u=me.round((e.getY()+o.getY()+n.getY()+r.getY())/4);try{var i=new lu(this.image,15,l,u).detect();e=i[0],n=i[1],r=i[2],o=i[3]}catch{e=this.getFirstDifferent(new bt(l+7,u-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new bt(l+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new bt(l-7,u+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new bt(l-7,u-7),!1,-1,-1).toResultPoint()}return l=me.round((e.getX()+o.getX()+n.getX()+r.getX())/4),u=me.round((e.getY()+o.getY()+n.getY()+r.getY())/4),new bt(l,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,n,r,o,i){var a=If.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,u=s/2+this.nbCenterLayers;return a.sampleGrid(e,s,s,l,l,u,l,u,u,l,u,n.getX(),n.getY(),r.getX(),r.getY(),o.getX(),o.getY(),i.getX(),i.getY())},t.prototype.sampleLine=function(e,n,r){for(var o=0,i=this.distanceResultPoint(e,n),a=i/r,s=e.getX(),l=e.getY(),u=a*(n.getX()-e.getX())/i,f=a*(n.getY()-e.getY())/i,d=0;d<r;d++)this.image.get(me.round(s+d*u),me.round(l+d*f))&&(o|=1<<r-d-1);return o},t.prototype.isWhiteOrBlackRectangle=function(e,n,r,o){var i=3;e=new bt(e.getX()-i,e.getY()+i),n=new bt(n.getX()-i,n.getY()-i),r=new bt(r.getX()+i,r.getY()-i),o=new bt(o.getX()+i,o.getY()+i);var a=this.getColor(o,e);if(a===0)return!1;var s=this.getColor(e,n);return s!==a||(s=this.getColor(n,r),s!==a)?!1:(s=this.getColor(r,o),s===a)},t.prototype.getColor=function(e,n){for(var r=this.distancePoint(e,n),o=(n.getX()-e.getX())/r,i=(n.getY()-e.getY())/r,a=0,s=e.getX(),l=e.getY(),u=this.image.get(e.getX(),e.getY()),f=Math.ceil(r),d=0;d<f;d++)s+=o,l+=i,this.image.get(me.round(s),me.round(l))!==u&&a++;var p=a/r;return p>.1&&p<.9?0:p<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,n,r,o){for(var i=e.getX()+r,a=e.getY()+o;this.isValid(i,a)&&this.image.get(i,a)===n;)i+=r,a+=o;for(i-=r,a-=o;this.isValid(i,a)&&this.image.get(i,a)===n;)i+=r;for(i-=r;this.isValid(i,a)&&this.image.get(i,a)===n;)a+=o;return a-=o,new bt(i,a)},t.prototype.expandSquare=function(e,n,r){var o=r/(2*n),i=e[0].getX()-e[2].getX(),a=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,u=new ne(s+o*i,l+o*a),f=new ne(s-o*i,l-o*a);i=e[1].getX()-e[3].getX(),a=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var d=new ne(s+o*i,l+o*a),p=new ne(s-o*i,l-o*a),g=[u,d,f,p];return g},t.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},t.prototype.isValidPoint=function(e){var n=me.round(e.getX()),r=me.round(e.getY());return this.isValid(n,r)},t.prototype.distancePoint=function(e,n){return me.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.distanceResultPoint=function(e,n){return me.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(de.truncDivision(this.nbLayers-4,8)+1)+15},t}(),uu=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=null,o=new tx(e.getBlackMatrix()),i=null,a=null;try{var s=o.detectMirror(!1);i=s.getPoints(),this.reportFoundResultPoints(n,i),a=new xd().decode(s)}catch(d){r=d}if(a==null)try{var s=o.detectMirror(!0);i=s.getPoints(),this.reportFoundResultPoints(n,i),a=new xd().decode(s)}catch(d){throw r??d}var l=new St(a.getText(),a.getRawBytes(),a.getNumBits(),i,ae.AZTEC,Me.currentTimeMillis()),u=a.getByteSegments();u!=null&&l.putMetadata(gt.BYTE_SEGMENTS,u);var f=a.getECLevel();return f!=null&&l.putMetadata(gt.ERROR_CORRECTION_LEVEL,f),l},t.prototype.reportFoundResultPoints=function(e,n){if(e!=null){var r=e.get(Ge.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach(function(o,i,a){r.foundPossibleResultPoint(o)})}},t.prototype.reset=function(){},t}(),nx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){nx(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new uu,n)||this}return e})(Co);var ot=function(){function t(){}return t.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{var r=n&&n.get(Ge.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var o=e.rotateCounterClockwise(),i=this.doDecode(o,n),a=i.getResultMetadata(),s=270;a!==null&&a.get(gt.ORIENTATION)===!0&&(s=s+a.get(gt.ORIENTATION)%360),i.putMetadata(gt.ORIENTATION,s);var l=i.getResultPoints();if(l!==null)for(var u=o.getHeight(),f=0;f<l.length;f++)l[f]=new ne(u-l[f].getY()-1,l[f].getX());return i}else throw new V}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,n){var r=e.getWidth(),o=e.getHeight(),i=new ft(r),a=n&&n.get(Ge.TRY_HARDER)===!0,s=Math.max(1,o>>(a?8:5)),l;a?l=o:l=15;for(var u=Math.trunc(o/2),f=0;f<l;f++){var d=Math.trunc((f+1)/2),p=(f&1)===0,g=u+s*(p?d:-d);if(g<0||g>=o)break;try{i=e.getBlackRow(g,i)}catch{continue}for(var v=function(m){if(m===1&&(i.reverse(),n&&n.get(Ge.NEED_RESULT_POINT_CALLBACK)===!0)){var _=new Map;n.forEach(function(R,N){return _.set(N,R)}),_.delete(Ge.NEED_RESULT_POINT_CALLBACK),n=_}try{var S=y.decodeRow(g,i,n);if(m===1){S.putMetadata(gt.ORIENTATION,180);var A=S.getResultPoints();A!==null&&(A[0]=new ne(r-A[0].getX()-1,A[0].getY()),A[1]=new ne(r-A[1].getX()-1,A[1].getY()))}return{value:S}}catch{}},y=this,w=0;w<2;w++){var x=v(w);if(typeof x=="object")return x.value}}throw new V},t.recordPattern=function(e,n,r){for(var o=r.length,i=0;i<o;i++)r[i]=0;var a=e.getSize();if(n>=a)throw new V;for(var s=!e.get(n),l=0,u=n;u<a;){if(e.get(u)!==s)r[l]++;else{if(++l===o)break;r[l]=1,s=!s}u++}if(!(l===o||l===o-1&&u===a))throw new V},t.recordPatternInReverse=function(e,n,r){for(var o=r.length,i=e.get(n);n>0&&o>=0;)e.get(--n)!==i&&(o--,i=!i);if(o>=0)throw new V;t.recordPattern(e,n+1,r)},t.patternMatchVariance=function(e,n,r){for(var o=e.length,i=0,a=0,s=0;s<o;s++)i+=e[s],a+=n[s];if(i<a)return Number.POSITIVE_INFINITY;var l=i/a;r*=l;for(var u=0,f=0;f<o;f++){var d=e[f],p=n[f]*l,g=d>p?d-p:p-d;if(g>r)return Number.POSITIVE_INFINITY;u+=g}return u/i},t}(),rx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ed=function(t){rx(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(n){for(var r=n.getSize(),o=n.getNextSet(0),i=0,a=Int32Array.from([0,0,0,0,0,0]),s=o,l=!1,u=6,f=o;f<r;f++)if(n.get(f)!==l)a[i]++;else{if(i===u-1){for(var d=e.MAX_AVG_VARIANCE,p=-1,g=e.CODE_START_A;g<=e.CODE_START_C;g++){var v=ot.patternMatchVariance(a,e.CODE_PATTERNS[g],e.MAX_INDIVIDUAL_VARIANCE);v<d&&(d=v,p=g)}if(p>=0&&n.isRange(Math.max(0,s-(f-s)/2),s,!1))return Int32Array.from([s,f,p]);s+=a[0]+a[1],a=a.slice(2,a.length-1),a[i-1]=0,a[i]=0,i--}else i++;a[i]=1,l=!l}throw new V},e.decodeCode=function(n,r,o){ot.recordPattern(n,o,r);for(var i=e.MAX_AVG_VARIANCE,a=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],u=this.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);u<i&&(i=u,a=s)}if(a>=0)return a;throw new V},e.prototype.decodeRow=function(n,r,o){var i=o&&o.get(Ge.ASSUME_GS1)===!0,a=e.findStartPattern(r),s=a[2],l=0,u=new Uint8Array(20);u[l++]=s;var f;switch(s){case e.CODE_START_A:f=e.CODE_CODE_A;break;case e.CODE_START_B:f=e.CODE_CODE_B;break;case e.CODE_START_C:f=e.CODE_CODE_C;break;default:throw new Z}for(var d=!1,p=!1,g="",v=a[0],y=a[1],w=Int32Array.from([0,0,0,0,0,0]),x=0,m=0,_=s,S=0,A=!0,R=!1,N=!1;!d;){var M=p;switch(p=!1,x=m,m=e.decodeCode(r,w,y),u[l++]=m,m!==e.CODE_STOP&&(A=!0),m!==e.CODE_STOP&&(S++,_+=S*m),v=y,y+=w.reduce(function(re,z){return re+z},0),m){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new Z}switch(f){case e.CODE_CODE_A:if(m<64)N===R?g+=String.fromCharCode(" ".charCodeAt(0)+m):g+=String.fromCharCode(" ".charCodeAt(0)+m+128),N=!1;else if(m<96)N===R?g+=String.fromCharCode(m-64):g+=String.fromCharCode(m+64),N=!1;else switch(m!==e.CODE_STOP&&(A=!1),m){case e.CODE_FNC_1:i&&(g.length===0?g+="]C1":g+=String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!R&&N?(R=!0,N=!1):R&&N?(R=!1,N=!1):N=!0;break;case e.CODE_SHIFT:p=!0,f=e.CODE_CODE_B;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:d=!0;break}break;case e.CODE_CODE_B:if(m<96)N===R?g+=String.fromCharCode(" ".charCodeAt(0)+m):g+=String.fromCharCode(" ".charCodeAt(0)+m+128),N=!1;else switch(m!==e.CODE_STOP&&(A=!1),m){case e.CODE_FNC_1:i&&(g.length===0?g+="]C1":g+=String.fromCharCode(29));break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!R&&N?(R=!0,N=!1):R&&N?(R=!1,N=!1):N=!0;break;case e.CODE_SHIFT:p=!0,f=e.CODE_CODE_A;break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_C:f=e.CODE_CODE_C;break;case e.CODE_STOP:d=!0;break}break;case e.CODE_CODE_C:if(m<100)m<10&&(g+="0"),g+=m;else switch(m!==e.CODE_STOP&&(A=!1),m){case e.CODE_FNC_1:i&&(g.length===0?g+="]C1":g+=String.fromCharCode(29));break;case e.CODE_CODE_A:f=e.CODE_CODE_A;break;case e.CODE_CODE_B:f=e.CODE_CODE_B;break;case e.CODE_STOP:d=!0;break}break}M&&(f=f===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var F=y-v;if(y=r.getNextUnset(y),!r.isRange(y,Math.min(r.getSize(),y+(y-v)/2),!1))throw new V;if(_-=S*x,_%103!==x)throw new ut;var k=g.length;if(k===0)throw new V;k>0&&A&&(f===e.CODE_CODE_C?g=g.substring(0,k-2):g=g.substring(0,k-1));for(var $=(a[1]+a[0])/2,X=v+F/2,te=u.length,Ee=new Uint8Array(te),we=0;we<te;we++)Ee[we]=u[we];var Ce=[new ne($,n),new ne(X,n)];return new St(g,Ee,0,Ce,ae.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(ot),ox=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tl=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wd=function(t){ox(e,t);function e(n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var o=t.call(this)||this;return o.usingCheckDigit=n,o.extendedMode=r,o.decodeRowResult="",o.counters=new Int32Array(9),o}return e.prototype.decodeRow=function(n,r,o){var i,a,s,l,u=this.counters;u.fill(0),this.decodeRowResult="";var f=e.findAsteriskPattern(r,u),d=r.getNextSet(f[1]),p=r.getSize(),g,v;do{e.recordPattern(r,d,u);var y=e.toNarrowWidePattern(u);if(y<0)throw new V;g=e.patternToChar(y),this.decodeRowResult+=g,v=d;try{for(var w=(i=void 0,tl(u)),x=w.next();!x.done;x=w.next()){var m=x.value;d+=m}}catch(te){i={error:te}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}d=r.getNextSet(d)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var _=0;try{for(var S=tl(u),A=S.next();!A.done;A=S.next()){var m=A.value;_+=m}}catch(te){s={error:te}}finally{try{A&&!A.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}var R=d-v-_;if(d!==p&&R*2<_)throw new V;if(this.usingCheckDigit){for(var N=this.decodeRowResult.length-1,M=0,F=0;F<N;F++)M+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(F));if(this.decodeRowResult.charAt(N)!==e.ALPHABET_STRING.charAt(M%43))throw new ut;this.decodeRowResult=this.decodeRowResult.substring(0,N)}if(this.decodeRowResult.length===0)throw new V;var k;this.extendedMode?k=e.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;var $=(f[1]+f[0])/2,X=v+_/2;return new St(k,null,0,[new ne($,n),new ne(X,n)],ae.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(n,r){for(var o=n.getSize(),i=n.getNextSet(0),a=0,s=i,l=!1,u=r.length,f=i;f<o;f++)if(n.get(f)!==l)r[a]++;else{if(a===u-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,s-Math.floor((f-s)/2)),s,!1))return[s,f];s+=r[0]+r[1],r.copyWithin(0,2,2+a-1),r[a-1]=0,r[a]=0,a--}else a++;r[a]=1,l=!l}throw new V},e.toNarrowWidePattern=function(n){var r,o,i=n.length,a=0,s;do{var l=2147483647;try{for(var u=(r=void 0,tl(n)),f=u.next();!f.done;f=u.next()){var d=f.value;d<l&&d>a&&(l=d)}}catch(y){r={error:y}}finally{try{f&&!f.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}a=l,s=0;for(var p=0,g=0,v=0;v<i;v++){var d=n[v];d>a&&(g|=1<<i-1-v,s++,p+=d)}if(s===3){for(var v=0;v<i&&s>0;v++){var d=n[v];if(d>a&&(s--,d*2>=p))return-1}return g}}while(s>3);return-1},e.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);if(n===e.ASTERISK_ENCODING)return"*";throw new V},e.decodeExtended=function(n){for(var r=n.length,o="",i=0;i<r;i++){var a=n.charAt(i);if(a==="+"||a==="$"||a==="%"||a==="/"){var s=n.charAt(i+1),l="\0";switch(a){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new Z;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new Z;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="";else throw new Z;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new Z;break}o+=l,i++}else o+=a}return o},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(ot),ix=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nl=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cd=function(t){ix(e,t);function e(){var n=t.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return e.prototype.decodeRow=function(n,r,o){var i,a,s,l,u=this.findAsteriskPattern(r),f=r.getNextSet(u[1]),d=r.getSize(),p=this.counters;p.fill(0),this.decodeRowResult="";var g,v;do{e.recordPattern(r,f,p);var y=this.toPattern(p);if(y<0)throw new V;g=this.patternToChar(y),this.decodeRowResult+=g,v=f;try{for(var w=(i=void 0,nl(p)),x=w.next();!x.done;x=w.next()){var m=x.value;f+=m}}catch(F){i={error:F}}finally{try{x&&!x.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}f=r.getNextSet(f)}while(g!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var _=0;try{for(var S=nl(p),A=S.next();!A.done;A=S.next()){var m=A.value;_+=m}}catch(F){s={error:F}}finally{try{A&&!A.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}if(f===d||!r.get(f))throw new V;if(this.decodeRowResult.length<2)throw new V;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var R=this.decodeExtended(this.decodeRowResult),N=(u[1]+u[0])/2,M=v+_/2;return new St(R,null,0,[new ne(N,n),new ne(M,n)],ae.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(n){var r=n.getSize(),o=n.getNextSet(0);this.counters.fill(0);for(var i=this.counters,a=o,s=!1,l=i.length,u=0,f=o;f<r;f++)if(n.get(f)!==s)i[u]++;else{if(u===l-1){if(this.toPattern(i)===e.ASTERISK_ENCODING)return new Int32Array([a,f]);a+=i[0]+i[1],i.copyWithin(0,2,2+u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,s=!s}throw new V},e.prototype.toPattern=function(n){var r,o,i=0;try{for(var a=nl(n),s=a.next();!s.done;s=a.next()){var l=s.value;i+=l}}catch(v){r={error:v}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}for(var u=0,f=n.length,d=0;d<f;d++){var p=Math.round(n[d]*9/i);if(p<1||p>4)return-1;if(d&1)u<<=p;else for(var g=0;g<p;g++)u=u<<1|1}return u},e.prototype.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);throw new V},e.prototype.decodeExtended=function(n){for(var r=n.length,o="",i=0;i<r;i++){var a=n.charAt(i);if(a>="a"&&a<="d"){if(i>=r-1)throw new Z;var s=n.charAt(i+1),l="\0";switch(a){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new Z;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new Z;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l=String.fromCharCode(127);else throw new Z;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new Z;break}o+=l,i++}else o+=a}return o},e.prototype.checkChecksums=function(n){var r=n.length;this.checkOneChecksum(n,r-2,20),this.checkOneChecksum(n,r-1,15)},e.prototype.checkOneChecksum=function(n,r,o){for(var i=1,a=0,s=r-1;s>=0;s--)a+=i*e.ALPHABET_STRING.indexOf(n.charAt(s)),++i>o&&(i=1);if(n.charAt(r)!==e.ALPHABET_STRING[a%47])throw new ut},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(ot),ax=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sx=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ad=function(t){ax(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return e.prototype.decodeRow=function(n,r,o){var i,a,s=this.decodeStart(r),l=this.decodeEnd(r),u=new fe;e.decodeMiddle(r,s[1],l[0],u);var f=u.toString(),d=null;o!=null&&(d=o.get(Ge.ALLOWED_LENGTHS)),d==null&&(d=e.DEFAULT_ALLOWED_LENGTHS);var p=f.length,g=!1,v=0;try{for(var y=sx(d),w=y.next();!w.done;w=y.next()){var x=w.value;if(p===x){g=!0;break}x>v&&(v=x)}}catch(S){i={error:S}}finally{try{w&&!w.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}if(!g&&p>v&&(g=!0),!g)throw new Z;var m=[new ne(s[1],n),new ne(l[0],n)],_=new St(f,null,0,m,ae.ITF,new Date().getTime());return _},e.decodeMiddle=function(n,r,o,i){var a=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(a.fill(0),s.fill(0),l.fill(0);r<o;){ot.recordPattern(n,r,a);for(var u=0;u<5;u++){var f=2*u;s[u]=a[f],l[u]=a[f+1]}var d=e.decodeDigit(s);i.append(d.toString()),d=this.decodeDigit(l),i.append(d.toString()),a.forEach(function(p){r+=p})}},e.prototype.decodeStart=function(n){var r=e.skipWhiteSpace(n),o=e.findGuardPattern(n,r,e.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(n,o[0]),o},e.prototype.validateQuietZone=function(n,r){var o=this.narrowLineWidth*10;o=o<r?o:r;for(var i=r-1;o>0&&i>=0&&!n.get(i);i--)o--;if(o!==0)throw new V},e.skipWhiteSpace=function(n){var r=n.getSize(),o=n.getNextSet(0);if(o===r)throw new V;return o},e.prototype.decodeEnd=function(n){n.reverse();try{var r=e.skipWhiteSpace(n),o=void 0;try{o=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[0])}catch(a){a instanceof V&&(o=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,o[0]);var i=o[0];return o[0]=n.getSize()-o[1],o[1]=n.getSize()-i,o}finally{n.reverse()}},e.findGuardPattern=function(n,r,o){var i=o.length,a=new Int32Array(i),s=n.getSize(),l=!1,u=0,f=r;a.fill(0);for(var d=r;d<s;d++)if(n.get(d)!==l)a[u]++;else{if(u===i-1){if(ot.patternMatchVariance(a,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[f,d];f+=a[0]+a[1],Me.arraycopy(a,2,a,0,u-1),a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,l=!l}throw new V},e.decodeDigit=function(n){for(var r=e.MAX_AVG_VARIANCE,o=-1,i=e.PATTERNS.length,a=0;a<i;a++){var s=e.PATTERNS[a],l=ot.patternMatchVariance(n,s,e.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,o=a):l===r&&(o=-1)}if(o>=0)return o%10;throw new V},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(ot),lx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xo=function(t){lx(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return e.findStartGuardPattern=function(n){for(var r=!1,o,i=0,a=Int32Array.from([0,0,0]);!r;){a=Int32Array.from([0,0,0]),o=e.findGuardPattern(n,i,!1,this.START_END_PATTERN,a);var s=o[0];i=o[1];var l=s-(i-s);l>=0&&(r=n.isRange(l,s,!1))}return o},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var o=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===o},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,o=0,i=r-1;i>=0;i-=2){var a=n.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new Z;o+=a}o*=3;for(var i=r-2;i>=0;i-=2){var a=n.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new Z;o+=a}return(1e3-o)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,r,o,i){return this.findGuardPattern(n,r,o,i,new Int32Array(i.length))},e.findGuardPattern=function(n,r,o,i,a){var s=n.getSize();r=o?n.getNextUnset(r):n.getNextSet(r);for(var l=0,u=r,f=i.length,d=o,p=r;p<s;p++)if(n.get(p)!==d)a[l]++;else{if(l===f-1){if(ot.patternMatchVariance(a,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,p]);u+=a[0]+a[1];for(var g=a.slice(2,a.length),v=0;v<l-1;v++)a[v]=g[v];a[l-1]=0,a[l]=0,l--}else l++;a[l]=1,d=!d}throw new V},e.decodeDigit=function(n,r,o,i){this.recordPattern(n,o,r);for(var a=this.MAX_AVG_VARIANCE,s=-1,l=i.length,u=0;u<l;u++){var f=i[u],d=ot.patternMatchVariance(r,f,e.MAX_INDIVIDUAL_VARIANCE);d<a&&(a=d,s=u)}if(s>=0)return s;throw new V},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(ot),ux=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fx=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(n,r,o),a=o.toString(),s=t.parseExtensionString(a),l=[new ne((r[0]+r[1])/2,e),new ne(i,e)],u=new St(a,null,0,l,ae.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},t.prototype.decodeMiddle=function(e,n,r){var o,i,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),l=n[1],u=0,f=0;f<5&&l<s;f++){var d=xo.decodeDigit(e,a,l,xo.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var p=(o=void 0,ux(a)),g=p.next();!g.done;g=p.next()){var v=g.value;l+=v}}catch(w){o={error:w}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}d>=10&&(u|=1<<4-f),f!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==5)throw new V;var y=this.determineCheckDigit(u);if(t.extensionChecksum(r.toString())!==y)throw new V;return l},t.extensionChecksum=function(e){for(var n=e.length,r=0,o=n-2;o>=0;o-=2)r+=e.charAt(o).charCodeAt(0)-"0".charCodeAt(0);r*=3;for(var o=n-1;o>=0;o-=2)r+=e.charAt(o).charCodeAt(0)-"0".charCodeAt(0);return r*=3,r%10},t.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new V},t.parseExtensionString=function(e){if(e.length!==5)return null;var n=t.parseExtension5String(e);return n==null?null:new Map([[gt.SUGGESTED_PRICE,n]])},t.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}var r=parseInt(e.substring(1)),o=(r/100).toString(),i=r%100,a=i<10?"0"+i:i.toString();return n+o+"."+a},t}(),cx=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dx=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var o=this.decodeRowStringBuffer,i=this.decodeMiddle(n,r,o),a=o.toString(),s=t.parseExtensionString(a),l=[new ne((r[0]+r[1])/2,e),new ne(i,e)],u=new St(a,null,0,l,ae.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&u.putAllMetadata(s),u},t.prototype.decodeMiddle=function(e,n,r){var o,i,a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=e.getSize(),l=n[1],u=0,f=0;f<2&&l<s;f++){var d=xo.decodeDigit(e,a,l,xo.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+d%10);try{for(var p=(o=void 0,cx(a)),g=p.next();!g.done;g=p.next()){var v=g.value;l+=v}}catch(y){o={error:y}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}d>=10&&(u|=1<<1-f),f!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==2)throw new V;if(parseInt(r.toString())%4!==u)throw new V;return l},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[gt.ISSUE_NUMBER,parseInt(e)]])},t}(),hx=function(){function t(){}return t.decodeRow=function(e,n,r){var o=xo.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var i=new fx;return i.decodeRow(e,n,o)}catch{var a=new dx;return a.decodeRow(e,n,o)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),px=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),et=function(t){px(e,t);function e(){var n=t.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var r=10;r<20;r++){for(var o=e.L_PATTERNS[r-10],i=new Int32Array(o.length),a=0;a<o.length;a++)i[a]=o[o.length-a-1];e.L_AND_G_PATTERNS[r]=i}return n}return e.prototype.decodeRow=function(n,r,o){var i=e.findStartGuardPattern(r),a=o==null?null:o.get(Ge.NEED_RESULT_POINT_CALLBACK);if(a!=null){var s=new ne((i[0]+i[1])/2,n);a.foundPossibleResultPoint(s)}var l=this.decodeMiddle(r,i,this.decodeRowStringBuffer),u=l.rowOffset,f=l.resultString;if(a!=null){var d=new ne(u,n);a.foundPossibleResultPoint(d)}var p=e.decodeEnd(r,u);if(a!=null){var g=new ne((p[0]+p[1])/2,n);a.foundPossibleResultPoint(g)}var v=p[1],y=v+(v-p[0]);if(y>=r.getSize()||!r.isRange(v,y,!1))throw new V;var w=f.toString();if(w.length<8)throw new Z;if(!e.checkChecksum(w))throw new ut;var x=(i[1]+i[0])/2,m=(p[1]+p[0])/2,_=this.getBarcodeFormat(),S=[new ne(x,n),new ne(m,n)],A=new St(w,null,0,S,_,new Date().getTime()),R=0;try{var N=hx.decodeRow(n,r,p[1]);A.putMetadata(gt.UPC_EAN_EXTENSION,N.getText()),A.putAllMetadata(N.getResultMetadata()),A.addResultPoints(N.getResultPoints()),R=N.getText().length}catch{}var M=o==null?null:o.get(Ge.ALLOWED_EAN_EXTENSIONS);if(M!=null){var F=!1;for(var k in M)if(R.toString()===k){F=!0;break}if(!F)throw new V}return _===ae.EAN_13||ae.UPC_A,A},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var o=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===o},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,o=0,i=r-1;i>=0;i-=2){var a=n.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new Z;o+=a}o*=3;for(var i=r-2;i>=0;i-=2){var a=n.charAt(i).charCodeAt(0)-"0".charCodeAt(0);if(a<0||a>9)throw new Z;o+=a}return(1e3-o)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(xo),gx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sd=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fu=function(t){gx(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,o){var i,a,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var f=n.getSize(),d=r[1],p=0,g=0;g<6&&d<f;g++){var v=et.decodeDigit(n,u,d,et.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+v%10);try{for(var y=(i=void 0,Sd(u)),w=y.next();!w.done;w=y.next()){var x=w.value;d+=x}}catch(A){i={error:A}}finally{try{w&&!w.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}v>=10&&(p|=1<<5-g)}o=e.determineFirstDigit(o,p);var m=et.findGuardPattern(n,d,!0,et.MIDDLE_PATTERN,new Int32Array(et.MIDDLE_PATTERN.length).fill(0));d=m[1];for(var g=0;g<6&&d<f;g++){var v=et.decodeDigit(n,u,d,et.L_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+v);try{for(var _=(s=void 0,Sd(u)),S=_.next();!S.done;S=_.next()){var x=S.value;d+=x}}catch(N){s={error:N}}finally{try{S&&!S.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}}return{rowOffset:d,resultString:o}},e.prototype.getBarcodeFormat=function(){return ae.EAN_13},e.determineFirstDigit=function(n,r){for(var o=0;o<10;o++)if(r===this.FIRST_DIGIT_ENCODINGS[o])return n=String.fromCharCode("0".charCodeAt(0)+o)+n,n;throw new V},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(et),vx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Td=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Id=function(t){vx(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,o){var i,a,s,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var f=n.getSize(),d=r[1],p=0;p<4&&d<f;p++){var g=et.decodeDigit(n,u,d,et.L_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+g);try{for(var v=(i=void 0,Td(u)),y=v.next();!y.done;y=v.next()){var w=y.value;d+=w}}catch(S){i={error:S}}finally{try{y&&!y.done&&(a=v.return)&&a.call(v)}finally{if(i)throw i.error}}}var x=et.findGuardPattern(n,d,!0,et.MIDDLE_PATTERN,new Int32Array(et.MIDDLE_PATTERN.length).fill(0));d=x[1];for(var p=0;p<4&&d<f;p++){var g=et.decodeDigit(n,u,d,et.L_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+g);try{for(var m=(s=void 0,Td(u)),_=m.next();!_.done;_=m.next()){var w=_.value;d+=w}}catch(R){s={error:R}}finally{try{_&&!_.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}}return{rowOffset:d,resultString:o}},e.prototype.getBarcodeFormat=function(){return ae.EAN_8},e}(et),mx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nd=function(t){mx(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ean13Reader=new fu,n}return e.prototype.getBarcodeFormat=function(){return ae.UPC_A},e.prototype.decode=function(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,r,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,o))},e.prototype.decodeMiddle=function(n,r,o){return this.ean13Reader.decodeMiddle(n,r,o)},e.prototype.maybeReturnResult=function(n){var r=n.getText();if(r.charAt(0)==="0"){var o=new St(r.substring(1),null,null,n.getResultPoints(),ae.UPC_A);return n.getResultMetadata()!=null&&o.putAllMetadata(n.getResultMetadata()),o}else throw new V},e.prototype.reset=function(){this.ean13Reader.reset()},e}(et),yx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xx=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rd=function(t){yx(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return e.prototype.decodeMiddle=function(n,r,o){var i,a,s=this.decodeMiddleCounters.map(function(w){return w});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=n.getSize(),u=r[1],f=0,d=0;d<6&&u<l;d++){var p=e.decodeDigit(n,s,u,e.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+p%10);try{for(var g=(i=void 0,xx(s)),v=g.next();!v.done;v=g.next()){var y=v.value;u+=y}}catch(w){i={error:w}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}p>=10&&(f|=1<<5-d)}return e.determineNumSysAndCheckDigit(new fe(o),f),u},e.prototype.decodeEnd=function(n,r){return e.findGuardPatternWithoutCounters(n,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return et.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,r){for(var o=0;o<=1;o++)for(var i=0;i<10;i++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][i]){n.insert(0,"0"+o),n.append("0"+i);return}throw V.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ae.UPC_E},e.convertUPCEtoUPCA=function(n){var r=n.slice(1,7).split("").map(function(a){return a.charCodeAt(0)}),o=new fe;o.append(n.charAt(0));var i=r[5];switch(i){case 0:case 1:case 2:o.appendChars(r,0,2),o.append(i),o.append("0000"),o.appendChars(r,2,3);break;case 3:o.appendChars(r,0,3),o.append("00000"),o.appendChars(r,3,2);break;case 4:o.appendChars(r,0,4),o.append("00000"),o.append(r[4]);break;default:o.appendChars(r,0,5),o.append("0000"),o.append(i);break}return n.length>=8&&o.append(n.charAt(7)),o.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(et),_x=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pd=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rl=function(t){_x(e,t);function e(n){var r=t.call(this)||this,o=n==null?null:n.get(Ge.POSSIBLE_FORMATS),i=[];return o!=null&&(o.indexOf(ae.EAN_13)>-1&&i.push(new fu),o.indexOf(ae.UPC_A)>-1&&i.push(new Nd),o.indexOf(ae.EAN_8)>-1&&i.push(new Id),o.indexOf(ae.UPC_E)>-1&&i.push(new Rd)),i.length===0&&(i.push(new fu),i.push(new Nd),i.push(new Id),i.push(new Rd)),r.readers=i,r}return e.prototype.decodeRow=function(n,r,o){var i,a;try{for(var s=Pd(this.readers),l=s.next();!l.done;l=s.next()){var u=l.value;try{var f=u.decodeRow(n,r,o),d=f.getBarcodeFormat()===ae.EAN_13&&f.getText().charAt(0)==="0",p=o==null?null:o.get(Ge.POSSIBLE_FORMATS),g=p==null||p.includes(ae.UPC_A);if(d&&g){var v=f.getRawBytes(),y=new St(f.getText().substring(1),v,v?v.length:null,f.getResultPoints(),ae.UPC_A);return y.putAllMetadata(f.getResultMetadata()),y}return f}catch{}}}catch(w){i={error:w}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}throw new V},e.prototype.reset=function(){var n,r;try{for(var o=Pd(this.readers),i=o.next();!i.done;i=o.next()){var a=i.value;a.reset()}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e}(ot),Ex=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wx=function(t){Ex(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return e.prototype.decodeRow=function(n,r,o){var i=this.getValidRowData(r);if(!i)throw new V;var a=this.codaBarDecodeRow(i.row);if(!a)throw new V;return new St(a,null,0,[new ne(i.left,n),new ne(i.right,n)],ae.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(n){var r=n.toArray(),o=r.indexOf(!0);if(o===-1)return null;var i=r.lastIndexOf(!0);if(i<=o)return null;r=r.slice(o,i+1);for(var a=[],s=r[0],l=1,u=1;u<r.length;u++)r[u]===s?l++:(s=r[u],a.push(l),l=1);return a.push(l),a.length<23&&(a.length+1)%8!==0?null:{row:a,left:o,right:i}},e.prototype.codaBarDecodeRow=function(n){for(var r=[],o=Math.ceil(n.reduce(function(l,u){return(l+u)/2},0));n.length>0;){var i=n.splice(0,8).splice(0,7),a=i.map(function(l){return l<o?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[a]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[a])}var s=r.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(n){var r=/^[A-D].{1,}[A-D]$/;return r.test(n)},e}(ot),Cx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ax=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Er=function(t){Cx(e,t);function e(){var n=t.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,r){for(var o=0;o<r.length;o++)if(ot.patternMatchVariance(n,r[o],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return o;throw new V},e.count=function(n){return me.sum(new Int32Array(n))},e.increment=function(n,r){for(var o=0,i=r[0],a=1;a<n.length;a++)r[a]>i&&(i=r[a],o=a);n[o]++},e.decrement=function(n,r){for(var o=0,i=r[0],a=1;a<n.length;a++)r[a]<i&&(i=r[a],o=a);n[o]--},e.isFinderPattern=function(n){var r,o,i=n[0]+n[1],a=i+n[2]+n[3],s=i/a;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var f=Ax(n),d=f.next();!d.done;d=f.next()){var p=d.value;p>u&&(u=p),p<l&&(l=p)}}catch(g){r={error:g}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}return u<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(ot),Wa=function(){function t(e,n){this.value=e,this.checksumPortion=n}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),Qp=function(){function t(e,n,r,o,i){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new ne(r,i)),this.resultPoints.push(new ne(o,i))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.hashCode=function(){return this.value},t}(),Sx=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jr=function(){function t(){}return t.getRSSvalue=function(e,n,r){var o,i,a=0;try{for(var s=Sx(e),l=s.next();!l.done;l=s.next()){var u=l.value;a+=u}}catch(m){o={error:m}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}for(var f=0,d=0,p=e.length,g=0;g<p-1;g++){var v=void 0;for(v=1,d|=1<<g;v<e[g];v++,d&=~(1<<g)){var y=t.combins(a-v-1,p-g-2);if(r&&d===0&&a-v-(p-g-1)>=p-g-1&&(y-=t.combins(a-v-(p-g),p-g-2)),p-g-1>1){for(var w=0,x=a-v-(p-g-2);x>n;x--)w+=t.combins(a-v-x-1,p-g-3);y-=w*(p-1-g)}else a-v>n&&y--;f+=y}a-=v}return f},t.combins=function(e,n){var r,o;e-n>n?(o=n,r=e-n):(o=e-n,r=n);for(var i=1,a=1,s=e;s>r;s--)i*=s,a<=o&&(i/=a,a++);for(;a<=o;)i/=a,a++;return i},t}(),Tx=function(){function t(){}return t.buildBitArray=function(e){var n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);for(var r=12*n,o=new ft(r),i=0,a=e[0],s=a.getRightChar().getValue(),l=11;l>=0;--l)s&1<<l&&o.set(i),i++;for(var l=1;l<e.length;++l){for(var u=e[l],f=u.getLeftChar().getValue(),d=11;d>=0;--d)f&1<<d&&o.set(i),i++;if(u.getRightChar()!==null)for(var p=u.getRightChar().getValue(),d=11;d>=0;--d)p&1<<d&&o.set(i),i++}return o},t}(),vr=function(){function t(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),Nf=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),Ix=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),an=function(t){Ix(e,t);function e(n,r){var o=t.call(this,n)||this;return o.value=r,o}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Nf),Nx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mr=function(t){Nx(e,t);function e(n,r,o){var i=t.call(this,n)||this;return o?(i.remaining=!0,i.remainingValue=i.remainingValue):(i.remaining=!1,i.remainingValue=0),i.newString=r,i}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Nf),Rx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vr=function(t){Rx(e,t);function e(n,r,o){var i=t.call(this,n)||this;if(r<0||r>10||o<0||o>10)throw new Z;return i.firstDigit=r,i.secondDigit=o,i}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Nf),Qi=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Px=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var n,r,o,i,a,s,l,u;if(!e)return null;if(e.length<2)throw new V;var f=e.substring(0,2);try{for(var d=Qi(t.TWO_DIGIT_DATA_LENGTH),p=d.next();!p.done;p=d.next()){var g=p.value;if(g[0]===f)return g[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,g[2],e):t.processFixedAI(2,g[1],e)}}catch(R){n={error:R}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}if(e.length<3)throw new V;var v=e.substring(0,3);try{for(var y=Qi(t.THREE_DIGIT_DATA_LENGTH),w=y.next();!w.done;w=y.next()){var g=w.value;if(g[0]===v)return g[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,g[2],e):t.processFixedAI(3,g[1],e)}}catch(R){o={error:R}}finally{try{w&&!w.done&&(i=y.return)&&i.call(y)}finally{if(o)throw o.error}}try{for(var x=Qi(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),m=x.next();!m.done;m=x.next()){var g=m.value;if(g[0]===v)return g[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,g[2],e):t.processFixedAI(4,g[1],e)}}catch(R){a={error:R}}finally{try{m&&!m.done&&(s=x.return)&&s.call(x)}finally{if(a)throw a.error}}if(e.length<4)throw new V;var _=e.substring(0,4);try{for(var S=Qi(t.FOUR_DIGIT_DATA_LENGTH),A=S.next();!A.done;A=S.next()){var g=A.value;if(g[0]===_)return g[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,g[2],e):t.processFixedAI(4,g[1],e)}}catch(R){l={error:R}}finally{try{A&&!A.done&&(u=S.return)&&u.call(S)}finally{if(l)throw l.error}}throw new V},t.processFixedAI=function(e,n,r){if(r.length<e)throw new V;var o=r.substring(0,e);if(r.length<e+n)throw new V;var i=r.substring(e,e+n),a=r.substring(e+n),s="("+o+")"+i,l=t.parseFieldsInGeneralPurpose(a);return l==null?s:s+l},t.processVariableAI=function(e,n,r){var o=r.substring(0,e),i;r.length<e+n?i=r.length:i=e+n;var a=r.substring(e,i),s=r.substring(i),l="("+o+")"+a,u=t.parseFieldsInGeneralPurpose(s);return u==null?l:l+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),va=function(){function t(e){this.buffer=new fe,this.information=e}return t.prototype.decodeAllCodes=function(e,n){var r=n,o=null;do{var i=this.decodeGeneralPurposeField(r,o),a=Px.parseFieldsInGeneralPurpose(i.getNewString());if(a!=null&&e.append(a),i.isRemaining()?o=""+i.getRemainingValue():o=null,r===i.getNewPosition())break;r=i.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return n===0?new Vr(this.information.getSize(),Vr.FNC1,Vr.FNC1):new Vr(this.information.getSize(),n-1,Vr.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),o=(r-8)/11,i=(r-8)%11;return new Vr(e+7,o,i)},t.prototype.extractNumericValueFromBitArray=function(e,n){return t.extractNumericValueFromBitArray(this.information,e,n)},t.extractNumericValueFromBitArray=function(e,n,r){for(var o=0,i=0;i<r;++i)e.get(n+i)&&(o|=1<<r-i-1);return o},t.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new mr(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new mr(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,n;do{var r=this.current.getPosition();this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished());var o=r!==this.current.getPosition();if(!o&&!e)break}while(!e);return n.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return e.isSecondDigitFNC1()?n=new mr(this.current.getPosition(),this.buffer.toString()):n=new mr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new vr(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var n=new mr(this.current.getPosition(),this.buffer.toString());return new vr(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new vr(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new mr(this.current.getPosition(),this.buffer.toString());return new vr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new vr(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new mr(this.current.getPosition(),this.buffer.toString());return new vr(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new vr(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var o=this.extractNumericValueFromBitArray(e,8);return o>=232&&o<253},t.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new an(e+5,an.FNC1);if(n>=5&&n<15)return new an(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new an(e+7,""+(r+1));if(r>=90&&r<116)return new an(e+7,""+(r+7));var o=this.extractNumericValueFromBitArray(e,8),i;switch(o){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new Z}return new an(e+8,i)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new an(e+5,an.FNC1);if(n>=5&&n<15)return new an(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new an(e+6,""+(r+33));var o;switch(r){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new Pi("Decoding invalid alphanumeric value: "+r)}return new an(e+6,o)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},t}(),jp=function(){function t(e){this.information=e,this.generalDecoder=new va(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),Dx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cn=function(t){Dx(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedGtin=function(n,r){n.append("(01)");var o=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,o)},e.prototype.encodeCompressedGtinWithoutAI=function(n,r,o){for(var i=0;i<4;++i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*i,10);a/100===0&&n.append("0"),a/10===0&&n.append("0"),n.append(a)}e.appendCheckDigit(n,o)},e.appendCheckDigit=function(n,r){for(var o=0,i=0;i<13;i++){var a=n.charAt(i+r).charCodeAt(0)-"0".charCodeAt(0);o+=i&1?a:3*a}o=10-o%10,o===10&&(o=0),n.append(o)},e.GTIN_SIZE=40,e}(jp),Mx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bx=function(t){Mx(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new fe;n.append("(01)");var r=n.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(o),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=1+1+2,e}(cn),Ox=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kx=function(t){Ox(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new fe;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=2+1+2,e}(jp),Lx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ma=function(t){Lx(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedWeight=function(n,r,o){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,o);this.addWeightCode(n,i);for(var a=this.checkWeight(i),s=1e5,l=0;l<5;++l)a/s===0&&n.append("0"),s/=10;n.append(a)},e}(cn),Fx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),eg=function(t){Fx(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+ma.GTIN_SIZE+e.WEIGHT_SIZE)throw new V;var n=new fe;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+ma.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=4+1,e.WEIGHT_SIZE=15,e}(ma),Bx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ux=function(t){Bx(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e}(eg),Vx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gx=function(t){Vx(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e}(eg),Hx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zx=function(t){Hx(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+cn.GTIN_SIZE)throw new V;var n=new fe;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+cn.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+cn.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(o.getNewString()),n.toString()},e.HEADER_SIZE=5+1+2,e.LAST_DIGIT_SIZE=2,e}(cn),Wx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qx=function(t){Wx(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+cn.GTIN_SIZE)throw new V;var n=new fe;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+cn.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");var o=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+cn.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);o/100===0&&n.append("0"),o/10===0&&n.append("0"),n.append(o);var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+cn.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(i.getNewString()),n.toString()},e.HEADER_SIZE=5+1+2,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(cn),$x=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zn=function(t){$x(e,t);function e(n,r,o){var i=t.call(this,n)||this;return i.dateCode=o,i.firstAIdigits=r,i}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new V;var n=new fe;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,r){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(o!==38400){n.append("("),n.append(this.dateCode),n.append(")");var i=o%32;o/=32;var a=o%12+1;o/=12;var s=o;s/10===0&&n.append("0"),n.append(s),a/10===0&&n.append("0"),n.append(a),i/10===0&&n.append("0"),n.append(i)}},e.prototype.addWeightCode=function(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=7+1,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(ma);function Yx(t){try{if(t.get(1))return new bx(t);if(!t.get(2))return new kx(t);var e=va.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new Ux(t);case 5:return new Gx(t)}var n=va.extractNumericValueFromBitArray(t,1,5);switch(n){case 12:return new zx(t);case 13:return new qx(t)}var r=va.extractNumericValueFromBitArray(t,1,7);switch(r){case 56:return new zn(t,"310","11");case 57:return new zn(t,"320","11");case 58:return new zn(t,"310","13");case 59:return new zn(t,"320","13");case 60:return new zn(t,"310","15");case 61:return new zn(t,"320","15");case 62:return new zn(t,"310","17");case 63:return new zn(t,"320","17")}}catch(o){throw console.log(o),new Pi("unknown decoder: "+t)}}var Dd=function(){function t(e,n,r,o){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=o}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,n){return e instanceof t?t.equalsOrNull(e.leftchar,n.leftchar)&&t.equalsOrNull(e.rightchar,n.rightchar)&&t.equalsOrNull(e.finderpattern,n.finderpattern):!1},t.equalsOrNull=function(e,n){return e===null?n===null:t.equals(e,n)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),Xx=function(){function t(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,n){return e instanceof t?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1},t.prototype.checkEqualitity=function(e,n){if(!(!e||!n)){var r;return e.forEach(function(o,i){n.forEach(function(a){o.getLeftChar().getValue()===a.getLeftChar().getValue()&&o.getRightChar().getValue()===a.getRightChar().getValue()&&o.getFinderPatter().getValue()===a.getFinderPatter().getValue()&&(r=!0)})}),r}},t}(),Kx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wn=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jx=function(t){Kx(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return e.prototype.decodeRow=function(n,r,o){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,r){for(var o=!1;!o;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(s){if(s instanceof V){if(!this.pairs.length)throw new V;o=!0}}if(this.checkChecksum())return this.pairs;var i;if(this.rows.length?i=!0:i=!1,this.storeRow(n,!1),i){var a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new V},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(o){console.log(o)}return n&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(n,r){for(var o,i,a=r;a<this.rows.length;a++){var s=this.rows[a];this.pairs.length=0;try{for(var l=(o=void 0,Wn(n)),u=l.next();!u.done;u=l.next()){var f=u.value;this.pairs.push(f.getPairs())}}catch(p){o={error:p}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var d=new Array(n);d.push(s);try{return this.checkRows(d,a+1)}catch(p){console.log(p)}}}throw new V},e.isValidSequence=function(n){var r,o;try{for(var i=Wn(e.FINDER_PATTERN_SEQUENCES),a=i.next();!a.done;a=i.next()){var s=a.value;if(!(n.length>s.length)){for(var l=!0,u=0;u<n.length;u++)if(n[u].getFinderPattern().getValue()!==s[u]){l=!1;break}if(l)return!0}}}catch(f){r={error:f}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(n,r){for(var o=0,i=!1,a=!1;o<this.rows.length;){var s=this.rows[o];if(s.getRowNumber()>n){a=s.isEquivalent(this.pairs);break}i=s.isEquivalent(this.pairs),o++}a||i||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new Xx(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,r){var o,i,a,s,l,u;try{for(var f=Wn(r),d=f.next();!d.done;d=f.next()){var p=d.value;if(p.getPairs().length!==n.length){var g=!0;try{for(var v=(a=void 0,Wn(p.getPairs())),y=v.next();!y.done;y=v.next()){var w=y.value,x=!1;try{for(var m=(l=void 0,Wn(n)),_=m.next();!_.done;_=m.next()){var S=_.value;if(Dd.equals(w,S)){x=!0;break}}}catch(A){l={error:A}}finally{try{_&&!_.done&&(u=m.return)&&u.call(m)}finally{if(l)throw l.error}}x||(g=!1)}}catch(A){a={error:A}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}}}}catch(A){o={error:A}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}},e.isPartialRow=function(n,r){var o,i,a,s,l,u;try{for(var f=Wn(r),d=f.next();!d.done;d=f.next()){var p=d.value,g=!0;try{for(var v=(a=void 0,Wn(n)),y=v.next();!y.done;y=v.next()){var w=y.value,x=!1;try{for(var m=(l=void 0,Wn(p.getPairs())),_=m.next();!_.done;_=m.next()){var S=_.value;if(w.equals(S)){x=!0;break}}}catch(A){l={error:A}}finally{try{_&&!_.done&&(u=m.return)&&u.call(m)}finally{if(l)throw l.error}}if(!x){g=!1;break}}}catch(A){a={error:A}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}if(g)return!0}}catch(A){o={error:A}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var r=Tx.buildBitArray(n),o=Yx(r),i=o.parseInformation(),a=n[0].getFinderPattern().getResultPoints(),s=n[n.length-1].getFinderPattern().getResultPoints(),l=[a[0],a[1],s[0],s[1]];return new St(i,null,null,l,ae.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),r=n.getLeftChar(),o=n.getRightChar();if(o===null)return!1;for(var i=o.getChecksumPortion(),a=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);i+=l.getLeftChar().getChecksumPortion(),a++;var u=l.getRightChar();u!=null&&(i+=u.getChecksumPortion(),a++)}i%=211;var f=211*(a-4)+i;return f===r.getValue()},e.getNextSecondBar=function(n,r){var o;return n.get(r)?(o=n.getNextUnset(r),o=n.getNextSet(o)):(o=n.getNextSet(r),o=n.getNextUnset(o)),o},e.prototype.retrieveNextPair=function(n,r,o){var i=r.length%2===0;this.startFromEven&&(i=!i);var a,s=!0,l=-1;do this.findNextPair(n,r,l),a=this.parseFoundFinderPattern(n,o,i),a===null?l=e.getNextSecondBar(n,this.startEnd[0]):s=!1;while(s);var u=this.decodeDataCharacter(n,a,i,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new V;var f;try{f=this.decodeDataCharacter(n,a,i,!1)}catch(d){f=null,console.log(d)}return new Dd(u,f,a,!0)},e.prototype.isEmptyPair=function(n){return n.length===0},e.prototype.findNextPair=function(n,r,o){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;var a=n.getSize(),s;if(o>=0)s=o;else if(this.isEmptyPair(r))s=0;else{var l=r[r.length-1];s=l.getFinderPattern().getStartEnd()[1]}var u=r.length%2!==0;this.startFromEven&&(u=!u);for(var f=!1;s<a&&(f=!n.get(s),!!f);)s++;for(var d=0,p=s,g=s;g<a;g++)if(n.get(g)!==f)i[d]++;else{if(d===3){if(u&&e.reverseCounters(i),e.isFinderPattern(i)){this.startEnd[0]=p,this.startEnd[1]=g;return}u&&e.reverseCounters(i),p+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,d--}else d++;i[d]=1,f=!f}throw new V},e.reverseCounters=function(n){for(var r=n.length,o=0;o<r/2;++o){var i=n[o];n[o]=n[r-o-1],n[r-o-1]=i}},e.prototype.parseFoundFinderPattern=function(n,r,o){var i,a,s;if(o){for(var l=this.startEnd[0]-1;l>=0&&!n.get(l);)l--;l++,i=this.startEnd[0]-l,a=l,s=this.startEnd[1]}else a=this.startEnd[0],s=n.getNextUnset(this.startEnd[1]+1),i=s-this.startEnd[1];var u=this.getDecodeFinderCounters();Me.arraycopy(u,0,u,1,u.length-1),u[0]=i;var f;try{f=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new Qp(f,[a,s],a,s,r)},e.prototype.decodeDataCharacter=function(n,r,o,i){for(var a=this.getDataCharacterCounters(),s=0;s<a.length;s++)a[s]=0;if(i)e.recordPatternInReverse(n,r.getStartEnd()[0],a);else{e.recordPattern(n,r.getStartEnd()[1],a);for(var l=0,u=a.length-1;l<u;l++,u--){var f=a[l];a[l]=a[u],a[u]=f}}var d=17,p=me.sum(new Int32Array(a))/d,g=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(p-g)/g>.3)throw new V;for(var v=this.getOddCounts(),y=this.getEvenCounts(),w=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),l=0;l<a.length;l++){var m=1*a[l]/p,_=m+.5;if(_<1){if(m<.3)throw new V;_=1}else if(_>8){if(m>8.7)throw new V;_=8}var S=l/2;l&1?(y[S]=_,x[S]=m-_):(v[S]=_,w[S]=m-_)}this.adjustOddEvenCounts(d);for(var A=4*r.getValue()+(o?0:2)+(i?0:1)-1,R=0,N=0,l=v.length-1;l>=0;l--){if(e.isNotA1left(r,o,i)){var M=e.WEIGHTS[A][2*l];N+=v[l]*M}R+=v[l]}for(var F=0,l=y.length-1;l>=0;l--)if(e.isNotA1left(r,o,i)){var M=e.WEIGHTS[A][2*l+1];F+=y[l]*M}var k=N+F;if(R&1||R>13||R<4)throw new V;var $=(13-R)/2,X=e.SYMBOL_WIDEST[$],te=9-X,Ee=jr.getRSSvalue(v,X,!0),we=jr.getRSSvalue(y,te,!1),Ce=e.EVEN_TOTAL_SUBSET[$],re=e.GSUM[$],z=Ee*Ce+we+re;return new Wa(z,k)},e.isNotA1left=function(n,r,o){return!(n.getValue()===0&&r&&o)},e.prototype.adjustOddEvenCounts=function(n){var r=me.sum(new Int32Array(this.getOddCounts())),o=me.sum(new Int32Array(this.getEvenCounts())),i=!1,a=!1;r>13?a=!0:r<4&&(i=!0);var s=!1,l=!1;o>13?l=!0:o<4&&(s=!0);var u=r+o-n,f=(r&1)===1,d=(o&1)===0;if(u===1)if(f){if(d)throw new V;a=!0}else{if(!d)throw new V;l=!0}else if(u===-1)if(f){if(d)throw new V;i=!0}else{if(!d)throw new V;s=!0}else if(u===0){if(f){if(!d)throw new V;r<o?(i=!0,l=!0):(a=!0,s=!0)}else if(d)throw new V}else throw new V;if(i){if(a)throw new V;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new V;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Er),Zx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qx=function(t){Zx(e,t);function e(n,r,o){var i=t.call(this,n,r)||this;return i.count=0,i.finderPattern=o,i}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Wa),jx=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ol=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Md=function(t){jx(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return e.prototype.decodeRow=function(n,r,o){var i,a,s,l,u=this.decodePair(r,!1,n,o);e.addOrTally(this.possibleLeftPairs,u),r.reverse();var f=this.decodePair(r,!0,n,o);e.addOrTally(this.possibleRightPairs,f),r.reverse();try{for(var d=ol(this.possibleLeftPairs),p=d.next();!p.done;p=d.next()){var g=p.value;if(g.getCount()>1)try{for(var v=(s=void 0,ol(this.possibleRightPairs)),y=v.next();!y.done;y=v.next()){var w=y.value;if(w.getCount()>1&&e.checkChecksum(g,w))return e.constructResult(g,w)}}catch(x){s={error:x}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}}}catch(x){i={error:x}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}throw new V},e.addOrTally=function(n,r){var o,i;if(r!=null){var a=!1;try{for(var s=ol(n),l=s.next();!l.done;l=s.next()){var u=l.value;if(u.getValue()===r.getValue()){u.incrementCount(),a=!0;break}}}catch(f){o={error:f}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}a||n.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,r){for(var o=4537077*n.getValue()+r.getValue(),i=new String(o).toString(),a=new fe,s=13-i.length;s>0;s--)a.append("0");a.append(i);for(var l=0,s=0;s<13;s++){var u=a.charAt(s).charCodeAt(0)-"0".charCodeAt(0);l+=s&1?u:3*u}l=10-l%10,l===10&&(l=0),a.append(l.toString());var f=n.getFinderPattern().getResultPoints(),d=r.getFinderPattern().getResultPoints();return new St(a.toString(),null,0,[f[0],f[1],d[0],d[1]],ae.RSS_14,new Date().getTime())},e.checkChecksum=function(n,r){var o=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,i=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,o===i},e.prototype.decodePair=function(n,r,o,i){try{var a=this.findFinderPattern(n,r),s=this.parseFoundFinderPattern(n,o,r,a),l=i==null?null:i.get(Ge.NEED_RESULT_POINT_CALLBACK);if(l!=null){var u=(a[0]+a[1])/2;r&&(u=n.getSize()-1-u),l.foundPossibleResultPoint(new ne(u,o))}var f=this.decodeDataCharacter(n,s,!0),d=this.decodeDataCharacter(n,s,!1);return new Qx(1597*f.getValue()+d.getValue(),f.getChecksumPortion()+4*d.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(n,r,o){for(var i=this.getDataCharacterCounters(),a=0;a<i.length;a++)i[a]=0;if(o)ot.recordPatternInReverse(n,r.getStartEnd()[0],i);else{ot.recordPattern(n,r.getStartEnd()[1]+1,i);for(var s=0,l=i.length-1;s<l;s++,l--){var u=i[s];i[s]=i[l],i[l]=u}}for(var f=o?16:15,d=me.sum(new Int32Array(i))/f,p=this.getOddCounts(),g=this.getEvenCounts(),v=this.getOddRoundingErrors(),y=this.getEvenRoundingErrors(),s=0;s<i.length;s++){var w=i[s]/d,x=Math.floor(w+.5);x<1?x=1:x>8&&(x=8);var m=Math.floor(s/2);s&1?(g[m]=x,y[m]=w-x):(p[m]=x,v[m]=w-x)}this.adjustOddEvenCounts(o,f);for(var _=0,S=0,s=p.length-1;s>=0;s--)S*=9,S+=p[s],_+=p[s];for(var A=0,R=0,s=g.length-1;s>=0;s--)A*=9,A+=g[s],R+=g[s];var N=S+3*A;if(o){if(_&1||_>12||_<4)throw new V;var M=(12-_)/2,F=e.OUTSIDE_ODD_WIDEST[M],k=9-F,$=jr.getRSSvalue(p,F,!1),X=jr.getRSSvalue(g,k,!0),te=e.OUTSIDE_EVEN_TOTAL_SUBSET[M],Ee=e.OUTSIDE_GSUM[M];return new Wa($*te+X+Ee,N)}else{if(R&1||R>10||R<4)throw new V;var M=(10-R)/2,F=e.INSIDE_ODD_WIDEST[M],k=9-F,$=jr.getRSSvalue(p,F,!0),X=jr.getRSSvalue(g,k,!1),we=e.INSIDE_ODD_TOTAL_SUBSET[M],Ee=e.INSIDE_GSUM[M];return new Wa(X*we+$+Ee,N)}},e.prototype.findFinderPattern=function(n,r){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var i=n.getSize(),a=!1,s=0;s<i&&(a=!n.get(s),r!==a);)s++;for(var l=0,u=s,f=s;f<i;f++)if(n.get(f)!==a)o[l]++;else{if(l===3){if(Er.isFinderPattern(o))return[u,f];u+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,l--}else l++;o[l]=1,a=!a}throw new V},e.prototype.parseFoundFinderPattern=function(n,r,o,i){for(var a=n.get(i[0]),s=i[0]-1;s>=0&&a!==n.get(s);)s--;s++;var l=i[0]-s,u=this.getDecodeFinderCounters(),f=new Int32Array(u.length);Me.arraycopy(u,0,f,1,u.length-1),f[0]=l;var d=this.parseFinderValue(f,e.FINDER_PATTERNS),p=s,g=i[1];return o&&(p=n.getSize()-1-p,g=n.getSize()-1-g),new Qp(d,[s,i[1]],p,g,r)},e.prototype.adjustOddEvenCounts=function(n,r){var o=me.sum(new Int32Array(this.getOddCounts())),i=me.sum(new Int32Array(this.getEvenCounts())),a=!1,s=!1,l=!1,u=!1;n?(o>12?s=!0:o<4&&(a=!0),i>12?u=!0:i<4&&(l=!0)):(o>11?s=!0:o<5&&(a=!0),i>10?u=!0:i<4&&(l=!0));var f=o+i-r,d=(o&1)===(n?1:0),p=(i&1)===1;if(f===1)if(d){if(p)throw new V;s=!0}else{if(!p)throw new V;u=!0}else if(f===-1)if(d){if(p)throw new V;a=!0}else{if(!p)throw new V;l=!0}else if(f===0){if(d){if(!p)throw new V;o<i?(a=!0,u=!0):(s=!0,l=!0)}else if(p)throw new V}else throw new V;if(a){if(s)throw new V;Er.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&Er.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(u)throw new V;Er.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Er.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Er),e_=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ko=function(t){e_(e,t);function e(n){var r=t.call(this)||this;r.readers=[];var o=n?n.get(Ge.POSSIBLE_FORMATS):null,i=n&&n.get(Ge.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;return o&&((o.includes(ae.EAN_13)||o.includes(ae.UPC_A)||o.includes(ae.EAN_8)||o.includes(ae.UPC_E))&&r.readers.push(new rl(n)),o.includes(ae.CODE_39)&&r.readers.push(new wd(i)),o.includes(ae.CODE_93)&&r.readers.push(new Cd),o.includes(ae.CODE_128)&&r.readers.push(new Ed),o.includes(ae.ITF)&&r.readers.push(new Ad),o.includes(ae.CODABAR)&&r.readers.push(new wx),o.includes(ae.RSS_14)&&r.readers.push(new Md),o.includes(ae.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new Jx))),r.readers.length===0&&(r.readers.push(new rl(n)),r.readers.push(new wd),r.readers.push(new Cd),r.readers.push(new rl(n)),r.readers.push(new Ed),r.readers.push(new Ad),r.readers.push(new Md)),r}return e.prototype.decodeRow=function(n,r,o){for(var i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(n,r,o)}catch{}throw new V},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e}(ot),t_=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){t_(e,t);function e(n,r){return n===void 0&&(n=500),t.call(this,new Ko(r),n,r)||this}return e})(Co);var bd=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Se=function(){function t(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),xe=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),n_=function(){function t(e,n,r,o,i,a){var s,l;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=i,this.ecBlocks=a;var u=0,f=a.getECCodewords(),d=a.getECBlocks();try{for(var p=bd(d),g=p.next();!g.done;g=p.next()){var v=g.value;u+=v.getCount()*(v.getDataCodewords()+f)}}catch(y){s={error:y}}finally{try{g&&!g.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,n){var r,o;if(e&1||n&1)throw new Z;try{for(var i=bd(t.VERSIONS),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===n)return s}}catch(l){r={error:l}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}throw new Z},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new Se(5,new xe(1,3))),new t(2,12,12,10,10,new Se(7,new xe(1,5))),new t(3,14,14,12,12,new Se(10,new xe(1,8))),new t(4,16,16,14,14,new Se(12,new xe(1,12))),new t(5,18,18,16,16,new Se(14,new xe(1,18))),new t(6,20,20,18,18,new Se(18,new xe(1,22))),new t(7,22,22,20,20,new Se(20,new xe(1,30))),new t(8,24,24,22,22,new Se(24,new xe(1,36))),new t(9,26,26,24,24,new Se(28,new xe(1,44))),new t(10,32,32,14,14,new Se(36,new xe(1,62))),new t(11,36,36,16,16,new Se(42,new xe(1,86))),new t(12,40,40,18,18,new Se(48,new xe(1,114))),new t(13,44,44,20,20,new Se(56,new xe(1,144))),new t(14,48,48,22,22,new Se(68,new xe(1,174))),new t(15,52,52,24,24,new Se(42,new xe(2,102))),new t(16,64,64,14,14,new Se(56,new xe(2,140))),new t(17,72,72,16,16,new Se(36,new xe(4,92))),new t(18,80,80,18,18,new Se(48,new xe(4,114))),new t(19,88,88,20,20,new Se(56,new xe(4,144))),new t(20,96,96,22,22,new Se(68,new xe(4,174))),new t(21,104,104,24,24,new Se(56,new xe(6,136))),new t(22,120,120,18,18,new Se(68,new xe(6,175))),new t(23,132,132,20,20,new Se(62,new xe(8,163))),new t(24,144,144,22,22,new Se(62,new xe(8,156),new xe(2,155))),new t(25,8,18,6,16,new Se(7,new xe(1,5))),new t(26,8,32,6,14,new Se(11,new xe(1,10))),new t(27,12,26,10,24,new Se(14,new xe(1,16))),new t(28,12,36,10,16,new Se(18,new xe(1,22))),new t(29,16,36,14,16,new Se(24,new xe(1,32))),new t(30,16,48,14,22,new Se(28,new xe(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),r_=function(){function t(e){var n=e.getHeight();if(n<8||n>144||n&1)throw new Z;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new An(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var n=e.getHeight(),r=e.getWidth();return n_.getVersionForDimensions(n,r)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,r=4,o=0,i=this.mappingBitMatrix.getHeight(),a=this.mappingBitMatrix.getWidth(),s=!1,l=!1,u=!1,f=!1;do if(r===i&&o===0&&!s)e[n++]=this.readCorner1(i,a)&255,r-=2,o+=2,s=!0;else if(r===i-2&&o===0&&a&3&&!l)e[n++]=this.readCorner2(i,a)&255,r-=2,o+=2,l=!0;else if(r===i+4&&o===2&&!(a&7)&&!u)e[n++]=this.readCorner3(i,a)&255,r-=2,o+=2,u=!0;else if(r===i-2&&o===0&&(a&7)===4&&!f)e[n++]=this.readCorner4(i,a)&255,r-=2,o+=2,f=!0;else{do r<i&&o>=0&&!this.readMappingMatrix.get(o,r)&&(e[n++]=this.readUtah(r,o,i,a)&255),r-=2,o+=2;while(r>=0&&o<a);r+=1,o+=3;do r>=0&&o<a&&!this.readMappingMatrix.get(o,r)&&(e[n++]=this.readUtah(r,o,i,a)&255),r+=2,o-=2;while(r<i&&o>=0);r+=3,o+=1}while(r<i||o<a);if(n!==this.version.getTotalCodewords())throw new Z;return e},t.prototype.readModule=function(e,n,r,o){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=o,e+=4-(o+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},t.prototype.readUtah=function(e,n,r,o){var i=0;return this.readModule(e-2,n-2,r,o)&&(i|=1),i<<=1,this.readModule(e-2,n-1,r,o)&&(i|=1),i<<=1,this.readModule(e-1,n-2,r,o)&&(i|=1),i<<=1,this.readModule(e-1,n-1,r,o)&&(i|=1),i<<=1,this.readModule(e-1,n,r,o)&&(i|=1),i<<=1,this.readModule(e,n-2,r,o)&&(i|=1),i<<=1,this.readModule(e,n-1,r,o)&&(i|=1),i<<=1,this.readModule(e,n,r,o)&&(i|=1),i},t.prototype.readCorner1=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.readCorner2=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner3=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner4=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new se("Dimension of bitMatrix must match the version size");for(var o=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),a=n/o|0,s=r/i|0,l=a*o,u=s*i,f=new An(u,l),d=0;d<a;++d)for(var p=d*o,g=0;g<s;++g)for(var v=g*i,y=0;y<o;++y)for(var w=d*(o+2)+1+y,x=p+y,m=0;m<i;++m){var _=g*(i+2)+1+m;if(e.get(_,w)){var S=v+m;f.set(S,x)}}return f},t}(),Od=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o_=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n){var r,o,i,a,s=n.getECBlocks(),l=0,u=s.getECBlocks();try{for(var f=Od(u),d=f.next();!d.done;d=f.next()){var p=d.value;l+=p.getCount()}}catch(Ee){r={error:Ee}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}var g=new Array(l),v=0;try{for(var y=Od(u),w=y.next();!w.done;w=y.next())for(var p=w.value,x=0;x<p.getCount();x++){var m=p.getDataCodewords(),_=s.getECCodewords()+m;g[v++]=new t(m,new Uint8Array(_))}}catch(Ee){i={error:Ee}}finally{try{w&&!w.done&&(a=y.return)&&a.call(y)}finally{if(i)throw i.error}}for(var S=g[0].codewords.length,A=S-s.getECCodewords(),R=A-1,N=0,x=0;x<R;x++)for(var M=0;M<v;M++)g[M].codewords[x]=e[N++];for(var F=n.getVersionNumber()===24,k=F?8:v,M=0;M<k;M++)g[M].codewords[A-1]=e[N++];for(var $=g[0].codewords.length,x=A;x<$;x++)for(var M=0;M<v;M++){var X=F?(M+8)%v:M,te=F&&X>7?x-1:x;g[X].codewords[te]=e[N++]}if(N!==e.length)throw new se;return g},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),tg=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new se(""+e);var n=0,r=this.bitOffset,o=this.byteOffset,i=this.bytes;if(r>0){var a=8-r,s=e<a?e:a,l=a-s,u=255>>8-s<<l;n=(i[o]&u)>>l,e-=s,r+=s,r===8&&(r=0,o++)}if(e>0){for(;e>=8;)n=n<<8|i[o]&255,o++,e-=8;if(e>0){var l=8-e,u=255>>l<<l;n=n<<e|(i[o]&u)>>l,r+=e}}return this.bitOffset=r,this.byteOffset=o,n},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Ze;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ze||(Ze={}));var i_=function(){function t(){}return t.decode=function(e){var n=new tg(e),r=new fe,o=new fe,i=new Array,a=Ze.ASCII_ENCODE;do if(a===Ze.ASCII_ENCODE)a=this.decodeAsciiSegment(n,r,o);else{switch(a){case Ze.C40_ENCODE:this.decodeC40Segment(n,r);break;case Ze.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case Ze.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case Ze.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case Ze.BASE256_ENCODE:this.decodeBase256Segment(n,r,i);break;default:throw new Z}a=Ze.ASCII_ENCODE}while(a!==Ze.PAD_ENCODE&&n.available()>0);return o.length()>0&&r.append(o.toString()),new hs(e,r.toString(),i.length===0?null:i,null)},t.decodeAsciiSegment=function(e,n,r){var o=!1;do{var i=e.readBits(8);if(i===0)throw new Z;if(i<=128)return o&&(i+=128),n.append(String.fromCharCode(i-1)),Ze.ASCII_ENCODE;if(i===129)return Ze.PAD_ENCODE;if(i<=229){var a=i-130;a<10&&n.append("0"),n.append(""+a)}else switch(i){case 230:return Ze.C40_ENCODE;case 231:return Ze.BASE256_ENCODE;case 232:n.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:o=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return Ze.ANSIX12_ENCODE;case 239:return Ze.TEXT_ENCODE;case 240:return Ze.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new Z;break}}while(e.available()>0);return Ze.ASCII_ENCODE},t.decodeC40Segment=function(e,n){var r=!1,o=[],i=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),o);for(var s=0;s<3;s++){var l=o[s];switch(i){case 0:if(l<3)i=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u)}else throw new Z;break;case 1:r?(n.append(String.fromCharCode(l+128)),r=!1):n.append(String.fromCharCode(l)),i=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u)}else switch(l){case 27:n.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new Z}i=0;break;case 3:r?(n.append(String.fromCharCode(l+224)),r=!1):n.append(String.fromCharCode(l+96)),i=0;break;default:throw new Z}}}while(e.available()>0)},t.decodeTextSegment=function(e,n){var r=!1,o=[],i=0;do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),o);for(var s=0;s<3;s++){var l=o[s];switch(i){case 0:if(l<3)i=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u)}else throw new Z;break;case 1:r?(n.append(String.fromCharCode(l+128)),r=!1):n.append(String.fromCharCode(l)),i=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u)}else switch(l){case 27:n.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new Z}i=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u),i=0}else throw new Z;break;default:throw new Z}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,n){var r=[];do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),r);for(var i=0;i<3;i++){var a=r[i];switch(a){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(a<14)n.append(String.fromCharCode(a+44));else if(a<40)n.append(String.fromCharCode(a+51));else throw new Z;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,n,r){var o=(e<<8)+n-1,i=Math.floor(o/1600);r[0]=i,o-=i*1600,i=Math.floor(o/40),r[1]=i,r[2]=o-i*40},t.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var o=e.readBits(6);if(o===31){var i=8-e.getBitOffset();i!==8&&e.readBits(i);return}o&32||(o|=64),n.append(String.fromCharCode(o))}}while(e.available()>0)},t.decodeBase256Segment=function(e,n,r){var o=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),o++),a;if(i===0?a=e.available()/8|0:i<250?a=i:a=250*(i-249)+this.unrandomize255State(e.readBits(8),o++),a<0)throw new Z;for(var s=new Uint8Array(a),l=0;l<a;l++){if(e.available()<8)throw new Z;s[l]=this.unrandomize255State(e.readBits(8),o++)}r.push(s);try{n.append(en.decode(s,pe.ISO88591))}catch(u){throw new Pi("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,n){var r=149*n%255+1,o=e-r;return o>=0?o:o+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)],t}(),a_=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},s_=function(){function t(){this.rsDecoder=new ps(kt.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var n,r,o=new r_(e),i=o.getVersion(),a=o.readCodewords(),s=o_.getDataBlocks(a,i),l=0;try{for(var u=a_(s),f=u.next();!f.done;f=u.next()){var d=f.value;l+=d.getNumDataCodewords()}}catch(_){n={error:_}}finally{try{f&&!f.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}for(var p=new Uint8Array(l),g=s.length,v=0;v<g;v++){var y=s[v],w=y.getCodewords(),x=y.getNumDataCodewords();this.correctErrors(w,x);for(var m=0;m<x;m++)p[m*g+v]=w[m]}return i_.decode(p)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new ut}for(var o=0;o<n;o++)e[o]=r[o]},t}(),l_=function(){function t(e){this.image=e,this.rectangleDetector=new lu(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new V;n=this.shiftToModuleCenter(n);var r=n[0],o=n[1],i=n[2],a=n[3],s=this.transitionsBetween(r,a)+1,l=this.transitionsBetween(i,a)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var u=t.sampleGrid(this.image,r,o,i,a,s,l);return new Tf(u,[r,o,i,a])},t.shiftPoint=function(e,n,r){var o=(n.getX()-e.getX())/(r+1),i=(n.getY()-e.getY())/(r+1);return new ne(e.getX()+o,e.getY()+i)},t.moveAway=function(e,n,r){var o=e.getX(),i=e.getY();return o<n?o-=1:o+=1,i<r?i-=1:i+=1,new ne(o,i)},t.prototype.detectSolid1=function(e){var n=e[0],r=e[1],o=e[3],i=e[2],a=this.transitionsBetween(n,r),s=this.transitionsBetween(r,o),l=this.transitionsBetween(o,i),u=this.transitionsBetween(i,n),f=a,d=[i,n,r,o];return f>s&&(f=s,d[0]=n,d[1]=r,d[2]=o,d[3]=i),f>l&&(f=l,d[0]=r,d[1]=o,d[2]=i,d[3]=n),f>u&&(d[0]=o,d[1]=i,d[2]=n,d[3]=r),d},t.prototype.detectSolid2=function(e){var n=e[0],r=e[1],o=e[2],i=e[3],a=this.transitionsBetween(n,i),s=t.shiftPoint(r,o,(a+1)*4),l=t.shiftPoint(o,r,(a+1)*4),u=this.transitionsBetween(s,n),f=this.transitionsBetween(l,i);return u<f?(e[0]=n,e[1]=r,e[2]=o,e[3]=i):(e[0]=r,e[1]=o,e[2]=i,e[3]=n),e},t.prototype.correctTopRight=function(e){var n=e[0],r=e[1],o=e[2],i=e[3],a=this.transitionsBetween(n,i),s=this.transitionsBetween(r,i),l=t.shiftPoint(n,r,(s+1)*4),u=t.shiftPoint(o,r,(a+1)*4);a=this.transitionsBetween(l,i),s=this.transitionsBetween(u,i);var f=new ne(i.getX()+(o.getX()-r.getX())/(a+1),i.getY()+(o.getY()-r.getY())/(a+1)),d=new ne(i.getX()+(n.getX()-r.getX())/(s+1),i.getY()+(n.getY()-r.getY())/(s+1));if(!this.isValid(f))return this.isValid(d)?d:null;if(!this.isValid(d))return f;var p=this.transitionsBetween(l,f)+this.transitionsBetween(u,f),g=this.transitionsBetween(l,d)+this.transitionsBetween(u,d);return p>g?f:d},t.prototype.shiftToModuleCenter=function(e){var n=e[0],r=e[1],o=e[2],i=e[3],a=this.transitionsBetween(n,i)+1,s=this.transitionsBetween(o,i)+1,l=t.shiftPoint(n,r,s*4),u=t.shiftPoint(o,r,a*4);a=this.transitionsBetween(l,i)+1,s=this.transitionsBetween(u,i)+1,(a&1)===1&&(a+=1),(s&1)===1&&(s+=1);var f=(n.getX()+r.getX()+o.getX()+i.getX())/4,d=(n.getY()+r.getY()+o.getY()+i.getY())/4;n=t.moveAway(n,f,d),r=t.moveAway(r,f,d),o=t.moveAway(o,f,d),i=t.moveAway(i,f,d);var p,g;return l=t.shiftPoint(n,r,s*4),l=t.shiftPoint(l,i,a*4),p=t.shiftPoint(r,n,s*4),p=t.shiftPoint(p,o,a*4),u=t.shiftPoint(o,i,s*4),u=t.shiftPoint(u,r,a*4),g=t.shiftPoint(i,o,s*4),g=t.shiftPoint(g,n,a*4),[l,p,u,g]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,n,r,o,i,a,s){var l=If.getInstance();return l.sampleGrid(e,a,s,.5,.5,a-.5,.5,a-.5,s-.5,.5,s-.5,n.getX(),n.getY(),i.getX(),i.getY(),o.getX(),o.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(e,n){var r=Math.trunc(e.getX()),o=Math.trunc(e.getY()),i=Math.trunc(n.getX()),a=Math.trunc(n.getY()),s=Math.abs(a-o)>Math.abs(i-r);if(s){var l=r;r=o,o=l,l=i,i=a,a=l}for(var u=Math.abs(i-r),f=Math.abs(a-o),d=-u/2,p=o<a?1:-1,g=r<i?1:-1,v=0,y=this.image.get(s?o:r,s?r:o),w=r,x=o;w!==i;w+=g){var m=this.image.get(s?x:w,s?w:x);if(m!==y&&(v++,y=m),d+=f,d>0){if(x===a)break;x+=p,d-=u}}return v},t}(),cu=function(){function t(){this.decoder=new s_}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r,o;if(n!=null&&n.has(Ge.PURE_BARCODE)){var i=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(i),o=t.NO_POINTS}else{var a=new l_(e.getBlackMatrix()).detect();r=this.decoder.decode(a.getBits()),o=a.getPoints()}var s=r.getRawBytes(),l=new St(r.getText(),s,8*s.length,o,ae.DATA_MATRIX,Me.currentTimeMillis()),u=r.getByteSegments();u!=null&&l.putMetadata(gt.BYTE_SEGMENTS,u);var f=r.getECLevel();return f!=null&&l.putMetadata(gt.ERROR_CORRECTION_LEVEL,f),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new V;var o=this.moduleSize(n,e),i=n[1],a=r[1],s=n[0],l=r[0],u=(l-s+1)/o,f=(a-i+1)/o;if(u<=0||f<=0)throw new V;var d=o/2;i+=d,s+=d;for(var p=new An(u,f),g=0;g<f;g++)for(var v=i+g*o,y=0;y<u;y++)e.get(s+y*o,v)&&p.set(y,g);return p},t.moduleSize=function(e,n){for(var r=n.getWidth(),o=e[0],i=e[1];o<r&&n.get(o,i);)o++;if(o===r)throw new V;var a=o-e[0];if(a===0)throw new V;return a},t.NO_POINTS=[],t}(),u_=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){u_(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new cu,n)||this}return e})(Co);var eo;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(eo||(eo={}));var f_=function(){function t(e,n,r){this.value=e,this.stringValue=n,this.bits=r,t.FOR_BITS.set(r,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new sn(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new se;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(eo.L,"L",1),t.M=new t(eo.M,"M",0),t.Q=new t(eo.Q,"Q",3),t.H=new t(eo.H,"H",2),t}(),c_=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ng=function(){function t(e){this.errorCorrectionLevel=f_.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,n){return de.bitCount(e^n)},t.decodeFormatInformation=function(e,n){var r=t.doDecodeFormatInformation(e,n);return r!==null?r:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,n^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,n){var r,o,i=Number.MAX_SAFE_INTEGER,a=0;try{for(var s=c_(t.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var u=l.value,f=u[0];if(f===e||f===n)return new t(u[1]);var d=t.numBitsDiffering(e,f);d<i&&(a=u[1],i=d),e!==n&&(d=t.numBitsDiffering(n,f),d<i&&(a=u[1],i=d))}}catch(p){r={error:p}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return i<=3?new t(a):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),d_=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L=function(){function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,n,r=0,o=this.ecBlocks;try{for(var i=d_(o),a=i.next();!a.done;a=i.next()){var s=a.value;r+=s.getCount()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),T=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),h_=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rr=function(){function t(e,n){for(var r,o,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=i;var s=0,l=i[0].getECCodewordsPerBlock(),u=i[0].getECBlocks();try{for(var f=h_(u),d=f.next();!d.done;d=f.next()){var p=d.value;s+=p.getCount()*(p.getDataCodewords()+l)}}catch(g){r={error:g}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new Z;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Z}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new se;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,r=0,o=0;o<t.VERSION_DECODE_INFO.length;o++){var i=t.VERSION_DECODE_INFO[o];if(i===e)return t.getVersionForNumber(o+7);var a=ng.numBitsDiffering(e,i);a<n&&(r=o+7,n=a)}return n<=3?t.getVersionForNumber(r):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new An(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,o=0;o<r;o++)for(var i=this.alignmentPatternCenters[o]-2,a=0;a<r;a++)o===0&&(a===0||a===r-1)||o===r-1&&a===0||n.setRegion(this.alignmentPatternCenters[a]-2,i,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new L(7,new T(1,19)),new L(10,new T(1,16)),new L(13,new T(1,13)),new L(17,new T(1,9))),new t(2,Int32Array.from([6,18]),new L(10,new T(1,34)),new L(16,new T(1,28)),new L(22,new T(1,22)),new L(28,new T(1,16))),new t(3,Int32Array.from([6,22]),new L(15,new T(1,55)),new L(26,new T(1,44)),new L(18,new T(2,17)),new L(22,new T(2,13))),new t(4,Int32Array.from([6,26]),new L(20,new T(1,80)),new L(18,new T(2,32)),new L(26,new T(2,24)),new L(16,new T(4,9))),new t(5,Int32Array.from([6,30]),new L(26,new T(1,108)),new L(24,new T(2,43)),new L(18,new T(2,15),new T(2,16)),new L(22,new T(2,11),new T(2,12))),new t(6,Int32Array.from([6,34]),new L(18,new T(2,68)),new L(16,new T(4,27)),new L(24,new T(4,19)),new L(28,new T(4,15))),new t(7,Int32Array.from([6,22,38]),new L(20,new T(2,78)),new L(18,new T(4,31)),new L(18,new T(2,14),new T(4,15)),new L(26,new T(4,13),new T(1,14))),new t(8,Int32Array.from([6,24,42]),new L(24,new T(2,97)),new L(22,new T(2,38),new T(2,39)),new L(22,new T(4,18),new T(2,19)),new L(26,new T(4,14),new T(2,15))),new t(9,Int32Array.from([6,26,46]),new L(30,new T(2,116)),new L(22,new T(3,36),new T(2,37)),new L(20,new T(4,16),new T(4,17)),new L(24,new T(4,12),new T(4,13))),new t(10,Int32Array.from([6,28,50]),new L(18,new T(2,68),new T(2,69)),new L(26,new T(4,43),new T(1,44)),new L(24,new T(6,19),new T(2,20)),new L(28,new T(6,15),new T(2,16))),new t(11,Int32Array.from([6,30,54]),new L(20,new T(4,81)),new L(30,new T(1,50),new T(4,51)),new L(28,new T(4,22),new T(4,23)),new L(24,new T(3,12),new T(8,13))),new t(12,Int32Array.from([6,32,58]),new L(24,new T(2,92),new T(2,93)),new L(22,new T(6,36),new T(2,37)),new L(26,new T(4,20),new T(6,21)),new L(28,new T(7,14),new T(4,15))),new t(13,Int32Array.from([6,34,62]),new L(26,new T(4,107)),new L(22,new T(8,37),new T(1,38)),new L(24,new T(8,20),new T(4,21)),new L(22,new T(12,11),new T(4,12))),new t(14,Int32Array.from([6,26,46,66]),new L(30,new T(3,115),new T(1,116)),new L(24,new T(4,40),new T(5,41)),new L(20,new T(11,16),new T(5,17)),new L(24,new T(11,12),new T(5,13))),new t(15,Int32Array.from([6,26,48,70]),new L(22,new T(5,87),new T(1,88)),new L(24,new T(5,41),new T(5,42)),new L(30,new T(5,24),new T(7,25)),new L(24,new T(11,12),new T(7,13))),new t(16,Int32Array.from([6,26,50,74]),new L(24,new T(5,98),new T(1,99)),new L(28,new T(7,45),new T(3,46)),new L(24,new T(15,19),new T(2,20)),new L(30,new T(3,15),new T(13,16))),new t(17,Int32Array.from([6,30,54,78]),new L(28,new T(1,107),new T(5,108)),new L(28,new T(10,46),new T(1,47)),new L(28,new T(1,22),new T(15,23)),new L(28,new T(2,14),new T(17,15))),new t(18,Int32Array.from([6,30,56,82]),new L(30,new T(5,120),new T(1,121)),new L(26,new T(9,43),new T(4,44)),new L(28,new T(17,22),new T(1,23)),new L(28,new T(2,14),new T(19,15))),new t(19,Int32Array.from([6,30,58,86]),new L(28,new T(3,113),new T(4,114)),new L(26,new T(3,44),new T(11,45)),new L(26,new T(17,21),new T(4,22)),new L(26,new T(9,13),new T(16,14))),new t(20,Int32Array.from([6,34,62,90]),new L(28,new T(3,107),new T(5,108)),new L(26,new T(3,41),new T(13,42)),new L(30,new T(15,24),new T(5,25)),new L(28,new T(15,15),new T(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new L(28,new T(4,116),new T(4,117)),new L(26,new T(17,42)),new L(28,new T(17,22),new T(6,23)),new L(30,new T(19,16),new T(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new L(28,new T(2,111),new T(7,112)),new L(28,new T(17,46)),new L(30,new T(7,24),new T(16,25)),new L(24,new T(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new L(30,new T(4,121),new T(5,122)),new L(28,new T(4,47),new T(14,48)),new L(30,new T(11,24),new T(14,25)),new L(30,new T(16,15),new T(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new L(30,new T(6,117),new T(4,118)),new L(28,new T(6,45),new T(14,46)),new L(30,new T(11,24),new T(16,25)),new L(30,new T(30,16),new T(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new L(26,new T(8,106),new T(4,107)),new L(28,new T(8,47),new T(13,48)),new L(30,new T(7,24),new T(22,25)),new L(30,new T(22,15),new T(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new L(28,new T(10,114),new T(2,115)),new L(28,new T(19,46),new T(4,47)),new L(28,new T(28,22),new T(6,23)),new L(30,new T(33,16),new T(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new L(30,new T(8,122),new T(4,123)),new L(28,new T(22,45),new T(3,46)),new L(30,new T(8,23),new T(26,24)),new L(30,new T(12,15),new T(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new L(30,new T(3,117),new T(10,118)),new L(28,new T(3,45),new T(23,46)),new L(30,new T(4,24),new T(31,25)),new L(30,new T(11,15),new T(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new L(30,new T(7,116),new T(7,117)),new L(28,new T(21,45),new T(7,46)),new L(30,new T(1,23),new T(37,24)),new L(30,new T(19,15),new T(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new L(30,new T(5,115),new T(10,116)),new L(28,new T(19,47),new T(10,48)),new L(30,new T(15,24),new T(25,25)),new L(30,new T(23,15),new T(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new L(30,new T(13,115),new T(3,116)),new L(28,new T(2,46),new T(29,47)),new L(30,new T(42,24),new T(1,25)),new L(30,new T(23,15),new T(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new L(30,new T(17,115)),new L(28,new T(10,46),new T(23,47)),new L(30,new T(10,24),new T(35,25)),new L(30,new T(19,15),new T(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new L(30,new T(17,115),new T(1,116)),new L(28,new T(14,46),new T(21,47)),new L(30,new T(29,24),new T(19,25)),new L(30,new T(11,15),new T(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new L(30,new T(13,115),new T(6,116)),new L(28,new T(14,46),new T(23,47)),new L(30,new T(44,24),new T(7,25)),new L(30,new T(59,16),new T(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new L(30,new T(12,121),new T(7,122)),new L(28,new T(12,47),new T(26,48)),new L(30,new T(39,24),new T(14,25)),new L(30,new T(22,15),new T(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new L(30,new T(6,121),new T(14,122)),new L(28,new T(6,47),new T(34,48)),new L(30,new T(46,24),new T(10,25)),new L(30,new T(2,15),new T(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new L(30,new T(17,122),new T(4,123)),new L(28,new T(29,46),new T(14,47)),new L(30,new T(49,24),new T(10,25)),new L(30,new T(24,15),new T(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new L(30,new T(4,122),new T(18,123)),new L(28,new T(13,46),new T(32,47)),new L(30,new T(48,24),new T(14,25)),new L(30,new T(42,15),new T(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new L(30,new T(20,117),new T(4,118)),new L(28,new T(40,47),new T(7,48)),new L(30,new T(43,24),new T(22,25)),new L(30,new T(10,15),new T(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new L(30,new T(19,118),new T(6,119)),new L(28,new T(18,47),new T(31,48)),new L(30,new T(34,24),new T(34,25)),new L(30,new T(20,15),new T(61,16)))],t}(),at;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(at||(at={}));var kd=function(){function t(e,n){this.value=e,this.isMasked=n}return t.prototype.unmaskBitMatrix=function(e,n){for(var r=0;r<n;r++)for(var o=0;o<n;o++)this.isMasked(r,o)&&e.flip(o,r)},t.values=new Map([[at.DATA_MASK_000,new t(at.DATA_MASK_000,function(e,n){return(e+n&1)===0})],[at.DATA_MASK_001,new t(at.DATA_MASK_001,function(e,n){return(e&1)===0})],[at.DATA_MASK_010,new t(at.DATA_MASK_010,function(e,n){return n%3===0})],[at.DATA_MASK_011,new t(at.DATA_MASK_011,function(e,n){return(e+n)%3===0})],[at.DATA_MASK_100,new t(at.DATA_MASK_100,function(e,n){return(Math.floor(e/2)+Math.floor(n/3)&1)===0})],[at.DATA_MASK_101,new t(at.DATA_MASK_101,function(e,n){return e*n%6===0})],[at.DATA_MASK_110,new t(at.DATA_MASK_110,function(e,n){return e*n%6<3})],[at.DATA_MASK_111,new t(at.DATA_MASK_111,function(e,n){return(e+n+e*n%3&1)===0})]]),t}(),p_=function(){function t(e){var n=e.getHeight();if(n<21||(n&3)!==1)throw new Z;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var o=this.bitMatrix.getHeight(),i=0,a=o-7,r=o-1;r>=a;r--)i=this.copyBit(8,r,i);for(var n=o-8;n<o;n++)i=this.copyBit(n,8,i);if(this.parsedFormatInfo=ng.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Z},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Rr.getVersionForNumber(n);for(var r=0,o=e-11,i=5;i>=0;i--)for(var a=e-9;a>=o;a--)r=this.copyBit(a,i,r);var s=Rr.decodeVersionInformation(r);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;r=0;for(var a=5;a>=0;a--)for(var i=e-9;i>=o;i--)r=this.copyBit(a,i,r);if(s=Rr.decodeVersionInformation(r),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new Z},t.prototype.copyBit=function(e,n,r){var o=this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n);return o?r<<1|1:r<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),r=kd.values.get(e.getDataMask()),o=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,o);for(var i=n.buildFunctionPattern(),a=!0,s=new Uint8Array(n.getTotalCodewords()),l=0,u=0,f=0,d=o-1;d>0;d-=2){d===6&&d--;for(var p=0;p<o;p++)for(var g=a?o-1-p:p,v=0;v<2;v++)i.get(d-v,g)||(f++,u<<=1,this.bitMatrix.get(d-v,g)&&(u|=1),f===8&&(s[l++]=u,f=0,u=0));a=!a}if(l!==n.getTotalCodewords())throw new Z;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=kd.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,r=e.getWidth();n<r;n++)for(var o=n+1,i=e.getHeight();o<i;o++)e.get(n,o)!==e.get(o,n)&&(e.flip(o,n),e.flip(n,o))},t}(),Ld=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g_=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n,r){var o,i,a,s;if(e.length!==n.getTotalCodewords())throw new se;var l=n.getECBlocksForLevel(r),u=0,f=l.getECBlocks();try{for(var d=Ld(f),p=d.next();!p.done;p=d.next()){var g=p.value;u+=g.getCount()}}catch(te){o={error:te}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}var v=new Array(u),y=0;try{for(var w=Ld(f),x=w.next();!x.done;x=w.next())for(var g=x.value,m=0;m<g.getCount();m++){var _=g.getDataCodewords(),S=l.getECCodewordsPerBlock()+_;v[y++]=new t(_,new Uint8Array(S))}}catch(te){a={error:te}}finally{try{x&&!x.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}for(var A=v[0].codewords.length,R=v.length-1;R>=0;){var N=v[R].codewords.length;if(N===A)break;R--}R++;for(var M=A-l.getECCodewordsPerBlock(),F=0,m=0;m<M;m++)for(var k=0;k<y;k++)v[k].codewords[m]=e[F++];for(var k=R;k<y;k++)v[k].codewords[M]=e[F++];for(var $=v[0].codewords.length,m=M;m<$;m++)for(var k=0;k<y;k++){var X=k<R?m:m+1;v[k].codewords[X]=e[F++]}return v},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Xt;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Xt||(Xt={}));var Le=function(){function t(e,n,r,o){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=o,t.FOR_BITS.set(o,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var n=t.FOR_BITS.get(e);if(n===void 0)throw new se;return n},t.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber(),r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Xt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Xt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Xt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Xt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Xt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Xt.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Xt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Xt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Xt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Xt.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),v_=function(){function t(){}return t.decode=function(e,n,r,o){var i=new tg(e),a=new fe,s=new Array,l=-1,u=-1;try{var f=null,d=!1,p=void 0;do{if(i.available()<4)p=Le.TERMINATOR;else{var g=i.readBits(4);p=Le.forBits(g)}switch(p){case Le.TERMINATOR:break;case Le.FNC1_FIRST_POSITION:case Le.FNC1_SECOND_POSITION:d=!0;break;case Le.STRUCTURED_APPEND:if(i.available()<16)throw new Z;l=i.readBits(8),u=i.readBits(8);break;case Le.ECI:var v=t.parseECIValue(i);if(f=tt.getCharacterSetECIByValue(v),f===null)throw new Z;break;case Le.HANZI:var y=i.readBits(4),w=i.readBits(p.getCharacterCountBits(n));y===t.GB2312_SUBSET&&t.decodeHanziSegment(i,a,w);break;default:var x=i.readBits(p.getCharacterCountBits(n));switch(p){case Le.NUMERIC:t.decodeNumericSegment(i,a,x);break;case Le.ALPHANUMERIC:t.decodeAlphanumericSegment(i,a,x,d);break;case Le.BYTE:t.decodeByteSegment(i,a,x,f,s,o);break;case Le.KANJI:t.decodeKanjiSegment(i,a,x);break;default:throw new Z}break}}while(p!==Le.TERMINATOR)}catch{throw new Z}return new hs(e,a.toString(),s.length===0?null:s,r===null?null:r.toString(),l,u)},t.decodeHanziSegment=function(e,n,r){if(r*13>e.available())throw new Z;for(var o=new Uint8Array(2*r),i=0;r>0;){var a=e.readBits(13),s=a/96<<8&4294967295|a%96;s<959?s+=41377:s+=42657,o[i]=s>>8&255,o[i+1]=s&255,i+=2,r--}try{n.append(en.decode(o,pe.GB2312))}catch(l){throw new Z(l)}},t.decodeKanjiSegment=function(e,n,r){if(r*13>e.available())throw new Z;for(var o=new Uint8Array(2*r),i=0;r>0;){var a=e.readBits(13),s=a/192<<8&4294967295|a%192;s<7936?s+=33088:s+=49472,o[i]=s>>8,o[i+1]=s,i+=2,r--}try{n.append(en.decode(o,pe.SHIFT_JIS))}catch(l){throw new Z(l)}},t.decodeByteSegment=function(e,n,r,o,i,a){if(8*r>e.available())throw new Z;for(var s=new Uint8Array(r),l=0;l<r;l++)s[l]=e.readBits(8);var u;o===null?u=pe.guessEncoding(s,a):u=o.getName();try{n.append(en.decode(s,u))}catch(f){throw new Z(f)}i.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new Z;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,n,r,o){for(var i=n.length();r>1;){if(e.available()<11)throw new Z;var a=e.readBits(11);n.append(t.toAlphaNumericChar(Math.floor(a/45))),n.append(t.toAlphaNumericChar(a%45)),r-=2}if(r===1){if(e.available()<6)throw new Z;n.append(t.toAlphaNumericChar(e.readBits(6)))}if(o)for(var s=i;s<n.length();s++)n.charAt(s)==="%"&&(s<n.length()-1&&n.charAt(s+1)==="%"?n.deleteCharAt(s+1):n.setCharAt(s,String.fromCharCode(29)))},t.decodeNumericSegment=function(e,n,r){for(;r>=3;){if(e.available()<10)throw new Z;var o=e.readBits(10);if(o>=1e3)throw new Z;n.append(t.toAlphaNumericChar(Math.floor(o/100))),n.append(t.toAlphaNumericChar(Math.floor(o/10)%10)),n.append(t.toAlphaNumericChar(o%10)),r-=3}if(r===2){if(e.available()<7)throw new Z;var i=e.readBits(7);if(i>=100)throw new Z;n.append(t.toAlphaNumericChar(Math.floor(i/10))),n.append(t.toAlphaNumericChar(i%10))}else if(r===1){if(e.available()<4)throw new Z;var a=e.readBits(4);if(a>=10)throw new Z;n.append(t.toAlphaNumericChar(a))}},t.parseECIValue=function(e){var n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){var r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){var o=e.readBits(16);return(n&31)<<16&4294967295|o}throw new Z},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),rg=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},t}(),Fd=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m_=function(){function t(){this.rsDecoder=new ps(kt.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(An.parseFromBooleanArray(e),n)},t.prototype.decodeBitMatrix=function(e,n){var r=new p_(e),o=null;try{return this.decodeBitMatrixParser(r,n)}catch(a){o=a}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var i=this.decodeBitMatrixParser(r,n);return i.setOther(new rg(!0)),i}catch(a){throw o!==null?o:a}},t.prototype.decodeBitMatrixParser=function(e,n){var r,o,i,a,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),f=g_.getDataBlocks(u,s,l),d=0;try{for(var p=Fd(f),g=p.next();!g.done;g=p.next()){var v=g.value;d+=v.getNumDataCodewords()}}catch(R){r={error:R}}finally{try{g&&!g.done&&(o=p.return)&&o.call(p)}finally{if(r)throw r.error}}var y=new Uint8Array(d),w=0;try{for(var x=Fd(f),m=x.next();!m.done;m=x.next()){var v=m.value,_=v.getCodewords(),S=v.getNumDataCodewords();this.correctErrors(_,S);for(var A=0;A<S;A++)y[w++]=_[A]}}catch(R){i={error:R}}finally{try{m&&!m.done&&(a=x.return)&&a.call(x)}finally{if(i)throw i.error}}return v_.decode(y,s,l,n)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new ut}for(var o=0;o<n;o++)e[o]=r[o]},t}(),y_=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),x_=function(t){y_(e,t);function e(n,r,o){var i=t.call(this,n,r)||this;return i.estimatedModuleSize=o,i}return e.prototype.aboutEquals=function(n,r,o){if(Math.abs(r-this.getY())<=n&&Math.abs(o-this.getX())<=n){var i=Math.abs(n-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,o){var i=(this.getX()+r)/2,a=(this.getY()+n)/2,s=(this.estimatedModuleSize+o)/2;return new e(i,a,s)},e}(ne),__=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},E_=function(){function t(e,n,r,o,i,a,s){this.image=e,this.startX=n,this.startY=r,this.width=o,this.height=i,this.moduleSize=a,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,n=this.height,r=this.width,o=e+r,i=this.startY+n/2,a=new Int32Array(3),s=this.image,l=0;l<n;l++){var u=i+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));a[0]=0,a[1]=0,a[2]=0;for(var f=e;f<o&&!s.get(f,u);)f++;for(var d=0;f<o;){if(s.get(f,u))if(d===1)a[1]++;else if(d===2){if(this.foundPatternCross(a)){var p=this.handlePossibleCenter(a,u,f);if(p!==null)return p}a[0]=a[2],a[1]=1,a[2]=0,d=1}else a[++d]++;else d===1&&d++,a[d]++;f++}if(this.foundPatternCross(a)){var p=this.handlePossibleCenter(a,u,o);if(p!==null)return p}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V},t.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,r=n/2,o=0;o<3;o++)if(Math.abs(n-e[o])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,n,r,o){var i=this.image,a=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&i.get(n,l)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&!i.get(n,l)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=e+1;l<a&&i.get(n,l)&&s[1]<=r;)s[1]++,l++;if(l===a||s[1]>r)return NaN;for(;l<a&&!i.get(n,l)&&s[2]<=r;)s[2]++,l++;if(s[2]>r)return NaN;var u=s[0]+s[1]+s[2];return 5*Math.abs(u-o)>=2*o?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,n,r){var o,i,a=e[0]+e[1]+e[2],s=t.centerFromEnd(e,r),l=this.crossCheckVertical(n,s,2*e[1],a);if(!isNaN(l)){var u=(e[0]+e[1]+e[2])/3;try{for(var f=__(this.possibleCenters),d=f.next();!d.done;d=f.next()){var p=d.value;if(p.aboutEquals(u,l,s))return p.combineEstimate(l,s,u)}}catch(v){o={error:v}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}var g=new x_(s,l,u);this.possibleCenters.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return null},t}(),w_=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),C_=function(t){w_(e,t);function e(n,r,o,i){var a=t.call(this,n,r)||this;return a.estimatedModuleSize=o,a.count=i,i===void 0&&(a.count=1),a}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,r,o){if(Math.abs(r-this.getY())<=n&&Math.abs(o-this.getX())<=n){var i=Math.abs(n-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,o){var i=this.count+1,a=(this.count*this.getX()+r)/i,s=(this.count*this.getY()+n)/i,l=(this.count*this.estimatedModuleSize+o)/i;return new e(a,s,l,i)},e}(ne),A_=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Uo=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S_=function(){function t(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var n=e!=null&&e.get(Ge.TRY_HARDER)!==void 0,r=e!=null&&e.get(Ge.PURE_BARCODE)!==void 0,o=this.image,i=o.getHeight(),a=o.getWidth(),s=Math.floor(3*i/(4*t.MAX_MODULES));(s<t.MIN_SKIP||n)&&(s=t.MIN_SKIP);for(var l=!1,u=new Int32Array(5),f=s-1;f<i&&!l;f+=s){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var d=0,p=0;p<a;p++)if(o.get(p,f))(d&1)===1&&d++,u[d]++;else if(d&1)u[d]++;else if(d===4)if(t.foundPatternCross(u)){var g=this.handlePossibleCenter(u,f,p,r);if(g===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var v=this.findRowSkip();v>u[2]&&(f+=v-u[2]-s,p=a-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,d=3;continue}d=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,d=3;else u[++d]++;if(t.foundPatternCross(u)){var g=this.handlePossibleCenter(u,f,a,r);g===!0&&(s=u[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var y=this.selectBestPatterns();return ne.orderBestPatterns(y),new A_(y)},t.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var n=0,r=0;r<5;r++){var o=e[r];if(o===0)return!1;n+=o}if(n<7)return!1;var i=n/7,a=i/2;return Math.abs(i-e[0])<a&&Math.abs(i-e[1])<a&&Math.abs(3*i-e[2])<3*a&&Math.abs(i-e[3])<a&&Math.abs(i-e[4])<a},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,n,r,o){for(var i=this.getCrossCheckStateCount(),a=0,s=this.image;e>=a&&n>=a&&s.get(n-a,e-a);)i[2]++,a++;if(e<a||n<a)return!1;for(;e>=a&&n>=a&&!s.get(n-a,e-a)&&i[1]<=r;)i[1]++,a++;if(e<a||n<a||i[1]>r)return!1;for(;e>=a&&n>=a&&s.get(n-a,e-a)&&i[0]<=r;)i[0]++,a++;if(i[0]>r)return!1;var l=s.getHeight(),u=s.getWidth();for(a=1;e+a<l&&n+a<u&&s.get(n+a,e+a);)i[2]++,a++;if(e+a>=l||n+a>=u)return!1;for(;e+a<l&&n+a<u&&!s.get(n+a,e+a)&&i[3]<r;)i[3]++,a++;if(e+a>=l||n+a>=u||i[3]>=r)return!1;for(;e+a<l&&n+a<u&&s.get(n+a,e+a)&&i[4]<r;)i[4]++,a++;if(i[4]>=r)return!1;var f=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(f-o)<2*o&&t.foundPatternCross(i)},t.prototype.crossCheckVertical=function(e,n,r,o){for(var i=this.image,a=i.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&i.get(n,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(n,l)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&i.get(n,l)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=e+1;l<a&&i.get(n,l);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!i.get(n,l)&&s[3]<r;)s[3]++,l++;if(l===a||s[3]>=r)return NaN;for(;l<a&&i.get(n,l)&&s[4]<r;)s[4]++,l++;if(s[4]>=r)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-o)>=2*o?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.crossCheckHorizontal=function(e,n,r,o){for(var i=this.image,a=i.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&i.get(l,n);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!i.get(l,n)&&s[1]<=r;)s[1]++,l--;if(l<0||s[1]>r)return NaN;for(;l>=0&&i.get(l,n)&&s[0]<=r;)s[0]++,l--;if(s[0]>r)return NaN;for(l=e+1;l<a&&i.get(l,n);)s[2]++,l++;if(l===a)return NaN;for(;l<a&&!i.get(l,n)&&s[3]<r;)s[3]++,l++;if(l===a||s[3]>=r)return NaN;for(;l<a&&i.get(l,n)&&s[4]<r;)s[4]++,l++;if(s[4]>=r)return NaN;var u=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(u-o)>=o?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,n,r,o){var i=e[0]+e[1]+e[2]+e[3]+e[4],a=t.centerFromEnd(e,r),s=this.crossCheckVertical(n,Math.floor(a),e[2],i);if(!isNaN(s)&&(a=this.crossCheckHorizontal(Math.floor(a),Math.floor(s),e[2],i),!isNaN(a)&&(!o||this.crossCheckDiagonal(Math.floor(s),Math.floor(a),e[2],i)))){for(var l=i/7,u=!1,f=this.possibleCenters,d=0,p=f.length;d<p;d++){var g=f[d];if(g.aboutEquals(l,s,a)){f[d]=g.combineEstimate(s,a,l),u=!0;break}}if(!u){var v=new C_(a,s,l);f.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1},t.prototype.findRowSkip=function(){var e,n,r=this.possibleCenters.length;if(r<=1)return 0;var o=null;try{for(var i=Uo(this.possibleCenters),a=i.next();!a.done;a=i.next()){var s=a.value;if(s.getCount()>=t.CENTER_QUORUM)if(o==null)o=s;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-s.getX())-Math.abs(o.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,n,r,o,i=0,a=0,s=this.possibleCenters.length;try{for(var l=Uo(this.possibleCenters),u=l.next();!u.done;u=l.next()){var f=u.value;f.getCount()>=t.CENTER_QUORUM&&(i++,a+=f.getEstimatedModuleSize())}}catch(y){e={error:y}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}if(i<3)return!1;var d=a/s,p=0;try{for(var g=Uo(this.possibleCenters),v=g.next();!v.done;v=g.next()){var f=v.value;p+=Math.abs(f.getEstimatedModuleSize()-d)}}catch(y){r={error:y}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(r)throw r.error}}return p<=.05*a},t.prototype.selectBestPatterns=function(){var e,n,r,o,i=this.possibleCenters.length;if(i<3)throw new V;var a=this.possibleCenters,s;if(i>3){var l=0,u=0;try{for(var f=Uo(this.possibleCenters),d=f.next();!d.done;d=f.next()){var p=d.value,g=p.getEstimatedModuleSize();l+=g,u+=g*g}}catch(A){e={error:A}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}s=l/i;var v=Math.sqrt(u/i-s*s);a.sort(function(A,R){var N=Math.abs(R.getEstimatedModuleSize()-s),M=Math.abs(A.getEstimatedModuleSize()-s);return N<M?-1:N>M?1:0});for(var y=Math.max(.2*s,v),w=0;w<a.length&&a.length>3;w++){var x=a[w];Math.abs(x.getEstimatedModuleSize()-s)>y&&(a.splice(w,1),w--)}}if(a.length>3){var l=0;try{for(var m=Uo(a),_=m.next();!_.done;_=m.next()){var S=_.value;l+=S.getEstimatedModuleSize()}}catch(R){r={error:R}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(r)throw r.error}}s=l/a.length,a.sort(function(R,N){if(N.getCount()===R.getCount()){var M=Math.abs(N.getEstimatedModuleSize()-s),F=Math.abs(R.getEstimatedModuleSize()-s);return M<F?1:M>F?-1:0}else return N.getCount()-R.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),T_=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Ge.NEED_RESULT_POINT_CALLBACK);var n=new S_(this.image,this.resultPointCallback),r=n.find(e);return this.processFinderPatternInfo(r)},t.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),r=e.getTopRight(),o=e.getBottomLeft(),i=this.calculateModuleSize(n,r,o);if(i<1)throw new V("No pattern found in proccess finder.");var a=t.computeDimension(n,r,o,i),s=Rr.getProvisionalVersionForDimension(a),l=s.getDimensionForVersion()-7,u=null;if(s.getAlignmentPatternCenters().length>0)for(var f=r.getX()-n.getX()+o.getX(),d=r.getY()-n.getY()+o.getY(),p=1-3/l,g=Math.floor(n.getX()+p*(f-n.getX())),v=Math.floor(n.getY()+p*(d-n.getY())),y=4;y<=16;y<<=1)try{u=this.findAlignmentInRegion(i,g,v,y);break}catch(_){if(!(_ instanceof V))throw _}var w=t.createTransform(n,r,o,u,a),x=t.sampleGrid(this.image,w,a),m;return u===null?m=[o,n,r]:m=[o,n,r,u],new Tf(x,m)},t.createTransform=function(e,n,r,o,i){var a=i-3.5,s,l,u,f;return o!==null?(s=o.getX(),l=o.getY(),u=a-3,f=u):(s=n.getX()-e.getX()+r.getX(),l=n.getY()-e.getY()+r.getY(),u=a,f=a),Zp.quadrilateralToQuadrilateral(3.5,3.5,a,3.5,u,f,3.5,a,e.getX(),e.getY(),n.getX(),n.getY(),s,l,r.getX(),r.getY())},t.sampleGrid=function(e,n,r){var o=If.getInstance();return o.sampleGridWithTransform(e,r,r,n)},t.computeDimension=function(e,n,r,o){var i=me.round(ne.distance(e,n)/o),a=me.round(ne.distance(e,r)/o),s=Math.floor((i+a)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new V("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2},t.prototype.calculateModuleSizeOneWay=function(e,n){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?o/7:isNaN(o)?r/7:(r+o)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,r,o){var i=this.sizeOfBlackWhiteBlackRun(e,n,r,o),a=1,s=e-(r-e);s<0?(a=e/(e-s),s=0):s>=this.image.getWidth()&&(a=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(n-(o-n)*a);return a=1,l<0?(a=n/(n-l),l=0):l>=this.image.getHeight()&&(a=(this.image.getHeight()-1-n)/(l-n),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*a),i+=this.sizeOfBlackWhiteBlackRun(e,n,s,l),i-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,n,r,o){var i=Math.abs(o-n)>Math.abs(r-e);if(i){var a=e;e=n,n=a,a=r,r=o,o=a}for(var s=Math.abs(r-e),l=Math.abs(o-n),u=-s/2,f=e<r?1:-1,d=n<o?1:-1,p=0,g=r+f,v=e,y=n;v!==g;v+=f){var w=i?y:v,x=i?v:y;if(p===1===this.image.get(w,x)){if(p===2)return me.distance(v,y,e,n);p++}if(u+=l,u>0){if(y===o)break;y+=d,u-=s}}return p===2?me.distance(r+f,o,e,n):NaN},t.prototype.findAlignmentInRegion=function(e,n,r,o){var i=Math.floor(o*e),a=Math.max(0,n-i),s=Math.min(this.image.getWidth()-1,n+i);if(s-a<e*3)throw new V("Alignment top exceeds estimated module size.");var l=Math.max(0,r-i),u=Math.min(this.image.getHeight()-1,r+i);if(u-l<e*3)throw new V("Alignment bottom exceeds estimated module size.");var f=new E_(this.image,a,l,s-a,u-l,e,this.resultPointCallback);return f.find()},t}(),du=function(){function t(){this.decoder=new m_}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,n){var r,o;if(n!=null&&n.get(Ge.PURE_BARCODE)!==void 0){var i=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(i,n),o=t.NO_POINTS}else{var a=new T_(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(a.getBits(),n),o=a.getPoints()}r.getOther()instanceof rg&&r.getOther().applyMirroredCorrection(o);var s=new St(r.getText(),r.getRawBytes(),void 0,o,ae.QR_CODE,void 0),l=r.getByteSegments();l!==null&&s.putMetadata(gt.BYTE_SEGMENTS,l);var u=r.getECLevel();return u!==null&&s.putMetadata(gt.ERROR_CORRECTION_LEVEL,u),r.hasStructuredAppend()&&(s.putMetadata(gt.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),s.putMetadata(gt.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new V;var o=this.moduleSize(n,e),i=n[1],a=r[1],s=n[0],l=r[0];if(s>=l||i>=a)throw new V;if(a-i!==l-s&&(l=s+(a-i),l>=e.getWidth()))throw new V;var u=Math.round((l-s+1)/o),f=Math.round((a-i+1)/o);if(u<=0||f<=0)throw new V;if(f!==u)throw new V;var d=Math.floor(o/2);i+=d,s+=d;var p=s+Math.floor((u-1)*o)-l;if(p>0){if(p>d)throw new V;s-=p}var g=i+Math.floor((f-1)*o)-a;if(g>0){if(g>d)throw new V;i-=g}for(var v=new An(u,f),y=0;y<f;y++)for(var w=i+Math.floor(y*o),x=0;x<u;x++)e.get(s+Math.floor(x*o),w)&&v.set(x,y);return v},t.moduleSize=function(e,n){for(var r=n.getHeight(),o=n.getWidth(),i=e[0],a=e[1],s=!0,l=0;i<o&&a<r;){if(s!==n.get(i,a)){if(++l===5)break;s=!s}i++,a++}if(i===o||a===r)throw new V;return(i-e[0])/7},t.NO_POINTS=new Array,t}(),I_=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ge=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return me.sum(e)},t.toIntArray=function(e){var n,r;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var o=new Int32Array(e.length),i=0;try{for(var a=I_(e),s=a.next();!s.done;s=a.next()){var l=s.value;o[i++]=l}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o},t.getCodeword=function(e){var n=nt.binarySearch(t.SYMBOL_TABLE,e&262143);return n<0?-1:(t.CODEWORD_TABLE[n]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),N_=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),R_=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P_=function(){function t(){}return t.detectMultiple=function(e,n,r){var o=e.getBlackMatrix(),i=t.detect(r,o);return i.length||(o=o.clone(),o.rotate180(),i=t.detect(r,o)),new N_(o,i)},t.detect=function(e,n){for(var r,o,i=new Array,a=0,s=0,l=!1;a<n.getHeight();){var u=t.findVertices(n,a,s);if(u[0]==null&&u[3]==null){if(!l)break;l=!1,s=0;try{for(var f=(r=void 0,R_(i)),d=f.next();!d.done;d=f.next()){var p=d.value;p[1]!=null&&(a=Math.trunc(Math.max(a,p[1].getY()))),p[3]!=null&&(a=Math.max(a,Math.trunc(p[3].getY())))}}catch(g){r={error:g}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}a+=t.ROW_STEP;continue}if(l=!0,i.push(u),!e)break;u[2]!=null?(s=Math.trunc(u[2].getX()),a=Math.trunc(u[2].getY())):(s=Math.trunc(u[4].getX()),a=Math.trunc(u[4].getY()))}return i},t.findVertices=function(e,n,r){var o=e.getHeight(),i=e.getWidth(),a=new Array(8);return t.copyToResult(a,t.findRowsWithPattern(e,o,i,n,r,t.START_PATTERN),t.INDEXES_START_PATTERN),a[4]!=null&&(r=Math.trunc(a[4].getX()),n=Math.trunc(a[4].getY())),t.copyToResult(a,t.findRowsWithPattern(e,o,i,n,r,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),a},t.copyToResult=function(e,n,r){for(var o=0;o<r.length;o++)e[r[o]]=n[o]},t.findRowsWithPattern=function(e,n,r,o,i,a){for(var s=new Array(4),l=!1,u=new Int32Array(a.length);o<n;o+=t.ROW_STEP){var f=t.findGuardPattern(e,i,o,r,!1,a,u);if(f!=null){for(;o>0;){var d=t.findGuardPattern(e,i,--o,r,!1,a,u);if(d!=null)f=d;else{o++;break}}s[0]=new ne(f[0],o),s[1]=new ne(f[1],o),l=!0;break}}var p=o+1;if(l){for(var g=0,d=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);p<n;p++){var f=t.findGuardPattern(e,d[0],p,r,!1,a,u);if(f!=null&&Math.abs(d[0]-f[0])<t.MAX_PATTERN_DRIFT&&Math.abs(d[1]-f[1])<t.MAX_PATTERN_DRIFT)d=f,g=0;else{if(g>t.SKIPPED_ROW_COUNT_MAX)break;g++}}p-=g+1,s[2]=new ne(d[0],p),s[3]=new ne(d[1],p)}return p-o<t.BARCODE_MIN_HEIGHT&&nt.fill(s,null),s},t.findGuardPattern=function(e,n,r,o,i,a,s){nt.fillWithin(s,0,s.length,0);for(var l=n,u=0;e.get(l,r)&&l>0&&u++<t.MAX_PIXEL_DRIFT;)l--;for(var f=l,d=0,p=a.length,g=i;f<o;f++){var v=e.get(f,r);if(v!==g)s[d]++;else{if(d===p-1){if(t.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,f]);l+=s[0]+s[1],Me.arraycopy(s,2,s,0,d-1),s[d-1]=0,s[d]=0,d--}else d++;s[d]=1,g=!g}}return d===p-1&&t.patternMatchVariance(s,a,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,f-1]):null},t.patternMatchVariance=function(e,n,r){for(var o=e.length,i=0,a=0,s=0;s<o;s++)i+=e[s],a+=n[s];if(i<a)return 1/0;var l=i/a;r*=l;for(var u=0,f=0;f<o;f++){var d=e[f],p=n[f]*l,g=d>p?d-p:p-d;if(g>r)return 1/0;u+=g}return u/i},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),D_=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sr=function(){function t(e,n){if(n.length===0)throw new se;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var o=1;o<r&&n[o]===0;)o++;o===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-o),Me.arraycopy(n,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var n,r;if(e===0)return this.getCoefficient(0);if(e===1){var o=0;try{for(var i=D_(this.coefficients),a=i.next();!a.done;a=i.next()){var s=a.value;o=this.field.add(o,s)}}catch(d){n={error:d}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o}for(var l=this.coefficients[0],u=this.coefficients.length,f=1;f<u;f++)l=this.field.add(this.field.multiply(e,l),this.coefficients[f]);return l},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new se("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var o=n;n=r,r=o}var i=new Int32Array(r.length),a=r.length-n.length;Me.arraycopy(r,0,i,0,a);for(var s=a;s<r.length;s++)i[s]=this.field.add(n[s-a],r[s]);return new t(this.field,i)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new se("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new se("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,o=e.coefficients,i=o.length,a=new Int32Array(r+i-1),s=0;s<r;s++)for(var l=n[s],u=0;u<i;u++)a[s+u]=this.field.add(a[s+u],this.field.multiply(l,o[u]));return new t(this.field,a)},t.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new t(this.field,n)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var n=this.coefficients.length,r=new Int32Array(n),o=0;o<n;o++)r[o]=this.field.multiply(this.coefficients[o],e);return new t(this.field,r)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new se;if(n===0)return new t(this.field,new Int32Array([0]));for(var r=this.coefficients.length,o=new Int32Array(r+e),i=0;i<r;i++)o[i]=this.field.multiply(this.coefficients[i],n);return new t(this.field,o)},t.prototype.toString=function(){for(var e=new fe,n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},t}(),M_=function(){function t(){}return t.prototype.add=function(e,n){return(e+n)%this.modulus},t.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new se;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Jp;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),b_=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),O_=function(t){b_(e,t);function e(n,r){var o=t.call(this)||this;o.modulus=n,o.expTable=new Int32Array(n),o.logTable=new Int32Array(n);for(var i=1,a=0;a<n;a++)o.expTable[a]=i,i=i*r%n;for(var a=0;a<n-1;a++)o.logTable[o.expTable[a]]=a;return o.zero=new Sr(o,new Int32Array([0])),o.one=new Sr(o,new Int32Array([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new se;if(r===0)return this.zero;var o=new Int32Array(n+1);return o[0]=r,new Sr(this,o)},e.PDF417_GF=new e(ge.NUMBER_OF_CODEWORDS,3),e}(M_),k_=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L_=function(){function t(){this.field=O_.PDF417_GF}return t.prototype.decode=function(e,n,r){for(var o,i,a=new Sr(this.field,e),s=new Int32Array(n),l=!1,u=n;u>0;u--){var f=a.evaluateAt(this.field.exp(u));s[n-u]=f,f!==0&&(l=!0)}if(!l)return 0;var d=this.field.getOne();if(r!=null)try{for(var p=k_(r),g=p.next();!g.done;g=p.next()){var v=g.value,y=this.field.exp(e.length-1-v),w=new Sr(this.field,new Int32Array([this.field.subtract(0,y),1]));d=d.multiply(w)}}catch(M){o={error:M}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}for(var x=new Sr(this.field,s),m=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),x,n),_=m[0],S=m[1],A=this.findErrorLocations(_),R=this.findErrorMagnitudes(S,_,A),u=0;u<A.length;u++){var N=e.length-1-this.field.log(A[u]);if(N<0)throw ut.getChecksumInstance();e[N]=this.field.subtract(e[N],R[u])}return A.length},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var o=e;e=n,n=o}for(var i=e,a=n,s=this.field.getZero(),l=this.field.getOne();a.getDegree()>=Math.round(r/2);){var u=i,f=s;if(i=a,s=l,i.isZero())throw ut.getChecksumInstance();a=u;for(var d=this.field.getZero(),p=i.getCoefficient(i.getDegree()),g=this.field.inverse(p);a.getDegree()>=i.getDegree()&&!a.isZero();){var v=a.getDegree()-i.getDegree(),y=this.field.multiply(a.getCoefficient(a.getDegree()),g);d=d.add(this.field.buildMonomial(v,y)),a=a.subtract(i.multiplyByMonomial(v,y))}l=d.multiply(s).subtract(f).negative()}var w=l.getCoefficient(0);if(w===0)throw ut.getChecksumInstance();var x=this.field.inverse(w),m=l.multiply(x),_=a.multiply(x);return[m,_]},t.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),r=new Int32Array(n),o=0,i=1;i<this.field.getSize()&&o<n;i++)e.evaluateAt(i)===0&&(r[o]=this.field.inverse(i),o++);if(o!==n)throw ut.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(e,n,r){for(var o=n.getDegree(),i=new Int32Array(o),a=1;a<=o;a++)i[o-a]=this.field.multiply(a,n.getCoefficient(a));for(var s=new Sr(this.field,i),l=r.length,u=new Int32Array(l),a=0;a<l;a++){var f=this.field.inverse(r[a]),d=this.field.subtract(0,e.evaluateAt(f)),p=this.field.inverse(s.evaluateAt(f));u[a]=this.field.multiply(d,p)}return u},t}(),hu=function(){function t(e,n,r,o,i){e instanceof t?this.constructor_2(e):this.constructor_1(e,n,r,o,i)}return t.prototype.constructor_1=function(e,n,r,o,i){var a=n==null||r==null,s=o==null||i==null;if(a&&s)throw new V;a?(n=new ne(0,o.getY()),r=new ne(0,i.getY())):s&&(o=new ne(e.getWidth()-1,n.getY()),i=new ne(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=o,this.bottomRight=i,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(o.getX(),i.getX())),this.minY=Math.trunc(Math.min(n.getY(),o.getY())),this.maxY=Math.trunc(Math.max(r.getY(),i.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,n){return e==null?n:n==null?e:new t(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},t.prototype.addMissingRows=function(e,n,r){var o=this.topLeft,i=this.bottomLeft,a=this.topRight,s=this.bottomRight;if(e>0){var l=r?this.topLeft:this.topRight,u=Math.trunc(l.getY()-e);u<0&&(u=0);var f=new ne(l.getX(),u);r?o=f:a=f}if(n>0){var d=r?this.bottomLeft:this.bottomRight,p=Math.trunc(d.getY()+n);p>=this.image.getHeight()&&(p=this.image.getHeight()-1);var g=new ne(d.getX(),p);r?i=g:s=g}return new t(this.image,o,i,a,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),F_=function(){function t(e,n,r,o){this.columnCount=e,this.errorCorrectionLevel=o,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),Rf=function(){function t(){this.buffer=""}return t.form=function(e,n){var r=-1;function o(a,s,l,u,f,d){if(a==="%%")return"%";if(n[++r]!==void 0){a=u?parseInt(u.substr(1)):void 0;var p=f?parseInt(f.substr(1)):void 0,g;switch(d){case"s":g=n[r];break;case"c":g=n[r][0];break;case"f":g=parseFloat(n[r]).toFixed(a);break;case"p":g=parseFloat(n[r]).toPrecision(a);break;case"e":g=parseFloat(n[r]).toExponential(a);break;case"x":g=parseInt(n[r]).toString(p||16);break;case"d":g=parseFloat(parseInt(n[r],p||10).toPrecision(a)).toFixed(0);break}g=typeof g=="object"?JSON.stringify(g):(+g).toString(p);for(var v=parseInt(l),y=l&&l[0]+""=="0"?"0":" ";g.length<v;)g=s!==void 0?g+y:y+g;return g}}var i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,o)},t.prototype.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=t.form(e,n)},t.prototype.toString=function(){return this.buffer},t}(),B_=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},og=function(){function t(e){this.boundingBox=new hu(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(n!=null)return n;for(var r=1;r<t.MAX_NEARBY_DISTANCE;r++){var o=this.imageRowToCodewordIndex(e)-r;if(o>=0&&(n=this.codewords[o],n!=null)||(o=this.imageRowToCodewordIndex(e)+r,o<this.codewords.length&&(n=this.codewords[o],n!=null)))return n}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,n,r=new Rf,o=0;try{for(var i=B_(this.codewords),a=i.next();!a.done;a=i.next()){var s=a.value;if(s==null){r.format("%3d:    |   %n",o++);continue}r.format("%3d: %3d|%3d%n",o++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),U_=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},V_=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i},Jo=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)},t.prototype.getValue=function(){var e,n,r=-1,o=new Array,i=function(d,p){var g={getKey:function(){return d},getValue:function(){return p}};g.getValue()>r?(r=g.getValue(),o=[],o.push(g.getKey())):g.getValue()===r&&o.push(g.getKey())};try{for(var a=U_(this.values.entries()),s=a.next();!s.done;s=a.next()){var l=V_(s.value,2),u=l[0],f=l[1];i(u,f)}}catch(d){e={error:d}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return ge.toIntArray(o)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),G_=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),il=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bd=function(t){G_(e,t);function e(n,r){var o=t.call(this,n)||this;return o._isLeft=r,o}return e.prototype.setRowNumbers=function(){var n,r;try{for(var o=il(this.getCodewords()),i=o.next();!i.done;i=o.next()){var a=i.value;a!=null&&a.setRowNumberAsRowIndicatorColumn()}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);for(var o=this.getBoundingBox(),i=this._isLeft?o.getTopLeft():o.getTopRight(),a=this._isLeft?o.getBottomLeft():o.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=-1,f=1,d=0,p=s;p<l;p++)if(r[p]!=null){var g=r[p],v=g.getRowNumber()-u;if(v===0)d++;else if(v===1)f=Math.max(f,d),d=1,u=g.getRowNumber();else if(v<0||g.getRowNumber()>=n.getRowCount()||v>p)r[p]=null;else{var y=void 0;f>2?y=(f-2)*v:y=v;for(var w=y>=p,x=1;x<=y&&!w;x++)w=r[p-x]!=null;w?r[p]=null:(u=g.getRowNumber(),d=1)}}},e.prototype.getRowHeights=function(){var n,r,o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);var i=new Int32Array(o.getRowCount());try{for(var a=il(this.getCodewords()),s=a.next();!s.done;s=a.next()){var l=s.value;if(l!=null){var u=l.getRowNumber();if(u>=i.length)continue;i[u]++}}}catch(f){n={error:f}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var r=this.getBoundingBox(),o=this._isLeft?r.getTopLeft():r.getTopRight(),i=this._isLeft?r.getBottomLeft():r.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.getCodewords(),u=-1,f=a;f<s;f++)if(l[f]!=null){var d=l[f];d.setRowNumberAsRowIndicatorColumn();var p=d.getRowNumber()-u;p===0||(p===1?u=d.getRowNumber():d.getRowNumber()>=n.getRowCount()?l[f]=null:u=d.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var n,r,o=this.getCodewords(),i=new Jo,a=new Jo,s=new Jo,l=new Jo;try{for(var u=il(o),f=u.next();!f.done;f=u.next()){var d=f.value;if(d!=null){d.setRowNumberAsRowIndicatorColumn();var p=d.getValue()%30,g=d.getRowNumber();switch(this._isLeft||(g+=2),g%3){case 0:a.setValue(p*3+1);break;case 1:l.setValue(p/3),s.setValue(p%3);break;case 2:i.setValue(p+1);break}}}}catch(y){n={error:y}}finally{try{f&&!f.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(i.getValue().length===0||a.getValue().length===0||s.getValue().length===0||l.getValue().length===0||i.getValue()[0]<1||a.getValue()[0]+s.getValue()[0]<ge.MIN_ROWS_IN_BARCODE||a.getValue()[0]+s.getValue()[0]>ge.MAX_ROWS_IN_BARCODE)return null;var v=new F_(i.getValue()[0],a.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(o,v),v},e.prototype.removeIncorrectCodewords=function(n,r){for(var o=0;o<n.length;o++){var i=n[o];if(n[o]!=null){var a=i.getValue()%30,s=i.getRowNumber();if(s>r.getRowCount()){n[o]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:a*3+1!==r.getRowCountUpperPart()&&(n[o]=null);break;case 1:(Math.trunc(a/3)!==r.getErrorCorrectionLevel()||a%3!==r.getRowCountLowerPart())&&(n[o]=null);break;case 2:a+1!==r.getColumnCount()&&(n[o]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(og),H_=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},z_=function(){function t(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=ge.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var r=this.detectionResultColumns[n].getCodewords(),o=0;o<r.length;o++)r[o]!=null&&(r[o].hasValidRowNumber()||this.adjustRowNumbers(n,o,r));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(var o=1;o<=this.barcodeColumnCount;o++){var i=this.detectionResultColumns[o].getCodewords()[r];i!=null&&(i.setRowNumber(e[r].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[r]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var o=n[r].getRowNumber(),i=0,a=this.barcodeColumnCount+1;a>0&&i<this.ADJUST_ROW_NUMBER_SKIP;a--){var s=this.detectionResultColumns[a].getCodewords()[r];s!=null&&(i=t.adjustRowNumberIfValid(o,i,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var o=n[r].getRowNumber(),i=0,a=1;a<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;a++){var s=this.detectionResultColumns[a].getCodewords()[r];s!=null&&(i=t.adjustRowNumberIfValid(o,i,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n},t.prototype.adjustRowNumbers=function(e,n,r){var o,i;if(this.detectionResultColumns[e-1]!=null){var a=r[n],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=s[n],u[3]=l[n],n>0&&(u[0]=r[n-1],u[4]=s[n-1],u[5]=l[n-1]),n>1&&(u[8]=r[n-2],u[10]=s[n-2],u[11]=l[n-2]),n<r.length-1&&(u[1]=r[n+1],u[6]=s[n+1],u[7]=l[n+1]),n<r.length-2&&(u[9]=r[n+2],u[12]=s[n+2],u[13]=l[n+2]);try{for(var f=H_(u),d=f.next();!d.done;d=f.next()){var p=d.value;if(t.adjustRowNumber(a,p))return}}catch(g){o={error:g}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}}},t.adjustRowNumber=function(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new Rf,r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(var o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){n.format("    |   ");continue}var i=this.detectionResultColumns[o].getCodewords()[r];if(i==null){n.format("    |   ");continue}n.format(" %3d|%3d",i.getRowNumber(),i.getValue())}n.format("%n")}return n.toString()},t}(),W_=function(){function t(e,n,r,o){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(o)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),q_=function(){function t(){}return t.initialize=function(){for(var e=0;e<ge.SYMBOL_TABLE.length;e++)for(var n=ge.SYMBOL_TABLE[e],r=n&1,o=0;o<ge.BARS_IN_MODULE;o++){for(var i=0;(n&1)===r;)i+=1,n>>=1;r=n&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(ge.BARS_IN_MODULE)),t.RATIOS_TABLE[e][ge.BARS_IN_MODULE-o-1]=Math.fround(i/ge.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var n=t.getDecodedCodewordValue(t.sampleBitCounts(e));return n!==-1?n:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var n=me.sum(e),r=new Int32Array(ge.BARS_IN_MODULE),o=0,i=0,a=0;a<ge.MODULES_IN_CODEWORD;a++){var s=n/(2*ge.MODULES_IN_CODEWORD)+a*n/ge.MODULES_IN_CODEWORD;i+e[o]<=s&&(i+=e[o],o++),r[o]++}return r},t.getDecodedCodewordValue=function(e){var n=t.getBitValue(e);return ge.getCodeword(n)===-1?-1:n},t.getBitValue=function(e){for(var n=0,r=0;r<e.length;r++)for(var o=0;o<e[r];o++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)},t.getClosestDecodedValue=function(e){var n=me.sum(e),r=new Array(ge.BARS_IN_MODULE);if(n>1)for(var o=0;o<r.length;o++)r[o]=Math.fround(e[o]/n);var i=su.MAX_VALUE,a=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var l=0,u=t.RATIOS_TABLE[s],f=0;f<ge.BARS_IN_MODULE;f++){var d=Math.fround(u[f]-r[f]);if(l+=Math.fround(d*d),l>=i)break}l<i&&(i=l,a=ge.SYMBOL_TABLE[s])}return a},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(ge.SYMBOL_TABLE.length).map(function(e){return new Array(ge.BARS_IN_MODULE)}),t}(),$_=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),Ud=function(){function t(){}return t.parseLong=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t}(),Y_=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),X_=function(t){Y_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Vt),K_=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,n,r){if(e==null)throw new X_;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new Af;if(r===0)return;for(var o=0;o<r;o++)this.write(e[n+o])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),J_=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Z_=function(t){J_(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Vt),Q_=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),j_=function(t){Q_(e,t);function e(n){n===void 0&&(n=32);var r=t.call(this)||this;if(r.count=0,n<0)throw new se("Negative initial size: "+n);return r.buf=new Uint8Array(n),r}return e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var r=this.buf.length,o=r<<1;if(o-n<0&&(o=n),o<0){if(n<0)throw new Z_;o=de.MAX_VALUE}this.buf=nt.copyOfUint8Array(this.buf,o)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,r,o){if(r<0||r>n.length||o<0||r+o-n.length>0)throw new Af;this.ensureCapacity(this.count+o),Me.arraycopy(n,r,this.buf,this.count,o),this.count+=o},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return nt.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e}(K_),Pe;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Pe||(Pe={}));function ig(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var ji;function Yn(t){if(typeof ji>"u"&&(ji=ig()),ji===null)throw new Error("BigInt is not supported!");return ji(t)}function eE(){var t=[];t[0]=Yn(1);var e=Yn(900);t[1]=e;for(var n=2;n<16;n++)t[n]=t[n-1]*e;return t}var tE=function(){function t(){}return t.decode=function(e,n){var r=new fe(""),o=tt.ISO8859_1;r.enableDecoding(o);for(var i=1,a=e[i++],s=new $_;i<e[0];){switch(a){case t.TEXT_COMPACTION_MODE_LATCH:i=t.textCompaction(e,i,r);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:i=t.byteCompaction(a,e,o,i,r);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[i++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:i=t.numericCompaction(e,i,r);break;case t.ECI_CHARSET:tt.getCharacterSetECIByValue(e[i++]);break;case t.ECI_GENERAL_PURPOSE:i+=2;break;case t.ECI_USER_DEFINED:i++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=t.decodeMacroBlock(e,i,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new Z;default:i--,i=t.textCompaction(e,i,r);break}if(i<e.length)a=e[i++];else throw Z.getFormatInstance()}if(r.length()===0)throw Z.getFormatInstance();var l=new hs(null,r.toString(),null,n);return l.setOther(s),l},t.decodeMacroBlock=function(e,n,r){if(n+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Z.getFormatInstance();for(var o=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),i=0;i<t.NUMBER_OF_SEQUENCE_CODEWORDS;i++,n++)o[i]=e[n];r.setSegmentIndex(de.parseInt(t.decodeBase900toBase10(o,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var a=new fe;n=t.textCompaction(e,n,a),r.setFileId(a.toString());var s=-1;for(e[n]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=n+1);n<e[0];)switch(e[n]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new fe;n=t.textCompaction(e,n+1,l),r.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new fe;n=t.textCompaction(e,n+1,u),r.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var f=new fe;n=t.textCompaction(e,n+1,f),r.setAddressee(f.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var d=new fe;n=t.numericCompaction(e,n+1,d),r.setSegmentCount(de.parseInt(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var p=new fe;n=t.numericCompaction(e,n+1,p),r.setTimestamp(Ud.parseLong(p.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var g=new fe;n=t.numericCompaction(e,n+1,g),r.setChecksum(de.parseInt(g.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var v=new fe;n=t.numericCompaction(e,n+1,v),r.setFileSize(Ud.parseLong(v.toString()));break;default:throw Z.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw Z.getFormatInstance()}if(s!==-1){var y=n-s;r.isLastSegment()&&y--,r.setOptionalData(nt.copyOfRange(e,s,s+y))}return n},t.textCompaction=function(e,n,r){for(var o=new Int32Array((e[0]-n)*2),i=new Int32Array((e[0]-n)*2),a=0,s=!1;n<e[0]&&!s;){var l=e[n++];if(l<t.TEXT_COMPACTION_MODE_LATCH)o[a]=l/30,o[a+1]=l%30,a+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:o[a++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[a]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[n++],i[a]=l,a++;break}}return t.decodeTextCompaction(o,i,a,r),n},t.decodeTextCompaction=function(e,n,r,o){for(var i=Pe.ALPHA,a=Pe.ALPHA,s=0;s<r;){var l=e[s],u="";switch(i){case Pe.ALPHA:if(l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.LL:i=Pe.LOWER;break;case t.ML:i=Pe.MIXED;break;case t.PS:a=i,i=Pe.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Pe.ALPHA;break}break;case Pe.LOWER:if(l<26)u=String.fromCharCode(97+l);else switch(l){case 26:u=" ";break;case t.AS:a=i,i=Pe.ALPHA_SHIFT;break;case t.ML:i=Pe.MIXED;break;case t.PS:a=i,i=Pe.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Pe.ALPHA;break}break;case Pe.MIXED:if(l<t.PL)u=t.MIXED_CHARS[l];else switch(l){case t.PL:i=Pe.PUNCT;break;case 26:u=" ";break;case t.LL:i=Pe.LOWER;break;case t.AL:i=Pe.ALPHA;break;case t.PS:a=i,i=Pe.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Pe.ALPHA;break}break;case Pe.PUNCT:if(l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:i=Pe.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Pe.ALPHA;break}break;case Pe.ALPHA_SHIFT:if(i=a,l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:i=Pe.ALPHA;break}break;case Pe.PUNCT_SHIFT:if(i=a,l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:i=Pe.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(n[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:i=Pe.ALPHA;break}break}u!==""&&o.append(u),s++}},t.byteCompaction=function(e,n,r,o,i){var a=new j_,s=0,l=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var f=new Int32Array(6),d=n[o++];o<n[0]&&!u;)switch(f[s++]=d,l=900*l+d,d=n[o++],d){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:o--,u=!0;break;default:if(s%5===0&&s>0){for(var p=0;p<6;++p)a.write(Number(Yn(l)>>Yn(8*(5-p))));l=0,s=0}break}o===n[0]&&d<t.TEXT_COMPACTION_MODE_LATCH&&(f[s++]=d);for(var g=0;g<s;g++)a.write(f[g]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;o<n[0]&&!u;){var v=n[o++];if(v<t.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+v;else switch(v){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:o--,u=!0;break}if(s%5===0&&s>0){for(var p=0;p<6;++p)a.write(Number(Yn(l)>>Yn(8*(5-p))));l=0,s=0}}break}return i.append(en.decode(a.toByteArray(),r)),o},t.numericCompaction=function(e,n,r){for(var o=0,i=!1,a=new Int32Array(t.MAX_NUMERIC_CODEWORDS);n<e[0]&&!i;){var s=e[n++];if(n===e[0]&&(i=!0),s<t.TEXT_COMPACTION_MODE_LATCH)a[o]=s,o++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,i=!0;break}(o%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||i)&&o>0&&(r.append(t.decodeBase900toBase10(a,o)),o=0)}return n},t.decodeBase900toBase10=function(e,n){for(var r=Yn(0),o=0;o<n;o++)r+=t.EXP900[n-o-1]*Yn(e[o]);var i=r.toString();if(i.charAt(0)!=="1")throw new Z;return i.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=ig()?eE():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),Vo=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nE=function(){function t(){}return t.decode=function(e,n,r,o,i,a,s){for(var l=new hu(e,n,r,o,i),u=null,f=null,d,p=!0;;p=!1){if(n!=null&&(u=t.getRowIndicatorColumn(e,l,n,!0,a,s)),o!=null&&(f=t.getRowIndicatorColumn(e,l,o,!1,a,s)),d=t.merge(u,f),d==null)throw V.getNotFoundInstance();var g=d.getBoundingBox();if(p&&g!=null&&(g.getMinY()<l.getMinY()||g.getMaxY()>l.getMaxY()))l=g;else break}d.setBoundingBox(l);var v=d.getBarcodeColumnCount()+1;d.setDetectionResultColumn(0,u),d.setDetectionResultColumn(v,f);for(var y=u!=null,w=1;w<=v;w++){var x=y?w:v-w;if(d.getDetectionResultColumn(x)===void 0){var m=void 0;x===0||x===v?m=new Bd(l,x===0):m=new og(l),d.setDetectionResultColumn(x,m);for(var _=-1,S=_,A=l.getMinY();A<=l.getMaxY();A++){if(_=t.getStartColumn(d,x,A,y),_<0||_>l.getMaxX()){if(S===-1)continue;_=S}var R=t.detectCodeword(e,l.getMinX(),l.getMaxX(),y,_,A,a,s);R!=null&&(m.setCodeword(A,R),S=_,a=Math.min(a,R.getWidth()),s=Math.max(s,R.getWidth()))}}}return t.createDecoderResult(d)},t.merge=function(e,n){if(e==null&&n==null)return null;var r=t.getBarcodeMetadata(e,n);if(r==null)return null;var o=hu.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(n));return new z_(r,o)},t.adjustBoundingBox=function(e){var n,r;if(e==null)return null;var o=e.getRowHeights();if(o==null)return null;var i=t.getMax(o),a=0;try{for(var s=Vo(o),l=s.next();!l.done;l=s.next()){var u=l.value;if(a+=i-u,u>0)break}}catch(g){n={error:g}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}for(var f=e.getCodewords(),d=0;a>0&&f[d]==null;d++)a--;for(var p=0,d=o.length-1;d>=0&&(p+=i-o[d],!(o[d]>0));d--);for(var d=f.length-1;p>0&&f[d]==null;d--)p--;return e.getBoundingBox().addMissingRows(a,p,e.isLeft())},t.getMax=function(e){var n,r,o=-1;try{for(var i=Vo(e),a=i.next();!a.done;a=i.next()){var s=a.value;o=Math.max(o,s)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},t.getBarcodeMetadata=function(e,n){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();var o;return n==null||(o=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==o.getColumnCount()&&r.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&r.getRowCount()!==o.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,n,r,o,i,a){for(var s=new Bd(n,o),l=0;l<2;l++)for(var u=l===0?1:-1,f=Math.trunc(Math.trunc(r.getX())),d=Math.trunc(Math.trunc(r.getY()));d<=n.getMaxY()&&d>=n.getMinY();d+=u){var p=t.detectCodeword(e,0,e.getWidth(),o,f,d,i,a);p!=null&&(s.setCodeword(d,p),o?f=p.getStartX():f=p.getEndX())}return s},t.adjustCodewordCount=function(e,n){var r=n[0][1],o=r.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(o.length===0){if(i<1||i>ge.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();r.setValue(i)}else o[0]!==i&&r.setValue(i)},t.createDecoderResult=function(e){var n=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,n);for(var r=new Array,o=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],a=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var u=n[s][l+1].getValue(),f=s*e.getBarcodeColumnCount()+l;u.length===0?r.push(f):u.length===1?o[f]=u[0]:(a.push(f),i.push(u))}for(var d=new Array(i.length),p=0;p<d.length;p++)d[p]=i[p];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),o,ge.toIntArray(r),ge.toIntArray(a),d)},t.createDecoderResultFromAmbiguousValues=function(e,n,r,o,i){for(var a=new Int32Array(o.length),s=100;s-- >0;){for(var l=0;l<a.length;l++)n[o[l]]=i[l][a[l]];try{return t.decodeCodewords(n,e,r)}catch(f){var u=f instanceof ut;if(!u)throw f}if(a.length===0)throw ut.getChecksumInstance();for(var l=0;l<a.length;l++)if(a[l]<i[l].length-1){a[l]++;break}else if(a[l]=0,l===a.length-1)throw ut.getChecksumInstance()}throw ut.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var n,r,o,i,a=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<a.length;s++)for(var l=0;l<a[s].length;l++)a[s][l]=new Jo;var u=0;try{for(var f=Vo(e.getDetectionResultColumns()),d=f.next();!d.done;d=f.next()){var p=d.value;if(p!=null)try{for(var g=(o=void 0,Vo(p.getCodewords())),v=g.next();!v.done;v=g.next()){var y=v.value;if(y!=null){var w=y.getRowNumber();if(w>=0){if(w>=a.length)continue;a[w][u].setValue(y.getValue())}}}}catch(x){o={error:x}}finally{try{v&&!v.done&&(i=g.return)&&i.call(g)}finally{if(o)throw o.error}}u++}}catch(x){n={error:x}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}return a},t.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,n,r,o){var i,a,s=o?1:-1,l=null;if(t.isValidBarcodeColumn(e,n-s)&&(l=e.getDetectionResultColumn(n-s).getCodeword(r)),l!=null)return o?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(n).getCodewordNearby(r),l!=null)return o?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,n-s)&&(l=e.getDetectionResultColumn(n-s).getCodewordNearby(r)),l!=null)return o?l.getEndX():l.getStartX();for(var u=0;t.isValidBarcodeColumn(e,n-s);){n-=s;try{for(var f=(i=void 0,Vo(e.getDetectionResultColumn(n).getCodewords())),d=f.next();!d.done;d=f.next()){var p=d.value;if(p!=null)return(o?p.getEndX():p.getStartX())+s*u*(p.getEndX()-p.getStartX())}}catch(g){i={error:g}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}u++}return o?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,n,r,o,i,a,s,l){i=t.adjustCodewordStartColumn(e,n,r,o,i,a);var u=t.getModuleBitCount(e,n,r,o,i,a);if(u==null)return null;var f,d=me.sum(u);if(o)f=i+d;else{for(var p=0;p<u.length/2;p++){var g=u[p];u[p]=u[u.length-1-p],u[u.length-1-p]=g}f=i,i=f-d}if(!t.checkCodewordSkew(d,s,l))return null;var v=q_.getDecodedValue(u),y=ge.getCodeword(v);return y===-1?null:new W_(i,f,t.getCodewordBucketNumber(v),y)},t.getModuleBitCount=function(e,n,r,o,i,a){for(var s=i,l=new Int32Array(8),u=0,f=o?1:-1,d=o;(o?s<r:s>=n)&&u<l.length;)e.get(s,a)===d?(l[u]++,s+=f):(u++,d=!d);return u===l.length||s===(o?r:n)&&u===l.length-1?l:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,n,r,o,i,a){for(var s=i,l=o?-1:1,u=0;u<2;u++){for(;(o?s>=n:s<r)&&o===e.get(s,a);){if(Math.abs(i-s)>t.CODEWORD_SKEW_SIZE)return i;s+=l}l=-l,o=!o}return s},t.checkCodewordSkew=function(e,n,r){return n-t.CODEWORD_SKEW_SIZE<=e&&e<=r+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,n,r){if(e.length===0)throw Z.getFormatInstance();var o=1<<n+1,i=t.correctErrors(e,r,o);t.verifyCodewordCount(e,o);var a=tE.decode(e,""+n);return a.setErrorsCorrected(i),a.setErasures(r.length),a},t.correctErrors=function(e,n,r){if(n!=null&&n.length>r/2+t.MAX_ERRORS||r<0||r>t.MAX_EC_CODEWORDS)throw ut.getChecksumInstance();return t.errorCorrection.decode(e,r,n)},t.verifyCodewordCount=function(e,n){if(e.length<4)throw Z.getFormatInstance();var r=e[0];if(r>e.length)throw Z.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw Z.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),r=0,o=n.length-1;!((e&1)!==r&&(r=e&1,o--,o<0));)n[o]++,e>>=1;return n},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var n=new Rf,r=0;r<e.length;r++){n.format("Row %2d: ",r);for(var o=0;o<e[r].length;o++){var i=e[r][o];i.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}n.format("%n")}return n.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new L_,t}(),rE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pu=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=t.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw V.getNotFoundInstance();return r[0]},t.prototype.decodeMultiple=function(e,n){n===void 0&&(n=null);try{return t.decode(e,n,!0)}catch(r){throw r instanceof Z||r instanceof ut?V.getNotFoundInstance():r}},t.decode=function(e,n,r){var o,i,a=new Array,s=P_.detectMultiple(e,n,r);try{for(var l=rE(s.getPoints()),u=l.next();!u.done;u=l.next()){var f=u.value,d=nE.decode(s.getBits(),f[4],f[5],f[6],f[7],t.getMinCodewordWidth(f),t.getMaxCodewordWidth(f)),p=new St(d.getText(),d.getRawBytes(),void 0,f,ae.PDF_417);p.putMetadata(gt.ERROR_CORRECTION_LEVEL,d.getECLevel());var g=d.getOther();g!=null&&p.putMetadata(gt.PDF417_EXTRA_METADATA,g),a.push(p)}}catch(v){o={error:v}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}return a.map(function(v){return v})},t.getMaxWidth=function(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMinWidth=function(e,n){return e==null||n==null?de.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),oE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Vd=function(t){oE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Vt),Gd=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iE=function(){function t(){}return t.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var n=e!=null&&e.get(Ge.TRY_HARDER)!==void 0,r=e==null?null:e.get(Ge.POSSIBLE_FORMATS),o=new Array;if(r!=null){var i=r.some(function(a){return a===ae.UPC_A||a===ae.UPC_E||a===ae.EAN_13||a===ae.EAN_8||a===ae.CODABAR||a===ae.CODE_39||a===ae.CODE_93||a===ae.CODE_128||a===ae.ITF||a===ae.RSS_14||a===ae.RSS_EXPANDED});i&&!n&&o.push(new Ko(e)),r.includes(ae.QR_CODE)&&o.push(new du),r.includes(ae.DATA_MATRIX)&&o.push(new cu),r.includes(ae.AZTEC)&&o.push(new uu),r.includes(ae.PDF_417)&&o.push(new pu),i&&n&&o.push(new Ko(e))}o.length===0&&(n||o.push(new Ko(e)),o.push(new du),o.push(new cu),o.push(new uu),o.push(new pu),n&&o.push(new Ko(e))),this.readers=o},t.prototype.reset=function(){var e,n;if(this.readers!==null)try{for(var r=Gd(this.readers),o=r.next();!o.done;o=r.next()){var i=o.value;i.reset()}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var n,r;if(this.readers===null)throw new Vd("No readers where selected, nothing can be read.");try{for(var o=Gd(this.readers),i=o.next();!i.done;i=o.next()){var a=i.value;try{return a.decode(e,this.hints)}catch(s){if(s instanceof Vd)continue}}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}throw new V("No MultiFormat Readers were able to detect the code.")},t}(),aE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),sE=function(t){aE(e,t);function e(n,r){n===void 0&&(n=null),r===void 0&&(r=500);var o=this,i=new iE;return i.setHints(n),o=t.call(this,i,r)||this,o}return e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e}(Co),lE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){lE(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new pu,n)||this}return e})(Co);var uE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){uE(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new du,n)||this}return e})(Co);var gu;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(gu||(gu={}));const ea=gu;var ag=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new sr(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var r=n[n.length-1],o=this.field,i=n.length;i<=e;i++){var a=r.multiply(new sr(o,Int32Array.from([1,o.exp(i-1+o.getGeneratorBase())])));n.push(a),r=a}return n[e]},t.prototype.encode=function(e,n){if(n===0)throw new se("No error correction bytes");var r=e.length-n;if(r<=0)throw new se("No data bytes provided");var o=this.buildGenerator(n),i=new Int32Array(r);Me.arraycopy(e,0,i,0,r);var a=new sr(this.field,i);a=a.multiplyByMonomial(n,1);for(var s=a.divide(o)[1],l=s.getCoefficients(),u=n-l.length,f=0;f<u;f++)e[r+f]=0;Me.arraycopy(l,0,e,r+u,l.length)},t}(),Zo=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var n=0,r=e.getArray(),o=e.getWidth(),i=e.getHeight(),a=0;a<i-1;a++)for(var s=r[a],l=0;l<o-1;l++){var u=s[l];u===s[l+1]&&u===r[a+1][l]&&u===r[a+1][l+1]&&n++}return t.N2*n},t.applyMaskPenaltyRule3=function(e){for(var n=0,r=e.getArray(),o=e.getWidth(),i=e.getHeight(),a=0;a<i;a++)for(var s=0;s<o;s++){var l=r[a];s+6<o&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(t.isWhiteHorizontal(l,s-4,s)||t.isWhiteHorizontal(l,s+7,s+11))&&n++,a+6<i&&r[a][s]===1&&r[a+1][s]===0&&r[a+2][s]===1&&r[a+3][s]===1&&r[a+4][s]===1&&r[a+5][s]===0&&r[a+6][s]===1&&(t.isWhiteVertical(r,s,a-4,a)||t.isWhiteVertical(r,s,a+7,a+11))&&n++}return n*t.N3},t.isWhiteHorizontal=function(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var o=n;o<r;o++)if(e[o]===1)return!1;return!0},t.isWhiteVertical=function(e,n,r,o){r=Math.max(r,0),o=Math.min(o,e.length);for(var i=r;i<o;i++)if(e[i][n]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var n=0,r=e.getArray(),o=e.getWidth(),i=e.getHeight(),a=0;a<i;a++)for(var s=r[a],l=0;l<o;l++)s[l]===1&&n++;var u=e.getHeight()*e.getWidth(),f=Math.floor(Math.abs(n*2-u)*10/u);return f*t.N4},t.getDataMaskBit=function(e,n,r){var o,i;switch(e){case 0:o=r+n&1;break;case 1:o=r&1;break;case 2:o=n%3;break;case 3:o=(r+n)%3;break;case 4:o=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:i=r*n,o=(i&1)+i%3;break;case 6:i=r*n,o=(i&1)+i%3&1;break;case 7:i=r*n,o=i%3+(r+n&1)&1;break;default:throw new se("Invalid mask pattern: "+e)}return o===0},t.applyMaskPenaltyRule1Internal=function(e,n){for(var r=0,o=n?e.getHeight():e.getWidth(),i=n?e.getWidth():e.getHeight(),a=e.getArray(),s=0;s<o;s++){for(var l=0,u=-1,f=0;f<i;f++){var d=n?a[s][f]:a[f][s];d===u?l++:(l>=5&&(r+=t.N1+(l-5)),l=1,u=d)}l>=5&&(r+=t.N1+(l-5))}return r},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),fE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cE=function(){function t(e,n){this.width=e,this.height=n;for(var r=new Array(n),o=0;o!==n;o++)r[o]=new Uint8Array(e);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,n){return this.bytes[n][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,n,r){this.bytes[n][e]=r},t.prototype.setBoolean=function(e,n,r){this.bytes[n][e]=r?1:0},t.prototype.clear=function(e){var n,r;try{for(var o=fE(this.bytes),i=o.next();!i.done;i=o.next()){var a=i.value;nt.fill(a,e)}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var r=0,o=this.height;r<o;++r)for(var i=this.bytes[r],a=n.bytes[r],s=0,l=this.width;s<l;++s)if(i[s]!==a[s])return!1;return!0},t.prototype.toString=function(){for(var e=new fe,n=0,r=this.height;n<r;++n){for(var o=this.bytes[n],i=0,a=this.width;i<a;++i)switch(o[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),vu=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new fe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),dE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oe=function(t){dE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Vt),Hd=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,n,r,o,i){t.clearMatrix(i),t.embedBasicPatterns(r,i),t.embedTypeInfo(n,o,i),t.maybeEmbedVersionInfo(r,i),t.embedDataBits(e,o,i)},t.embedBasicPatterns=function(e,n){t.embedPositionDetectionPatternsAndSeparators(n),t.embedDarkDotAtLeftBottomCorner(n),t.maybeEmbedPositionAdjustmentPatterns(e,n),t.embedTimingPatterns(n)},t.embedTypeInfo=function(e,n,r){var o=new ft;t.makeTypeInfoBits(e,n,o);for(var i=0,a=o.getSize();i<a;++i){var s=o.get(o.getSize()-1-i),l=t.TYPE_INFO_COORDINATES[i],u=l[0],f=l[1];if(r.setBoolean(u,f,s),i<8){var d=r.getWidth()-i-1,p=8;r.setBoolean(d,p,s)}else{var d=8,p=r.getHeight()-7+(i-8);r.setBoolean(d,p,s)}}},t.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var r=new ft;t.makeVersionInfoBits(e,r);for(var o=6*3-1,i=0;i<6;++i)for(var a=0;a<3;++a){var s=r.get(o);o--,n.setBoolean(i,n.getHeight()-11+a,s),n.setBoolean(n.getHeight()-11+a,i,s)}}},t.embedDataBits=function(e,n,r){for(var o=0,i=-1,a=r.getWidth()-1,s=r.getHeight()-1;a>0;){for(a===6&&(a-=1);s>=0&&s<r.getHeight();){for(var l=0;l<2;++l){var u=a-l;if(t.isEmpty(r.get(u,s))){var f=void 0;o<e.getSize()?(f=e.get(o),++o):f=!1,n!==255&&Zo.getDataMaskBit(n,u,s)&&(f=!f),r.setBoolean(u,s,f)}}s+=i}i=-i,s+=i,a-=2}if(o!==e.getSize())throw new Oe("Not all bits consumed: "+o+"/"+e.getSize())},t.findMSBSet=function(e){return 32-de.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,n){if(n===0)throw new se("0 polynomial");var r=t.findMSBSet(n);for(e<<=r-1;t.findMSBSet(e)>=r;)e^=n<<t.findMSBSet(e)-r;return e},t.makeTypeInfoBits=function(e,n,r){if(!vu.isValidMaskPattern(n))throw new Oe("Invalid mask pattern");var o=e.getBits()<<3|n;r.appendBits(o,5);var i=t.calculateBCHCode(o,t.TYPE_INFO_POLY);r.appendBits(i,10);var a=new ft;if(a.appendBits(t.TYPE_INFO_MASK_PATTERN,15),r.xor(a),r.getSize()!==15)throw new Oe("should not happen but we got: "+r.getSize())},t.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var r=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new Oe("should not happen but we got: "+n.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var r=(n+1)%2;t.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),t.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Oe;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,n,r){for(var o=0;o<8;++o){if(!t.isEmpty(r.get(e+o,n)))throw new Oe;r.setNumber(e+o,n,0)}},t.embedVerticalSeparationPattern=function(e,n,r){for(var o=0;o<7;++o){if(!t.isEmpty(r.get(e,n+o)))throw new Oe;r.setNumber(e,n+o,0)}},t.embedPositionAdjustmentPattern=function(e,n,r){for(var o=0;o<5;++o)for(var i=t.POSITION_ADJUSTMENT_PATTERN[o],a=0;a<5;++a)r.setNumber(e+a,n+o,i[a])},t.embedPositionDetectionPattern=function(e,n,r){for(var o=0;o<7;++o)for(var i=t.POSITION_DETECTION_PATTERN[o],a=0;a<7;++a)r.setNumber(e+a,n+o,i[a])},t.embedPositionDetectionPatternsAndSeparators=function(e){var n=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-n,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-n,e);var r=8;t.embedHorizontalSeparationPattern(0,r-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var o=7;t.embedVerticalSeparationPattern(o,0,e),t.embedVerticalSeparationPattern(e.getHeight()-o-1,0,e),t.embedVerticalSeparationPattern(o,e.getHeight()-o,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,o=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],i=0,a=o.length;i!==a;i++){var s=o[i];if(s>=0)for(var l=0;l!==a;l++){var u=o[l];u>=0&&t.isEmpty(n.get(u,s))&&t.embedPositionAdjustmentPattern(u-2,s-2,n)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),hE=function(){function t(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),zd=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return Zo.applyMaskPenaltyRule1(e)+Zo.applyMaskPenaltyRule2(e)+Zo.applyMaskPenaltyRule3(e)+Zo.applyMaskPenaltyRule4(e)},t.encode=function(e,n,r){r===void 0&&(r=null);var o=t.DEFAULT_BYTE_MODE_ENCODING,i=r!==null&&r.get(ea.CHARACTER_SET)!==void 0;i&&(o=r.get(ea.CHARACTER_SET).toString());var a=this.chooseMode(e,o),s=new ft;if(a===Le.BYTE&&(i||t.DEFAULT_BYTE_MODE_ENCODING!==o)){var l=tt.getCharacterSetECIByName(o);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(a,s);var u=new ft;this.appendBytes(e,a,u,o);var f;if(r!==null&&r.get(ea.QR_VERSION)!==void 0){var d=Number.parseInt(r.get(ea.QR_VERSION).toString(),10);f=Rr.getVersionForNumber(d);var p=this.calculateBitsNeeded(a,s,u,f);if(!this.willFit(p,f,n))throw new Oe("Data too big for requested version")}else f=this.recommendVersion(n,a,s,u);var g=new ft;g.appendBitArray(s);var v=a===Le.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(v,f,a,g),g.appendBitArray(u);var y=f.getECBlocksForLevel(n),w=f.getTotalCodewords()-y.getTotalECCodewords();this.terminateBits(w,g);var x=this.interleaveWithECBytes(g,f.getTotalCodewords(),w,y.getNumBlocks()),m=new vu;m.setECLevel(n),m.setMode(a),m.setVersion(f);var _=f.getDimensionForVersion(),S=new cE(_,_),A=this.chooseMaskPattern(x,n,f,S);return m.setMaskPattern(A),Hd.buildMatrix(x,n,f,A,S),m.setMatrix(S),m},t.recommendVersion=function(e,n,r,o){var i=this.calculateBitsNeeded(n,r,o,Rr.getVersionForNumber(1)),a=this.chooseVersion(i,e),s=this.calculateBitsNeeded(n,r,o,a);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,n,r,o){return n.getSize()+e.getCharacterCountBits(o)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,n){if(n===void 0&&(n=null),tt.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Le.KANJI;for(var r=!1,o=!1,i=0,a=e.length;i<a;++i){var s=e.charAt(i);if(t.isDigit(s))r=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)o=!0;else return Le.BYTE}return o?Le.ALPHANUMERIC:r?Le.NUMERIC:Le.BYTE},t.isOnlyDoubleByteKanji=function(e){var n;try{n=en.encode(e,tt.SJIS)}catch{return!1}var r=n.length;if(r%2!==0)return!1;for(var o=0;o<r;o+=2){var i=n[o]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0},t.chooseMaskPattern=function(e,n,r,o){for(var i=Number.MAX_SAFE_INTEGER,a=-1,s=0;s<vu.NUM_MASK_PATTERNS;s++){Hd.buildMatrix(e,n,r,s,o);var l=this.calculateMaskPenalty(o);l<i&&(i=l,a=s)}return a},t.chooseVersion=function(e,n){for(var r=1;r<=40;r++){var o=Rr.getVersionForNumber(r);if(t.willFit(e,o,n))return o}throw new Oe("Data too big")},t.willFit=function(e,n,r){var o=n.getTotalCodewords(),i=n.getECBlocksForLevel(r),a=i.getTotalECCodewords(),s=o-a,l=(e+7)/8;return s>=l},t.terminateBits=function(e,n){var r=e*8;if(n.getSize()>r)throw new Oe("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(var o=0;o<4&&n.getSize()<r;++o)n.appendBit(!1);var i=n.getSize()&7;if(i>0)for(var o=i;o<8;o++)n.appendBit(!1);for(var a=e-n.getSizeInBytes(),o=0;o<a;++o)n.appendBits(o&1?17:236,8);if(n.getSize()!==r)throw new Oe("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,n,r,o,i,a){if(o>=r)throw new Oe("Block ID too large");var s=e%r,l=r-s,u=Math.floor(e/r),f=u+1,d=Math.floor(n/r),p=d+1,g=u-d,v=f-p;if(g!==v)throw new Oe("EC bytes mismatch");if(r!==l+s)throw new Oe("RS blocks mismatch");if(e!==(d+g)*l+(p+v)*s)throw new Oe("Total bytes mismatch");o<l?(i[0]=d,a[0]=g):(i[0]=p,a[0]=v)},t.interleaveWithECBytes=function(e,n,r,o){var i,a,s,l;if(e.getSizeInBytes()!==r)throw new Oe("Number of bits and data bytes does not match");for(var u=0,f=0,d=0,p=new Array,g=0;g<o;++g){var v=new Int32Array(1),y=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(n,r,o,g,v,y);var w=v[0],x=new Uint8Array(w);e.toBytes(8*u,x,0,w);var m=t.generateECBytes(x,y[0]);p.push(new hE(x,m)),f=Math.max(f,w),d=Math.max(d,m.length),u+=v[0]}if(r!==u)throw new Oe("Data bytes does not match offset");for(var _=new ft,g=0;g<f;++g)try{for(var S=(i=void 0,zd(p)),A=S.next();!A.done;A=S.next()){var R=A.value,x=R.getDataBytes();g<x.length&&_.appendBits(x[g],8)}}catch(k){i={error:k}}finally{try{A&&!A.done&&(a=S.return)&&a.call(S)}finally{if(i)throw i.error}}for(var g=0;g<d;++g)try{for(var N=(s=void 0,zd(p)),M=N.next();!M.done;M=N.next()){var R=M.value,m=R.getErrorCorrectionBytes();g<m.length&&_.appendBits(m[g],8)}}catch(k){s={error:k}}finally{try{M&&!M.done&&(l=N.return)&&l.call(N)}finally{if(s)throw s.error}}if(n!==_.getSizeInBytes())throw new Oe("Interleaving error: "+n+" and "+_.getSizeInBytes()+" differ.");return _},t.generateECBytes=function(e,n){for(var r=e.length,o=new Int32Array(r+n),i=0;i<r;i++)o[i]=e[i]&255;new ag(kt.QR_CODE_FIELD_256).encode(o,n);for(var a=new Uint8Array(n),i=0;i<n;i++)a[i]=o[r+i];return a},t.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,n,r,o){var i=r.getCharacterCountBits(n);if(e>=1<<i)throw new Oe(e+" is bigger than "+((1<<i)-1));o.appendBits(e,i)},t.appendBytes=function(e,n,r,o){switch(n){case Le.NUMERIC:t.appendNumericBytes(e,r);break;case Le.ALPHANUMERIC:t.appendAlphanumericBytes(e,r);break;case Le.BYTE:t.append8BitBytes(e,r,o);break;case Le.KANJI:t.appendKanjiBytes(e,r);break;default:throw new Oe("Invalid mode: "+n)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var n=t.getDigit(e);return n>=0&&n<=9},t.appendNumericBytes=function(e,n){for(var r=e.length,o=0;o<r;){var i=t.getDigit(e.charAt(o));if(o+2<r){var a=t.getDigit(e.charAt(o+1)),s=t.getDigit(e.charAt(o+2));n.appendBits(i*100+a*10+s,10),o+=3}else if(o+1<r){var a=t.getDigit(e.charAt(o+1));n.appendBits(i*10+a,7),o+=2}else n.appendBits(i,4),o++}},t.appendAlphanumericBytes=function(e,n){for(var r=e.length,o=0;o<r;){var i=t.getAlphanumericCode(e.charCodeAt(o));if(i===-1)throw new Oe;if(o+1<r){var a=t.getAlphanumericCode(e.charCodeAt(o+1));if(a===-1)throw new Oe;n.appendBits(i*45+a,11),o+=2}else n.appendBits(i,6),o++}},t.append8BitBytes=function(e,n,r){var o;try{o=en.encode(e,r)}catch(l){throw new Oe(l)}for(var i=0,a=o.length;i!==a;i++){var s=o[i];n.appendBits(s,8)}},t.appendKanjiBytes=function(e,n){var r;try{r=en.encode(e,tt.SJIS)}catch(d){throw new Oe(d)}for(var o=r.length,i=0;i<o;i+=2){var a=r[i]&255,s=r[i+1]&255,l=a<<8&4294967295|s,u=-1;if(l>=33088&&l<=40956?u=l-33088:l>=57408&&l<=60351&&(u=l-49472),u===-1)throw new Oe("Invalid byte sequence");var f=(u>>8)*192+(u&255);n.appendBits(f,13)}},t.appendECI=function(e,n){n.appendBits(Le.ECI.getBits(),4),n.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=tt.UTF8.getName(),t})();var pE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){pE(e,t);function e(n,r,o,i,a,s,l,u){var f=t.call(this,s,l)||this;if(f.yuvData=n,f.dataWidth=r,f.dataHeight=o,f.left=i,f.top=a,i+s>r||a+l>o)throw new se("Crop rectangle does not fit within image data.");return u&&f.reverseHorizontal(s,l),f}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new se("Requested row is outside the image: "+n);var o=this.getWidth();(r==null||r.length<o)&&(r=new Uint8ClampedArray(o));var i=(n+this.top)*this.dataWidth+this.left;return Me.arraycopy(this.yuvData,i,r,0,o),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;var o=n*r,i=new Uint8ClampedArray(o),a=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Me.arraycopy(this.yuvData,a,i,0,o),i;for(var s=0;s<r;s++){var l=s*n;Me.arraycopy(this.yuvData,a,i,l,n),a+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,o,i){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,o,i,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(n*r),i=this.yuvData,a=this.top*this.dataWidth+this.left,s=0;s<r;s++){for(var l=s*n,u=0;u<n;u++){var f=i[a+u*e.THUMBNAIL_SCALE_FACTOR]&255;o[l+u]=4278190080|f*65793}a+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return o},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,r){for(var o=this.yuvData,i=0,a=this.top*this.dataWidth+this.left;i<r;i++,a+=this.dataWidth)for(var s=a+n/2,l=a,u=a+n-1;l<s;l++,u--){var f=o[l];o[l]=o[u],o[u]=f}},e.prototype.invert=function(){return new Sf(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(ds);var gE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){gE(e,t);function e(n,r,o,i,a,s,l){var u=t.call(this,r,o)||this;if(u.dataWidth=i,u.dataHeight=a,u.left=s,u.top=l,n.BYTES_PER_ELEMENT===4){for(var f=r*o,d=new Uint8ClampedArray(f),p=0;p<f;p++){var g=n[p],v=g>>16&255,y=g>>7&510,w=g&255;d[p]=(v+y+w)/4&255}u.luminances=d}else u.luminances=n;if(i===void 0&&(u.dataWidth=r),a===void 0&&(u.dataHeight=o),s===void 0&&(u.left=0),l===void 0&&(u.top=0),u.left+r>u.dataWidth||u.top+o>u.dataHeight)throw new se("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new se("Requested row is outside the image: "+n);var o=this.getWidth();(r==null||r.length<o)&&(r=new Uint8ClampedArray(o));var i=(n+this.top)*this.dataWidth+this.left;return Me.arraycopy(this.luminances,i,r,0,o),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;var o=n*r,i=new Uint8ClampedArray(o),a=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return Me.arraycopy(this.luminances,a,i,0,o),i;for(var s=0;s<r;s++){var l=s*n;Me.arraycopy(this.luminances,a,i,l,n),a+=this.dataWidth}return i},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,o,i){return new e(this.luminances,o,i,this.dataWidth,this.dataHeight,this.left+n,this.top+r)},e.prototype.invert=function(){return new Sf(this)},e})(ds);var vE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mE=function(t){vE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(n){return this.getCharacterSetECIByName(n)},e}(tt),yE=function(){function t(){}return t.ISO_8859_1=tt.ISO8859_1,t}(),mu,xE=301,_E=function(t,e){for(var n=1,r=0;r<255;r++)e[r]=n,t[n]=r,n*=2,n>=256&&(n^=xE);return{LOG:t,ALOG:e}};mu=_E([],[]),mu.LOG;mu.ALOG;var Wd;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Wd||(Wd={}));var qd=129,sg=230,EE=231,wE=235,CE=236,AE=237,SE=238,TE=239,IE=240,al=254,NE=254,$d="[)>05",Yd="[)>06",Xd="",Ne=0,ht=1,Nt=2,Qe=3,st=4,Et=5,RE=function(){function t(){}return t.prototype.getEncodingMode=function(){return Ne},t.prototype.encode=function(e){var n=dn.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(n>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),o=dn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode())switch(o){case Et:e.writeCodeword(EE),e.signalEncoderChange(Et);return;case ht:e.writeCodeword(sg),e.signalEncoderChange(ht);return;case Qe:e.writeCodeword(SE),e.signalEncoderChange(Qe);break;case Nt:e.writeCodeword(TE),e.signalEncoderChange(Nt);break;case st:e.writeCodeword(IE),e.signalEncoderChange(st);break;default:throw new Error("Illegal mode: "+o)}else dn.isExtendedASCII(r)?(e.writeCodeword(wE),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,n){if(dn.isDigit(e)&&dn.isDigit(n)){var r=(e-48)*10+(n-48);return r+130}throw new Error("not digits: "+e+n)},t}(),PE=function(){function t(){}return t.prototype.getEncodingMode=function(){return Et},t.prototype.encode=function(e){var n=new fe;for(n.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();n.append(r),e.pos++;var o=dn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Ne);break}}var i=n.length()-1,a=1,s=e.getCodewordCount()+i+a;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(i<=249)n.setCharAt(0,pe.getCharAt(i));else if(i<=1555)n.setCharAt(0,pe.getCharAt(Math.floor(i/250)+249)),n.insert(1,pe.getCharAt(i%250));else throw new Error("Message length not in valid ranges: "+i);for(var u=0,r=n.length();u<r;u++)e.writeCodeword(this.randomize255State(n.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,n){var r=149*n%255+1,o=e+r;return o<=255?o:o-256},t}(),Pf=function(){function t(){}return t.prototype.getEncodingMode=function(){return ht},t.prototype.encodeMaximal=function(e){for(var n=new fe,r=0,o=e.pos,i=0;e.hasMoreCharacters();){var a=e.getCurrentChar();e.pos++,r=this.encodeChar(a,n),n.length()%3===0&&(o=e.pos,i=n.length())}if(i!==n.length()){var s=Math.floor(n.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var u=e.getSymbolInfo().getDataCapacity()-l,f=Math.floor(n.length()%3);(f===2&&u!==2||f===1&&(r>3||u!==1))&&(e.pos=o)}n.length()>0&&e.writeCodeword(sg),this.handleEOD(e,n)},t.prototype.encode=function(e){for(var n=new fe;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var o=this.encodeChar(r,n),i=Math.floor(n.length()/3)*2,a=e.getCodewordCount()+i;e.updateSymbolInfo(a);var s=e.getSymbolInfo().getDataCapacity()-a;if(!e.hasMoreCharacters()){var l=new fe;for(n.length()%3===2&&s!==2&&(o=this.backtrackOneCharacter(e,n,l,o));n.length()%3===1&&(o>3||s!==1);)o=this.backtrackOneCharacter(e,n,l,o);break}var u=n.length();if(u%3===0){var f=dn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(f!==this.getEncodingMode()){e.signalEncoderChange(Ne);break}}}this.handleEOD(e,n)},t.prototype.backtrackOneCharacter=function(e,n,r,o){var i=n.length(),a=n.toString().substring(0,i-o);n.setLengthToZero(),n.append(a),e.pos--;var s=e.getCurrentChar();return o=this.encodeChar(s,r),e.resetSymbolInfo(),o},t.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var r=n.toString().substring(3);n.setLengthToZero(),n.append(r)},t.prototype.handleEOD=function(e,n){var r=Math.floor(n.length()/3*2),o=n.length()%3,i=e.getCodewordCount()+r;e.updateSymbolInfo(i);var a=e.getSymbolInfo().getDataCapacity()-i;if(o===2){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(al)}else if(a===1&&o===1){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(al),e.pos--}else if(o===0){for(;n.length()>=3;)this.writeNextTriplet(e,n);(a>0||e.hasMoreCharacters())&&e.writeCodeword(al)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Ne)},t.prototype.encodeChar=function(e,n){if(e===" ".charCodeAt(0))return n.append(3),1;if(e>="0".charCodeAt(0)&&e<="9".charCodeAt(0))return n.append(e-48+4),1;if(e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0))return n.append(e-65+14),1;if(e<" ".charCodeAt(0))return n.append(0),n.append(e),2;if(e<="/".charCodeAt(0))return n.append(1),n.append(e-33),2;if(e<="@".charCodeAt(0))return n.append(1),n.append(e-58+15),2;if(e<="_".charCodeAt(0))return n.append(1),n.append(e-91+22),2;if(e<=127)return n.append(2),n.append(e-96),2;n.append("1");var r=2;return r+=this.encodeChar(e-128,n),r},t.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=n/256,o=n%256,i=new fe;return i.append(r),i.append(o),i.toString()},t}(),DE=function(){function t(){}return t.prototype.getEncodingMode=function(){return st},t.prototype.encode=function(e){for(var n=new fe;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,n),e.pos++;var o=n.length();if(o>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var i=n.toString().substring(4);n.setLengthToZero(),n.append(i);var a=dn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(Ne);break}}}n.append(pe.getCharAt(31)),this.handleEOD(e,n)},t.prototype.handleEOD=function(e,n){try{var r=n.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var o=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),i=e.getRemainingCharacters();if(i>o&&(e.updateSymbolInfo(e.getCodewordCount()+1),o=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),i<=o&&o<=2)return}if(r>4)throw new Error("Count must not exceed 4");var a=r-1,s=this.encodeToCodewords(n.toString()),l=!e.hasMoreCharacters(),u=l&&a<=2;if(a<=2){e.updateSymbolInfo(e.getCodewordCount()+a);var o=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();o>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}u?(e.resetSymbolInfo(),e.pos-=a):e.writeCodewords(s)}finally{e.signalEncoderChange(Ne)}},t.prototype.encodeChar=function(e,n){e>=" ".charCodeAt(0)&&e<="?".charCodeAt(0)?n.append(e):e>="@".charCodeAt(0)&&e<="^".charCodeAt(0)?n.append(pe.getCharAt(e-64)):dn.illegalCharacter(pe.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var n=e.length;if(n===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),o=n>=2?e.charAt(1).charCodeAt(0):0,i=n>=3?e.charAt(2).charCodeAt(0):0,a=n>=4?e.charAt(3).charCodeAt(0):0,s=(r<<18)+(o<<12)+(i<<6)+a,l=s>>16&255,u=s>>8&255,f=s&255,d=new fe;return d.append(l),n>=2&&d.append(u),n>=3&&d.append(f),d.toString()},t}(),ME=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bE=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_e=function(){function t(e,n,r,o,i,a,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=r,this.matrixWidth=o,this.matrixHeight=i,this.dataRegions=a,this.rsBlockData=s,this.rsBlockError=l}return t.lookup=function(e,n,r,o,i){var a,s;n===void 0&&(n=0),r===void 0&&(r=null),o===void 0&&(o=null),i===void 0&&(i=!0);try{for(var l=bE(kE),u=l.next();!u.done;u=l.next()){var f=u.value;if(!(n===1&&f.rectangular)&&!(n===2&&!f.rectangular)&&!(r!=null&&(f.getSymbolWidth()<r.getWidth()||f.getSymbolHeight()<r.getHeight()))&&!(o!=null&&(f.getSymbolWidth()>o.getWidth()||f.getSymbolHeight()>o.getHeight()))&&e<=f.dataCapacity)return f}}catch(d){a={error:d}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}if(i)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),OE=function(t){ME(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e}(_e),kE=[new _e(!1,3,5,8,8,1),new _e(!1,5,7,10,10,1),new _e(!0,5,7,16,6,1),new _e(!1,8,10,12,12,1),new _e(!0,10,11,14,6,2),new _e(!1,12,12,14,14,1),new _e(!0,16,14,24,10,1),new _e(!1,18,14,16,16,1),new _e(!1,22,18,18,18,1),new _e(!0,22,18,16,10,2),new _e(!1,30,20,20,20,1),new _e(!0,32,24,16,14,2),new _e(!1,36,24,22,22,1),new _e(!1,44,28,24,24,1),new _e(!0,49,28,22,14,2),new _e(!1,62,36,14,14,4),new _e(!1,86,42,16,16,4),new _e(!1,114,48,18,18,4),new _e(!1,144,56,20,20,4),new _e(!1,174,68,22,22,4),new _e(!1,204,84,24,24,4,102,42),new _e(!1,280,112,14,14,16,140,56),new _e(!1,368,144,16,16,16,92,36),new _e(!1,456,192,18,18,16,114,48),new _e(!1,576,224,20,20,16,144,56),new _e(!1,696,272,22,22,16,174,68),new _e(!1,816,336,24,24,16,136,56),new _e(!1,1050,408,18,18,36,175,68),new _e(!1,1304,496,20,20,36,163,62),new OE],LE=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(s){return s.charCodeAt(0)}),r=new fe,o=0,i=n.length;o<i;o++){var a=String.fromCharCode(n[o]&255);if(a==="?"&&e.charAt(o)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(a)}this.msg=r.toString(),this.shape=0,this.codewords=new fe,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=_e.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),FE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),BE=function(t){FE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Qe},e.prototype.encode=function(n){for(var r=new fe;n.hasMoreCharacters();){var o=n.getCurrentChar();n.pos++,this.encodeChar(o,r);var i=r.length();if(i%3===0){this.writeNextTriplet(n,r);var a=dn.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){n.signalEncoderChange(Ne);break}}}this.handleEOD(n,r)},e.prototype.encodeChar=function(n,r){switch(n){case 13:r.append(0);break;case"*".charCodeAt(0):r.append(1);break;case">".charCodeAt(0):r.append(2);break;case" ".charCodeAt(0):r.append(3);break;default:n>="0".charCodeAt(0)&&n<="9".charCodeAt(0)?r.append(n-48+4):n>="A".charCodeAt(0)&&n<="Z".charCodeAt(0)?r.append(n-65+14):dn.illegalCharacter(pe.getCharAt(n));break}return 1},e.prototype.handleEOD=function(n,r){n.updateSymbolInfo();var o=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),i=r.length();n.pos-=i,(n.getRemainingCharacters()>1||o>1||n.getRemainingCharacters()!==o)&&n.writeCodeword(NE),n.getNewEncoding()<0&&n.signalEncoderChange(Ne)},e}(Pf),UE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),VE=function(t){UE(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Nt},e.prototype.encodeChar=function(n,r){if(n===" ".charCodeAt(0))return r.append(3),1;if(n>="0".charCodeAt(0)&&n<="9".charCodeAt(0))return r.append(n-48+4),1;if(n>="a".charCodeAt(0)&&n<="z".charCodeAt(0))return r.append(n-97+14),1;if(n<" ".charCodeAt(0))return r.append(0),r.append(n),2;if(n<="/".charCodeAt(0))return r.append(1),r.append(n-33),2;if(n<="@".charCodeAt(0))return r.append(1),r.append(n-58+15),2;if(n>="[".charCodeAt(0)&&n<="_".charCodeAt(0))return r.append(1),r.append(n-91+22),2;if(n==="`".charCodeAt(0))return r.append(2),r.append(0),2;if(n<="Z".charCodeAt(0))return r.append(2),r.append(n-65+1),2;if(n<=127)return r.append(2),r.append(n-123+27),2;r.append("1");var o=2;return o+=this.encodeChar(n-128,r),o},e}(Pf),GE=function(){function t(){}return t.randomize253State=function(e){var n=149*e%253+1,r=qd+n;return r<=254?r:r-254},t.encodeHighLevel=function(e,n,r,o,i){n===void 0&&(n=0),r===void 0&&(r=null),o===void 0&&(o=null),i===void 0&&(i=!1);var a=new Pf,s=[new RE,a,new VE,new BE,new DE,new PE],l=new LE(e);l.setSymbolShape(n),l.setSizeConstraints(r,o),e.startsWith($d)&&e.endsWith(Xd)?(l.writeCodeword(CE),l.setSkipAtEnd(2),l.pos+=$d.length):e.startsWith(Yd)&&e.endsWith(Xd)&&(l.writeCodeword(AE),l.setSkipAtEnd(2),l.pos+=Yd.length);var u=Ne;for(i&&(a.encodeMaximal(l),u=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[u].encode(l),l.getNewEncoding()>=0&&(u=l.getNewEncoding(),l.resetEncoderSignal());var f=l.getCodewordCount();l.updateSymbolInfo();var d=l.getSymbolInfo().getDataCapacity();f<d&&u!==Ne&&u!==Et&&u!==st&&l.writeCodeword("");var p=l.getCodewords();for(p.length()<d&&p.append(qd);p.length()<d;)p.append(this.randomize253State(p.length()+1));return l.getCodewords().toString()},t.lookAheadTest=function(e,n,r){var o=this.lookAheadTestIntern(e,n,r);if(r===Qe&&o===Qe){for(var i=Math.min(n+3,e.length),a=n;a<i;a++)if(!this.isNativeX12(e.charCodeAt(a)))return Ne}else if(r===st&&o===st){for(var i=Math.min(n+4,e.length),a=n;a<i;a++)if(!this.isNativeEDIFACT(e.charCodeAt(a)))return Ne}return o},t.lookAheadTestIntern=function(e,n,r){if(n>=e.length)return r;var o;r===Ne?o=[0,1,1,1,1,1.25]:(o=[1,2,2,2,2,2.25],o[r]=0);for(var i=0,a=new Uint8Array(6),s=[];;){if(n+i===e.length){nt.fill(a,0),nt.fill(s,0);var l=this.findMinimums(o,s,de.MAX_VALUE,a),u=this.getMinimumCount(a);if(s[Ne]===l)return Ne;if(u===1){if(a[Et]>0)return Et;if(a[st]>0)return st;if(a[Nt]>0)return Nt;if(a[Qe]>0)return Qe}return ht}var f=e.charCodeAt(n+i);if(i++,this.isDigit(f)?o[Ne]+=.5:this.isExtendedASCII(f)?(o[Ne]=Math.ceil(o[Ne]),o[Ne]+=2):(o[Ne]=Math.ceil(o[Ne]),o[Ne]++),this.isNativeC40(f)?o[ht]+=2/3:this.isExtendedASCII(f)?o[ht]+=8/3:o[ht]+=4/3,this.isNativeText(f)?o[Nt]+=2/3:this.isExtendedASCII(f)?o[Nt]+=8/3:o[Nt]+=4/3,this.isNativeX12(f)?o[Qe]+=2/3:this.isExtendedASCII(f)?o[Qe]+=13/3:o[Qe]+=10/3,this.isNativeEDIFACT(f)?o[st]+=3/4:this.isExtendedASCII(f)?o[st]+=17/4:o[st]+=13/4,this.isSpecialB256(f)?o[Et]+=4:o[Et]++,i>=4){if(nt.fill(a,0),nt.fill(s,0),this.findMinimums(o,s,de.MAX_VALUE,a),s[Ne]<this.min(s[Et],s[ht],s[Nt],s[Qe],s[st]))return Ne;if(s[Et]<s[Ne]||s[Et]+1<this.min(s[ht],s[Nt],s[Qe],s[st]))return Et;if(s[st]+1<this.min(s[Et],s[ht],s[Nt],s[Qe],s[Ne]))return st;if(s[Nt]+1<this.min(s[Et],s[ht],s[st],s[Qe],s[Ne]))return Nt;if(s[Qe]+1<this.min(s[Et],s[ht],s[st],s[Nt],s[Ne]))return Qe;if(s[ht]+1<this.min(s[Ne],s[Et],s[st],s[Nt])){if(s[ht]<s[Qe])return ht;if(s[ht]===s[Qe]){for(var d=n+i+1;d<e.length;){var p=e.charCodeAt(d);if(this.isX12TermSep(p))return Qe;if(!this.isNativeX12(p))break;d++}return ht}}}}},t.min=function(e,n,r,o,i){var a=Math.min(e,Math.min(n,Math.min(r,o)));return i===void 0?a:Math.min(a,i)},t.findMinimums=function(e,n,r,o){for(var i=0;i<6;i++){var a=n[i]=Math.ceil(e[i]);r>a&&(r=a,nt.fill(o,0)),r===a&&(o[i]=o[i]+1)}return r},t.getMinimumCount=function(e){for(var n=0,r=0;r<6;r++)n+=e[r];return n||0},t.isDigit=function(e){return e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},t.isNativeText=function(e){return e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="a".charCodeAt(0)&&e<="z".charCodeAt(0)},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===" ".charCodeAt(0)||e>="0".charCodeAt(0)&&e<="9".charCodeAt(0)||e>="A".charCodeAt(0)&&e<="Z".charCodeAt(0)},t.isX12TermSep=function(e){return e===13||e==="*".charCodeAt(0)||e===">".charCodeAt(0)},t.isNativeEDIFACT=function(e){return e>=" ".charCodeAt(0)&&e<="^".charCodeAt(0)},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,n){n===void 0&&(n=0);for(var r=e.length,o=n;o<r&&this.isDigit(e.charCodeAt(o));)o++;return o-n},t.illegalCharacter=function(e){var n=de.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},t}();const dn=GE;var sl=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Kd=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return en.encode(e,this.charset)!=null}catch{return!1}},t}(),HE=function(){function t(e,n,r){var o,i,a,s,l,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(F){return new Kd(mE.forName(F))}),this.encoders=[];var f=[];f.push(new Kd(yE.ISO_8859_1));for(var d=n!=null&&n.name.startsWith("UTF"),p=0;p<e.length;p++){var g=!1;try{for(var v=(o=void 0,sl(f)),y=v.next();!y.done;y=v.next()){var w=y.value,x=e.charAt(p),m=x.charCodeAt(0);if(m===r||w.canEncode(x)){g=!0;break}}}catch(F){o={error:F}}finally{try{y&&!y.done&&(i=v.return)&&i.call(v)}finally{if(o)throw o.error}}if(!g)try{for(var _=(a=void 0,sl(this.ENCODERS)),S=_.next();!S.done;S=_.next()){var w=S.value;if(w.canEncode(e.charAt(p))){f.push(w),g=!0;break}}}catch(F){a={error:F}}finally{try{S&&!S.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}g||(d=!0)}if(f.length===1&&!d)this.encoders=[f[0]];else{this.encoders=[];var A=0;try{for(var R=sl(f),N=R.next();!N.done;N=R.next()){var w=N.value;this.encoders[A++]=w}}catch(F){l={error:F}}finally{try{N&&!N.done&&(u=R.return)&&u.call(R)}finally{if(l)throw l.error}}}var M=-1;if(n!=null){for(var p=0;p<this.encoders.length;p++)if(this.encoders[p]!=null&&n.name===this.encoders[p].name){M=p;break}}this.priorityEncoderIndex=M}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return en.encode(pe.getCharAt(e),this.encoders[n].name)},t}(),zE=3,WE=function(){function t(e,n,r){this.fnc1=r;var o=new HE(e,n,r);if(o.length()===1)for(var i=0;i<this.bytes.length;i++){var a=e.charAt(i).charCodeAt(0);this.bytes[i]=a===r?1e3:a}else this.bytes=this.encodeMinimally(e,o,r)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var r=0;r<n;r++)if(this.isECI(e+r))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var r=new fe,o=e;o<n;o++){if(this.isECI(o))throw new Error("value at "+o+" is not a character but an ECI");r.append(this.charAt(o))}return r.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,n,r){(e[n][r.encoderIndex]==null||e[n][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.encoderIndex]=r)},t.prototype.addEdges=function(e,n,r,o,i,a){var s=e.charAt(o).charCodeAt(0),l=0,u=n.length();n.getPriorityEncoderIndex()>=0&&(s===a||n.canEncode(s,n.getPriorityEncoderIndex()))&&(l=n.getPriorityEncoderIndex(),u=l+1);for(var f=l;f<u;f++)(s===a||n.canEncode(s,f))&&this.addEdge(r,o+1,new Jd(s,n,f,i,a))},t.prototype.encodeMinimally=function(e,n,r){var o=e.length,i=new Jd[o+1][n.length()];this.addEdges(e,n,i,0,null,r);for(var a=1;a<=o;a++){for(var s=0;s<n.length();s++)i[a][s]!=null&&a<o&&this.addEdges(e,n,i,a,i[a][s],r);for(var s=0;s<n.length();s++)i[a-1][s]=null}for(var l=-1,u=de.MAX_VALUE,s=0;s<n.length();s++)if(i[o][s]!=null){var f=i[o][s];f.cachedTotalSize<u&&(u=f.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var d=[],p=i[o][l];p!=null;){if(p.isFNC1())d.unshift(1e3);else for(var g=n.encode(p.c,p.encoderIndex),a=g.length-1;a>=0;a--)d.unshift(g[a]&255);var v=p.previous===null?0:p.previous.encoderIndex;v!==p.encoderIndex&&d.unshift(256+n.getECIValue(p.encoderIndex)),p=p.previous}for(var y=[],a=0;a<y.length;a++)y[a]=d[a];return y},t}(),Jd=function(){function t(e,n,r,o,i){this.c=e,this.encoderSet=n,this.encoderIndex=r,this.previous=o,this.fnc1=i,this.c=e===i?1e3:e;var a=this.isFNC1()?1:n.encode(e,r).length,s=o===null?0:o.encoderIndex;s!==r&&(a+=zE),o!=null&&(a+=o.cachedTotalSize),this.cachedTotalSize=a}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),qE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();globalThis&&globalThis.__values;var $E=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return i};globalThis&&globalThis.__spread;var Zd;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(Zd||(Zd={}));(function(t){qE(e,t);function e(n,r,o,i,a){var s=t.call(this,n,r,o)||this;return s.shape=i,s.macroId=a,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(WE);var YE=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),Qd=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,n){return e.sort(n)[0]},t}(),XE=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),KE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Df=function(t){KE(e,t);function e(n,r,o){var i=t.call(this,n)||this;return i.value=r,i.bitCount=o,i}return e.prototype.appendTo=function(n,r){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,r){return new e(this,n,r)},e.prototype.addBinaryShift=function(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,r)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+de.toBinaryString(n|1<<this.bitCount).substring(1)+">"},e}(XE),JE=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ZE=function(t){JE(e,t);function e(n,r,o){var i=t.call(this,n,0,0)||this;return i.binaryShiftStart=r,i.binaryShiftByteCount=o,i}return e.prototype.appendTo=function(n,r){for(var o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):o===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+o],8)},e.prototype.addBinaryShift=function(n,r){return new e(this,n,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Df);function QE(t,e,n){return new ZE(t,e,n)}function Go(t,e,n){return new Df(t,e,n)}var jE=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],lr=0,qa=1,Qt=2,lg=3,En=4,ew=new Df(null,0,0),ll=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])],tw=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function nw(t){var e,n;try{for(var r=tw(t),o=r.next();!o.done;o=r.next()){var i=o.value;nt.fill(i,-1)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return t[lr][En]=0,t[qa][En]=0,t[qa][lr]=28,t[lg][En]=0,t[Qt][En]=0,t[Qt][lr]=15,t}var ug=nw(nt.createInt32Array(6,6)),rw=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ow=function(){function t(e,n,r,o){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=o}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,n){var r=this.bitCount,o=this.token;if(e!==this.mode){var i=ll[this.mode][e];o=Go(o,i&65535,i>>16),r+=i>>16}var a=e===Qt?4:5;return o=Go(o,n,a),new t(o,e,0,r+a)},t.prototype.shiftAndAppend=function(e,n){var r=this.token,o=this.mode===Qt?4:5;return r=Go(r,ug[this.mode][e],o),r=Go(r,n,5),new t(r,this.mode,0,this.bitCount+o+5)},t.prototype.addBinaryShiftChar=function(e){var n=this.token,r=this.mode,o=this.bitCount;if(this.mode===En||this.mode===Qt){var i=ll[r][lr];n=Go(n,i&65535,i>>16),o+=i>>16,r=lr}var a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(n,r,this.binaryShiftByteCount+1,o+a);return s.binaryShiftByteCount===2047+31&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var n=this.token;return n=QE(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(n,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(ll[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},t.prototype.toBitArray=function(e){for(var n,r,o=[],i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())o.unshift(i);var a=new ft;try{for(var s=rw(o),l=s.next();!l.done;l=s.next()){var u=l.value;u.appendTo(a,e)}}catch(f){n={error:f}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a},t.prototype.toString=function(){return pe.format("%s bits=%d bytes=%d",jE[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(ew,lr,0,0),t}();function iw(t){var e=pe.getCharCode(" "),n=pe.getCharCode("."),r=pe.getCharCode(",");t[lr][e]=1;for(var o=pe.getCharCode("Z"),i=pe.getCharCode("A"),a=i;a<=o;a++)t[lr][a]=a-i+2;t[qa][e]=1;for(var s=pe.getCharCode("z"),l=pe.getCharCode("a"),a=l;a<=s;a++)t[qa][a]=a-l+2;t[Qt][e]=1;for(var u=pe.getCharCode("9"),f=pe.getCharCode("0"),a=f;a<=u;a++)t[Qt][a]=a-f+2;t[Qt][r]=12,t[Qt][n]=13;for(var d=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],p=0;p<d.length;p++)t[lg][pe.getCharCode(d[p])]=p;for(var g=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],p=0;p<g.length;p++)pe.getCharCode(g[p])>0&&(t[En][pe.getCharCode(g[p])]=p);return t}var ul=iw(nt.createInt32Array(5,256)),ta=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aw=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=pe.getCharCode(" "),n=pe.getCharCode(`
`),r=Qd.singletonList(ow.INITIAL_STATE),o=0;o<this.text.length;o++){var i=void 0,a=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case pe.getCharCode("\r"):i=a===n?2:0;break;case pe.getCharCode("."):i=a===e?3:0;break;case pe.getCharCode(","):i=a===e?4:0;break;case pe.getCharCode(":"):i=a===e?5:0;break;default:i=0}i>0?(r=t.updateStateListForPair(r,o,i),o++):r=this.updateStateListForChar(r,o)}var s=Qd.min(r,function(l,u){return l.getBitCount()-u.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,n){var r,o,i=[];try{for(var a=ta(e),s=a.next();!s.done;s=a.next()){var l=s.value;this.updateStateForChar(l,n,i)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return t.simplifyStates(i)},t.prototype.updateStateForChar=function(e,n,r){for(var o=this.text[n]&255,i=ul[e.getMode()][o]>0,a=null,s=0;s<=En;s++){var l=ul[s][o];if(l>0){if(a==null&&(a=e.endBinaryShift(n)),!i||s===e.getMode()||s===Qt){var u=a.latchAndAppend(s,l);r.push(u)}if(!i&&ug[e.getMode()][s]>=0){var f=a.shiftAndAppend(s,l);r.push(f)}}}if(e.getBinaryShiftByteCount()>0||ul[e.getMode()][o]===0){var d=e.addBinaryShiftChar(n);r.push(d)}},t.updateStateListForPair=function(e,n,r){var o,i,a=[];try{for(var s=ta(e),l=s.next();!l.done;l=s.next()){var u=l.value;this.updateStateForPair(u,n,r,a)}}catch(f){o={error:f}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return this.simplifyStates(a)},t.updateStateForPair=function(e,n,r,o){var i=e.endBinaryShift(n);if(o.push(i.latchAndAppend(En,r)),e.getMode()!==En&&o.push(i.shiftAndAppend(En,r)),r===3||r===4){var a=i.latchAndAppend(Qt,16-r).latchAndAppend(Qt,1);o.push(a)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);o.push(s)}},t.simplifyStates=function(e){var n,r,o,i,a=[];try{for(var s=ta(e),l=s.next();!l.done;l=s.next()){var u=l.value,f=!0,d=function(w){if(w.isBetterThanOrEqualTo(u))return f=!1,"break";u.isBetterThanOrEqualTo(w)&&(a=a.filter(function(x){return x!==w}))};try{for(var p=(o=void 0,ta(a)),g=p.next();!g.done;g=p.next()){var v=g.value,y=d(v);if(y==="break")break}}catch(w){o={error:w}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}f&&a.push(u)}}catch(w){n={error:w}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a},t}(),sw=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,n,r){var o=new aw(e).encode(),i=de.truncDivision(o.getSize()*n,100)+11,a=o.getSize()+i,s,l,u,f,d;if(r!==t.DEFAULT_AZTEC_LAYERS){if(s=r<0,l=Math.abs(r),l>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new se(pe.format("Illegal value %s for layers",r));u=t.totalBitsInLayer(l,s),f=t.WORD_SIZE[l];var p=u-u%f;if(d=t.stuffBits(o,f),d.getSize()+i>p)throw new se("Data to large for user specified layer");if(s&&d.getSize()>f*64)throw new se("Data to large for user specified layer")}else{f=0,d=null;for(var g=0;;g++){if(g>t.MAX_NB_BITS)throw new se("Data too large for an Aztec code");if(s=g<=3,l=s?g+1:g,u=t.totalBitsInLayer(l,s),!(a>u)){(d==null||f!==t.WORD_SIZE[l])&&(f=t.WORD_SIZE[l],d=t.stuffBits(o,f));var p=u-u%f;if(!(s&&d.getSize()>f*64)&&d.getSize()+i<=p)break}}}var v=t.generateCheckWords(d,u,f),y=d.getSize()/f,w=t.generateModeMessage(s,l,y),x=(s?11:14)+l*4,m=new Int32Array(x),_;if(s){_=x;for(var g=0;g<m.length;g++)m[g]=g}else{_=x+1+2*de.truncDivision(de.truncDivision(x,2)-1,15);for(var S=de.truncDivision(x,2),A=de.truncDivision(_,2),g=0;g<S;g++){var R=g+de.truncDivision(g,15);m[S-g-1]=A-R-1,m[S+g]=A+R+1}}for(var N=new An(_),g=0,M=0;g<l;g++){for(var F=(l-g)*4+(s?9:12),k=0;k<F;k++)for(var $=k*2,X=0;X<2;X++)v.get(M+$+X)&&N.set(m[g*2+X],m[g*2+k]),v.get(M+F*2+$+X)&&N.set(m[g*2+k],m[x-1-g*2-X]),v.get(M+F*4+$+X)&&N.set(m[x-1-g*2-X],m[x-1-g*2-k]),v.get(M+F*6+$+X)&&N.set(m[x-1-g*2-k],m[g*2+X]);M+=F*8}if(t.drawModeMessage(N,s,_,w),s)t.drawBullsEye(N,de.truncDivision(_,2),5);else{t.drawBullsEye(N,de.truncDivision(_,2),7);for(var g=0,k=0;g<de.truncDivision(x,2)-1;g+=15,k+=16)for(var X=de.truncDivision(_,2)&1;X<_;X+=2)N.set(de.truncDivision(_,2)-k,X),N.set(de.truncDivision(_,2)+k,X),N.set(X,de.truncDivision(_,2)-k),N.set(X,de.truncDivision(_,2)+k)}var te=new YE;return te.setCompact(s),te.setSize(_),te.setLayers(l),te.setCodeWords(y),te.setMatrix(N),te},t.drawBullsEye=function(e,n,r){for(var o=0;o<r;o+=2)for(var i=n-o;i<=n+o;i++)e.set(i,n-o),e.set(i,n+o),e.set(n-o,i),e.set(n+o,i);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)},t.generateModeMessage=function(e,n,r){var o=new ft;return e?(o.appendBits(n-1,2),o.appendBits(r-1,6),o=t.generateCheckWords(o,28,4)):(o.appendBits(n-1,5),o.appendBits(r-1,11),o=t.generateCheckWords(o,40,4)),o},t.drawModeMessage=function(e,n,r,o){var i=de.truncDivision(r,2);if(n)for(var a=0;a<7;a++){var s=i-3+a;o.get(a)&&e.set(s,i-5),o.get(a+7)&&e.set(i+5,s),o.get(20-a)&&e.set(s,i+5),o.get(27-a)&&e.set(i-5,s)}else for(var a=0;a<10;a++){var s=i-5+a+de.truncDivision(a,5);o.get(a)&&e.set(s,i-7),o.get(a+10)&&e.set(i+7,s),o.get(29-a)&&e.set(s,i+7),o.get(39-a)&&e.set(i-7,s)}},t.generateCheckWords=function(e,n,r){var o,i,a=e.getSize()/r,s=new ag(t.getGF(r)),l=de.truncDivision(n,r),u=t.bitsToWords(e,r,l);s.encode(u,l-a);var f=n%r,d=new ft;d.appendBits(0,f);try{for(var p=sw(Array.from(u)),g=p.next();!g.done;g=p.next()){var v=g.value;d.appendBits(v,r)}}catch(y){o={error:y}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(o)throw o.error}}return d},t.bitsToWords=function(e,n,r){var o=new Int32Array(r),i,a;for(i=0,a=e.getSize()/n;i<a;i++){for(var s=0,l=0;l<n;l++)s|=e.get(i*n+l)?1<<n-l-1:0;o[i]=s}return o},t.getGF=function(e){switch(e){case 4:return kt.AZTEC_PARAM;case 6:return kt.AZTEC_DATA_6;case 8:return kt.AZTEC_DATA_8;case 10:return kt.AZTEC_DATA_10;case 12:return kt.AZTEC_DATA_12;default:throw new se("Unsupported word size "+e)}},t.stuffBits=function(e,n){for(var r=new ft,o=e.getSize(),i=(1<<n)-2,a=0;a<o;a+=n){for(var s=0,l=0;l<n;l++)(a+l>=o||e.get(a+l))&&(s|=1<<n-1-l);(s&i)===i?(r.appendBits(s&i,n),a--):s&i?r.appendBits(s,n):(r.appendBits(s|1,n),a--)}return r},t.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();var lw={audio:!1,video:{facingMode:"environment"}},uw=300,fw=function(t){var e=t===void 0?{}:t,n=e.timeBetweenDecodingAttempts,r=n===void 0?uw:n,o=e.hints;return le.useMemo(function(){var i=new sE(o);return i.timeBetweenDecodingAttempts=r,i},[o,r])},jd=globalThis&&globalThis.__awaiter||function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(f){try{u(r.next(f))}catch(d){a(d)}}function l(f){try{u(r.throw(f))}catch(d){a(d)}}function u(f){f.done?i(f.value):o(f.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},e0=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(f){return l([u,f])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(f){u=[6,f],o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},cw=function(t){var e=t.resetStream,n=le.useState(!1),r=n[0],o=n[1],i=le.useState(null),a=i[0],s=i[1],l=le.useRef(null),u=le.useRef(e),f=le.useCallback(function(g){l.current=g,s(typeof g.getCapabilities=="function"?g.getCapabilities().torch!==void 0:!1)},[]),d=le.useCallback(function(){return jd(void 0,void 0,void 0,function(){return e0(this,function(g){switch(g.label){case 0:return!l.current||!a?[2]:[4,l.current.applyConstraints({advanced:[{torch:!0}]})];case 1:return g.sent(),o(!0),[2]}})})},[a]),p=le.useCallback(function(){return jd(void 0,void 0,void 0,function(){return e0(this,function(g){switch(g.label){case 0:return!l.current||!a?[2]:(l.current=null,s(null),o(!1),[4,u.current()]);case 1:return g.sent(),[2]}})})},[a]);return le.useEffect(function(){u.current=e},[e]),{init:f,isOn:r,isAvailable:a,on:d,off:p}},dw=function(t,e){return JSON.stringify(t)===JSON.stringify(e)},t0=globalThis&&globalThis.__awaiter||function(t,e,n,r){function o(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function s(f){try{u(r.next(f))}catch(d){a(d)}}function l(f){try{u(r.throw(f))}catch(d){a(d)}}function u(f){f.done?i(f.value):o(f.value).then(s,l)}u((r=r.apply(t,e||[])).next())})},n0=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(f){return l([u,f])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(f){u=[6,f],o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},hw=globalThis&&globalThis.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},pw=function(t){t===void 0&&(t={});var e=t.paused,n=e===void 0?!1:e,r=t.hints,o=t.timeBetweenDecodingAttempts,i=t.onDecodeResult,a=i===void 0?function(){}:i,s=t.onDecodeError,l=s===void 0?function(){}:s,u=t.onError,f=u===void 0?function(){}:u,d="deviceId"in t?t.deviceId:void 0,p=le.useState("constraints"in t?t.constraints:void 0),g=p[0],v=p[1],y=le.useRef(a),w=le.useRef(l),x=le.useRef(f),m=le.useRef(null),_=fw({hints:r,timeBetweenDecodingAttempts:o}),S=cw({resetStream:function(){return t0(void 0,void 0,void 0,function(){return n0(this,function(k){switch(k.label){case 0:return F(),[4,M()];case 1:return k.sent(),[2]}})})}}),A=S.init,R=hw(S,["init"]),N=le.useCallback(function(k,$){k&&y.current(k),$&&w.current($)},[]),M=le.useCallback(function(){return t0(void 0,void 0,void 0,function(){var k,$,X;return n0(this,function(te){switch(te.label){case 0:if(!m.current)return[2];if(n)return[2];te.label=1;case 1:return te.trys.push([1,6,,7]),d?[4,_.decodeFromVideoDevice(d,m.current,N)]:[3,3];case 2:return te.sent(),[3,5];case 3:return[4,_.decodeFromConstraints(g??lw,m.current,N)];case 4:te.sent(),te.label=5;case 5:return[3,7];case 6:return k=te.sent(),x.current(k),[2];case 7:return m.current?($=m.current.srcObject,X=$.getVideoTracks()[0],X&&A(X),[2]):[2]}})})},[_,d,g,n,N,A]),F=le.useCallback(function(){_.reset()},[_]);return le.useEffect(function(){y.current=a},[a]),le.useEffect(function(){w.current=l},[l]),le.useEffect(function(){x.current=f},[f]),le.useEffect(function(){var k=dw(g,t.constraints);k||v(t.constraints)},[g,t]),le.useEffect(function(){return M(),function(){F()}},[M,F]),{ref:m,torch:R}};const gw=({onFoodScanned:t,onManualEntry:e})=>{var S,A,R;const[n,r]=le.useState(null),[o,i]=le.useState(!1),[a,s]=le.useState(""),[l,u]=le.useState(""),[f,d]=le.useState(""),[p,g]=le.useState(!1);le.useEffect(()=>{v()},[]);const v=async()=>{try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})).getTracks().forEach(M=>M.stop()),g(!0),d("")}catch(N){console.error("Camera permission error:",N),d("Camera access denied. Please enable camera permissions in your browser settings."),g(!1)}},{ref:y}=pw({onDecodeResult(N){const M=N.getText();console.log(" Barcode detected:",M),M&&M!==l&&(u(M),w(M))},onError(N){console.error("Scanner error:",N),d("Scanner initialization failed. Try refreshing the page.")},paused:o||n!==null||!p,constraints:{video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}}}),w=async N=>{console.log(" Processing barcode:",N),i(!0),s("");try{const M=await r2(N);console.log(" Product found:",M),r(M)}catch(M){console.error(" Product lookup error:",M),s(`Product not found (Code: ${N}). The product may not be in the database. Try manual entry.`),u("")}finally{i(!1)}},x=()=>{n&&(console.log(" Adding food to log:",n),t(n))},m=()=>{console.log(" Resetting scanner"),s(""),r(null),u("")},_=()=>{const N=prompt("Enter barcode number manually:");N&&N.trim()&&(console.log(" Manual barcode entry:",N),w(N.trim()))};return f&&!p?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"text-center mt-12",children:[E.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Scan Barcode"}),E.jsx("p",{className:"text-gray-600",children:"Camera access required"})]}),E.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[E.jsxs("div",{className:"flex items-start space-x-3 mb-4",children:[E.jsx(vd,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),E.jsxs("div",{className:"flex-1",children:[E.jsx("p",{className:"text-red-800 font-medium mb-2",children:"Camera Access Denied"}),E.jsx("p",{className:"text-red-700 text-sm",children:f}),E.jsx("p",{className:"text-red-700 text-sm mt-2",children:"To enable camera access:"}),E.jsxs("ul",{className:"text-red-700 text-xs mt-1 ml-4 list-disc",children:[E.jsx("li",{children:"Tap the lock/info icon in your browser's address bar"}),E.jsx("li",{children:"Enable camera permissions"}),E.jsx("li",{children:"Refresh this page"})]})]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsx("button",{onClick:v,className:"bg-red-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-700 transition-colors text-sm",children:"Retry Permission"}),E.jsx("button",{onClick:e,className:"bg-gray-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-gray-700 transition-colors text-sm",children:"Manual Entry"})]})]})]}):E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Scan Barcode"}),E.jsx("p",{className:"text-gray-600",children:"Point your camera at the product barcode"})]}),!n&&p&&E.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",style:{minHeight:"400px"},children:[E.jsx("video",{ref:y,className:"w-full h-full object-cover",style:{minHeight:"400px"},playsInline:!0,autoPlay:!0,muted:!0}),E.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:E.jsxs("div",{className:"w-64 h-64 border-4 border-white rounded-lg shadow-lg",children:[E.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-green-500"}),E.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-green-500"}),E.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-green-500"}),E.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-green-500"})]})}),!o&&!a&&E.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center",children:E.jsxs("div",{className:"bg-black bg-opacity-70 text-white px-4 py-2 rounded-full flex items-center space-x-2",children:[E.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),E.jsx("span",{className:"text-sm",children:"Scanning..."})]})})]}),!n&&!a&&!o&&p&&E.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:E.jsxs("div",{className:"flex items-start space-x-3",children:[E.jsx(Yp,{className:"w-5 h-5 text-blue-600 mt-0.5"}),E.jsxs("div",{className:"flex-1",children:[E.jsx("p",{className:"text-sm text-blue-900 font-medium",children:"Align the barcode within the frame"}),E.jsxs("ul",{className:"text-xs text-blue-700 mt-2 space-y-1",children:[E.jsx("li",{children:" Make sure there's good lighting"}),E.jsx("li",{children:" Hold steady and keep barcode in focus"}),E.jsx("li",{children:" The scanner detects automatically"})]})]})]})}),o&&E.jsxs("div",{className:"text-center py-8",children:[E.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto"}),E.jsx("p",{className:"text-gray-600 mt-2",children:"Looking up product..."}),E.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Code: ",l]})]}),a&&E.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[E.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[E.jsx(vd,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),E.jsx("p",{className:"text-red-800 flex-1 text-sm",children:a})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsx("button",{onClick:m,className:"bg-gray-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-gray-700 transition-colors text-sm",children:"Try Again"}),E.jsx("button",{onClick:e,className:"bg-red-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-700 transition-colors text-sm",children:"Manual Entry"})]})]}),n&&!o&&E.jsxs("div",{className:"bg-white border-2 border-green-500 rounded-lg p-4 space-y-4",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center space-x-2",children:[E.jsx(md,{className:"w-6 h-6 text-green-600"}),E.jsx("h3",{className:"font-semibold text-lg text-gray-900",children:"Product Found!"})]}),E.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:E.jsx(Kp,{className:"w-5 h-5"})})]}),E.jsxs("div",{className:"space-y-3",children:[E.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[E.jsx("div",{className:"text-sm text-gray-600",children:"Product Name"}),E.jsx("div",{className:"font-semibold text-gray-900",children:n.name})]}),n.brand&&E.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[E.jsx("div",{className:"text-sm text-gray-600",children:"Brand"}),E.jsx("div",{className:"font-semibold text-gray-900",children:n.brand})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[E.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[E.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Calories"}),E.jsx("div",{className:"text-2xl font-bold text-gray-900",children:Math.round(n.calories)||0})]}),E.jsxs("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[E.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Protein"}),E.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[((S=n.protein)==null?void 0:S.toFixed(1))||0,E.jsx("span",{className:"text-sm ml-1",children:"g"})]})]}),E.jsxs("div",{className:"bg-yellow-50 p-3 rounded-lg text-center",children:[E.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Carbs"}),E.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[((A=n.carbs)==null?void 0:A.toFixed(1))||0,E.jsx("span",{className:"text-sm ml-1",children:"g"})]})]}),E.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg text-center",children:[E.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Fats"}),E.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[((R=n.fats)==null?void 0:R.toFixed(1))||0,E.jsx("span",{className:"text-sm ml-1",children:"g"})]})]})]}),n.servingSize&&E.jsxs("div",{className:"text-sm text-gray-600 text-center",children:["Per ",n.servingSize]})]}),E.jsxs("div",{className:"flex space-x-3 pt-2",children:[E.jsxs("button",{onClick:x,className:"flex-1 bg-black text-white py-3 rounded-lg font-semibold hover:bg-gray-800 transition-colors flex items-center justify-center space-x-2",children:[E.jsx(md,{className:"w-5 h-5"}),E.jsx("span",{children:"Add to Log"})]}),E.jsx("button",{onClick:m,className:"px-6 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:border-gray-400 transition-colors",children:"Scan Another"})]})]}),!n&&!o&&p&&E.jsxs("div",{className:"space-y-3",children:[E.jsxs("button",{onClick:_,className:"w-full border-2 border-gray-300 text-gray-700 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 hover:border-gray-400 transition-colors",children:[E.jsx("span",{children:""}),E.jsx("span",{children:"Enter Barcode Manually"})]}),E.jsxs("button",{onClick:e,className:"w-full border-2 border-gray-300 text-gray-700 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 hover:border-gray-400 transition-colors",children:[E.jsx(Nr,{className:"w-5 h-5"}),E.jsx("span",{children:"Enter Food Details"})]})]})]})};var vw={exports:{}};(function(t){var e=function(n){var r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(U,B,G){U[B]=G.value},a,s=typeof Symbol=="function"?Symbol:{},l=s.iterator||"@@iterator",u=s.asyncIterator||"@@asyncIterator",f=s.toStringTag||"@@toStringTag";function d(U,B,G){return Object.defineProperty(U,B,{value:G,enumerable:!0,configurable:!0,writable:!0}),U[B]}try{d({},"")}catch{d=function(B,G,j){return B[G]=j}}function p(U,B,G,j){var ie=B&&B.prototype instanceof _?B:_,ue=Object.create(ie.prototype),We=new Ce(j||[]);return i(ue,"_invoke",{value:X(U,G,We)}),ue}n.wrap=p;function g(U,B,G){try{return{type:"normal",arg:U.call(B,G)}}catch(j){return{type:"throw",arg:j}}}var v="suspendedStart",y="suspendedYield",w="executing",x="completed",m={};function _(){}function S(){}function A(){}var R={};d(R,l,function(){return this});var N=Object.getPrototypeOf,M=N&&N(N(re([])));M&&M!==r&&o.call(M,l)&&(R=M);var F=A.prototype=_.prototype=Object.create(R);S.prototype=A,i(F,"constructor",{value:A,configurable:!0}),i(A,"constructor",{value:S,configurable:!0}),S.displayName=d(A,f,"GeneratorFunction");function k(U){["next","throw","return"].forEach(function(B){d(U,B,function(G){return this._invoke(B,G)})})}n.isGeneratorFunction=function(U){var B=typeof U=="function"&&U.constructor;return B?B===S||(B.displayName||B.name)==="GeneratorFunction":!1},n.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,A):(U.__proto__=A,d(U,f,"GeneratorFunction")),U.prototype=Object.create(F),U},n.awrap=function(U){return{__await:U}};function $(U,B){function G(ue,We,Be,Je){var yt=g(U[ue],U,We);if(yt.type==="throw")Je(yt.arg);else{var No=yt.arg,gr=No.value;return gr&&typeof gr=="object"&&o.call(gr,"__await")?B.resolve(gr.__await).then(function(Sn){G("next",Sn,Be,Je)},function(Sn){G("throw",Sn,Be,Je)}):B.resolve(gr).then(function(Sn){No.value=Sn,Be(No)},function(Sn){return G("throw",Sn,Be,Je)})}}var j;function ie(ue,We){function Be(){return new B(function(Je,yt){G(ue,We,Je,yt)})}return j=j?j.then(Be,Be):Be()}i(this,"_invoke",{value:ie})}k($.prototype),d($.prototype,u,function(){return this}),n.AsyncIterator=$,n.async=function(U,B,G,j,ie){ie===void 0&&(ie=Promise);var ue=new $(p(U,B,G,j),ie);return n.isGeneratorFunction(B)?ue:ue.next().then(function(We){return We.done?We.value:ue.next()})};function X(U,B,G){var j=v;return function(ue,We){if(j===w)throw new Error("Generator is already running");if(j===x){if(ue==="throw")throw We;return z()}for(G.method=ue,G.arg=We;;){var Be=G.delegate;if(Be){var Je=te(Be,G);if(Je){if(Je===m)continue;return Je}}if(G.method==="next")G.sent=G._sent=G.arg;else if(G.method==="throw"){if(j===v)throw j=x,G.arg;G.dispatchException(G.arg)}else G.method==="return"&&G.abrupt("return",G.arg);j=w;var yt=g(U,B,G);if(yt.type==="normal"){if(j=G.done?x:y,yt.arg===m)continue;return{value:yt.arg,done:G.done}}else yt.type==="throw"&&(j=x,G.method="throw",G.arg=yt.arg)}}}function te(U,B){var G=B.method,j=U.iterator[G];if(j===a)return B.delegate=null,G==="throw"&&U.iterator.return&&(B.method="return",B.arg=a,te(U,B),B.method==="throw")||G!=="return"&&(B.method="throw",B.arg=new TypeError("The iterator does not provide a '"+G+"' method")),m;var ie=g(j,U.iterator,B.arg);if(ie.type==="throw")return B.method="throw",B.arg=ie.arg,B.delegate=null,m;var ue=ie.arg;if(!ue)return B.method="throw",B.arg=new TypeError("iterator result is not an object"),B.delegate=null,m;if(ue.done)B[U.resultName]=ue.value,B.next=U.nextLoc,B.method!=="return"&&(B.method="next",B.arg=a);else return ue;return B.delegate=null,m}k(F),d(F,f,"Generator"),d(F,l,function(){return this}),d(F,"toString",function(){return"[object Generator]"});function Ee(U){var B={tryLoc:U[0]};1 in U&&(B.catchLoc=U[1]),2 in U&&(B.finallyLoc=U[2],B.afterLoc=U[3]),this.tryEntries.push(B)}function we(U){var B=U.completion||{};B.type="normal",delete B.arg,U.completion=B}function Ce(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(Ee,this),this.reset(!0)}n.keys=function(U){var B=Object(U),G=[];for(var j in B)G.push(j);return G.reverse(),function ie(){for(;G.length;){var ue=G.pop();if(ue in B)return ie.value=ue,ie.done=!1,ie}return ie.done=!0,ie}};function re(U){if(U){var B=U[l];if(B)return B.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var G=-1,j=function ie(){for(;++G<U.length;)if(o.call(U,G))return ie.value=U[G],ie.done=!1,ie;return ie.value=a,ie.done=!0,ie};return j.next=j}}return{next:z}}n.values=re;function z(){return{value:a,done:!0}}return Ce.prototype={constructor:Ce,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(we),!U)for(var B in this)B.charAt(0)==="t"&&o.call(this,B)&&!isNaN(+B.slice(1))&&(this[B]=a)},stop:function(){this.done=!0;var U=this.tryEntries[0],B=U.completion;if(B.type==="throw")throw B.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var B=this;function G(Je,yt){return ue.type="throw",ue.arg=U,B.next=Je,yt&&(B.method="next",B.arg=a),!!yt}for(var j=this.tryEntries.length-1;j>=0;--j){var ie=this.tryEntries[j],ue=ie.completion;if(ie.tryLoc==="root")return G("end");if(ie.tryLoc<=this.prev){var We=o.call(ie,"catchLoc"),Be=o.call(ie,"finallyLoc");if(We&&Be){if(this.prev<ie.catchLoc)return G(ie.catchLoc,!0);if(this.prev<ie.finallyLoc)return G(ie.finallyLoc)}else if(We){if(this.prev<ie.catchLoc)return G(ie.catchLoc,!0)}else if(Be){if(this.prev<ie.finallyLoc)return G(ie.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(U,B){for(var G=this.tryEntries.length-1;G>=0;--G){var j=this.tryEntries[G];if(j.tryLoc<=this.prev&&o.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var ie=j;break}}ie&&(U==="break"||U==="continue")&&ie.tryLoc<=B&&B<=ie.finallyLoc&&(ie=null);var ue=ie?ie.completion:{};return ue.type=U,ue.arg=B,ie?(this.method="next",this.next=ie.finallyLoc,m):this.complete(ue)},complete:function(U,B){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&B&&(this.next=B),m},finish:function(U){for(var B=this.tryEntries.length-1;B>=0;--B){var G=this.tryEntries[B];if(G.finallyLoc===U)return this.complete(G.completion,G.afterLoc),we(G),m}},catch:function(U){for(var B=this.tryEntries.length-1;B>=0;--B){var G=this.tryEntries[B];if(G.tryLoc===U){var j=G.completion;if(j.type==="throw"){var ie=j.arg;we(G)}return ie}}throw new Error("illegal catch attempt")},delegateYield:function(U,B,G){return this.delegate={iterator:re(U),resultName:B,nextLoc:G},this.method==="next"&&(this.arg=a),m}},n}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(vw);var Mf=(t,e)=>`${t}-${e}-${Math.random().toString(16).slice(3,8)}`;const mw=Mf;let r0=0;var fg=({id:t,action:e,payload:n={}})=>{let r=t;return typeof r>"u"&&(r=mw("Job",r0),r0+=1),{id:r,action:e,payload:n}},Ao={};let bf=!1;Ao.logging=bf;Ao.setLogging=t=>{bf=t};Ao.log=(...t)=>bf?console.log.apply(globalThis,t):null;const yw=fg,{log:na}=Ao,xw=Mf;let o0=0;var _w=()=>{const t=xw("Scheduler",o0),e={},n={};let r=[];o0+=1;const o=()=>r.length,i=()=>Object.keys(e).length,a=()=>{if(r.length!==0){const d=Object.keys(e);for(let p=0;p<d.length;p+=1)if(typeof n[d[p]]>"u"){r[0](e[d[p]]);break}}},s=(d,p)=>new Promise((g,v)=>{const y=yw({action:d,payload:p});r.push(async w=>{r.shift(),n[w.id]=y;try{g(await w[d].apply(globalThis,[...p,y.id]))}catch(x){v(x)}finally{delete n[w.id],a()}}),na(`[${t}]: Add ${y.id} to JobQueue`),na(`[${t}]: JobQueue length=${r.length}`),a()});return{addWorker:d=>(e[d.id]=d,na(`[${t}]: Add ${d.id}`),na(`[${t}]: Number of workers=${i()}`),a(),d.id),addJob:async(d,...p)=>{if(i()===0)throw Error(`[${t}]: You need to have at least one worker before adding jobs`);return s(d,p)},terminate:async()=>{Object.keys(e).forEach(async d=>{await e[d].terminate()}),r=[]},getQueueLen:o,getNumWorkers:i}},Ew=t=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof Yo=="function"&&(e.type="node"),typeof t>"u"?e:e[t]};const ww=Ew("type")==="browser",Cw=ww?t=>new URL(t,window.location.href).href:t=>t;var Aw=t=>{const e={...t};return["corePath","workerPath","langPath"].forEach(n=>{t[n]&&(e[n]=Cw(e[n]))}),e},cg={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Sw="tesseract.js",Tw="6.0.1",Iw="Pure Javascript Multilingual OCR",Nw="src/index.js",Rw="commonjs",Pw="src/index.d.ts",Dw="dist/tesseract.min.js",Mw="dist/tesseract.min.js",bw={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},Ow={"./src/worker/node/index.js":"./src/worker/browser/index.js"},kw="",Lw=["jeromewu"],Fw="Apache-2.0",Bw={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","npm-run-all":"^4.1.5",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},Uw={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},Vw={"@rollup/pluginutils":"^5.0.2"},Gw={type:"git",url:"https://github.com/naptha/tesseract.js.git"},Hw={url:"https://github.com/naptha/tesseract.js/issues"},zw="https://github.com/naptha/tesseract.js",Ww={type:"opencollective",url:"https://opencollective.com/tesseractjs"},qw={name:Sw,version:Tw,description:Iw,main:Nw,type:Rw,types:Pw,unpkg:Dw,jsdelivr:Mw,scripts:bw,browser:Ow,author:kw,contributors:Lw,license:Fw,devDependencies:Bw,dependencies:Uw,overrides:Vw,repository:Gw,bugs:Hw,homepage:zw,collective:Ww};var $w={workerBlobURL:!0,logger:()=>{}};const Yw=qw.version,Xw=$w;var Kw={...Xw,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${Yw}/dist/worker.min.js`},Jw=({workerPath:t,workerBlobURL:e})=>{let n;if(Blob&&URL&&e){const r=new Blob([`importScripts("${t}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(r))}else n=new Worker(t);return n},Zw=t=>{t.terminate()},Qw=(t,e)=>{t.onmessage=({data:n})=>{e(n)}},jw=async(t,e)=>{t.postMessage(e)};const fl=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{e(r.result)},r.onerror=({target:{error:{code:o}}})=>{n(Error(`File could not be read! Code=${o}`))},r.readAsArrayBuffer(t)}),yu=async t=>{let e=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?e=atob(t.split(",")[1]).split("").map(n=>n.charCodeAt(0)):e=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(e=await yu(t.src)),t.tagName==="VIDEO"&&(e=await yu(t.poster)),t.tagName==="CANVAS"&&await new Promise(n=>{t.toBlob(async r=>{e=await fl(r),n()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const n=await t.convertToBlob();e=await fl(n)}else(t instanceof File||t instanceof Blob)&&(e=await fl(t));return new Uint8Array(e)};var eC=yu;const tC=Kw,nC=Jw,rC=Zw,oC=Qw,iC=jw,aC=eC;var sC={defaultOptions:tC,spawnWorker:nC,terminateWorker:rC,onMessage:oC,send:iC,loadImage:aC};const lC=Aw,yn=fg,{log:i0}=Ao,uC=Mf,yr=cg,{defaultOptions:fC,spawnWorker:cC,terminateWorker:dC,onMessage:hC,loadImage:a0,send:pC}=sC;let s0=0;var dg=async(t="eng",e=yr.LSTM_ONLY,n={},r={})=>{const o=uC("Worker",s0),{logger:i,errorHandler:a,...s}=lC({...fC,...n}),l={},u=typeof t=="string"?t.split("+"):t;let f=e,d=r;const p=[yr.DEFAULT,yr.LSTM_ONLY].includes(e)&&!s.legacyCore;let g,v;const y=new Promise((re,z)=>{v=re,g=z}),w=re=>{g(re.message)};let x=cC(s);x.onerror=w,s0+=1;const m=({id:re,action:z,payload:U})=>new Promise((B,G)=>{i0(`[${o}]: Start ${re}, action=${z}`);const j=`${z}-${re}`;l[j]={resolve:B,reject:G},pC(x,{workerId:o,jobId:re,action:z,payload:U})}),_=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),S=re=>m(yn({id:re,action:"load",payload:{options:{lstmOnly:p,corePath:s.corePath,logging:s.logging}}})),A=(re,z,U)=>m(yn({id:U,action:"FS",payload:{method:"writeFile",args:[re,z]}})),R=(re,z)=>m(yn({id:z,action:"FS",payload:{method:"readFile",args:[re,{encoding:"utf8"}]}})),N=(re,z)=>m(yn({id:z,action:"FS",payload:{method:"unlink",args:[re]}})),M=(re,z,U)=>m(yn({id:U,action:"FS",payload:{method:re,args:z}})),F=(re,z)=>m(yn({id:z,action:"loadLanguage",payload:{langs:re,options:{langPath:s.langPath,dataPath:s.dataPath,cachePath:s.cachePath,cacheMethod:s.cacheMethod,gzip:s.gzip,lstmOnly:[yr.DEFAULT,yr.LSTM_ONLY].includes(f)&&!s.legacyLang}}})),k=(re,z,U,B)=>m(yn({id:B,action:"initialize",payload:{langs:re,oem:z,config:U}})),$=(re="eng",z,U,B)=>{if(p&&[yr.TESSERACT_ONLY,yr.TESSERACT_LSTM_COMBINED].includes(z))throw Error("Legacy model requested but code missing.");const G=z||f;f=G;const j=U||d;d=j;const ue=(typeof re=="string"?re.split("+"):re).filter(We=>!u.includes(We));return u.push(...ue),ue.length>0?F(ue,B).then(()=>k(re,G,j,B)):k(re,G,j,B)},X=(re={},z)=>m(yn({id:z,action:"setParameters",payload:{params:re}})),te=async(re,z={},U={text:!0},B)=>m(yn({id:B,action:"recognize",payload:{image:await a0(re),options:z,output:U}})),Ee=async(re,z)=>{if(p)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return m(yn({id:z,action:"detect",payload:{image:await a0(re)}}))},we=async()=>(x!==null&&(dC(x),x=null),Promise.resolve());hC(x,({workerId:re,jobId:z,status:U,action:B,data:G})=>{const j=`${B}-${z}`;if(U==="resolve")i0(`[${re}]: Complete ${z}`),l[j].resolve({jobId:z,data:G}),delete l[j];else if(U==="reject")if(l[j].reject(G),delete l[j],B==="load"&&g(G),a)a(G);else throw Error(G);else U==="progress"&&i({...G,userJobId:z})});const Ce={id:o,worker:x,load:_,writeText:A,readText:R,removeFile:N,FS:M,reinitialize:$,setParameters:X,recognize:te,detect:Ee,terminate:we};return S().then(()=>F(t)).then(()=>k(t,e,r)).then(()=>v(Ce)).catch(()=>{}),y};const hg=dg,gC=async(t,e,n)=>{const r=await hg(e,1,n);return r.recognize(t).finally(async()=>{await r.terminate()})},vC=async(t,e)=>{const n=await hg("osd",0,e);return n.detect(t).finally(async()=>{await n.terminate()})};var mC={recognize:gC,detect:vC},yC={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},xC={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const _C=_w,EC=dg,wC=mC,CC=yC,AC=cg,SC=xC,{setLogging:TC}=Ao;var IC={languages:CC,OEM:AC,PSM:SC,createScheduler:_C,createWorker:EC,setLogging:TC,...wC};const NC=Nu(IC),RC=({onFoodAdded:t})=>{const[e,n]=le.useState({name:"",brand:"",calories:"",protein:"",carbs:"",fats:"",servingSize:"100g",ingredients:""}),[r,o]=le.useState(!1),[i,a]=le.useState(null),[s,l]=le.useState(""),u=v=>{const{name:y,value:w}=v.target;n(x=>({...x,[y]:w}))},f=v=>{if(v.preventDefault(),!e.name.trim()){alert("Please enter a food name");return}const y={...e,calories:parseFloat(e.calories)||0,protein:parseFloat(e.protein)||0,carbs:parseFloat(e.carbs)||0,fats:parseFloat(e.fats)||0,id:Date.now(),timestamp:new Date().toISOString()};t(y),n({name:"",brand:"",calories:"",protein:"",carbs:"",fats:"",servingSize:"100g",ingredients:""}),a(null)},d=async v=>{try{o(!0),l("");const y=URL.createObjectURL(v);a(y);const w="AIzaSyD1uH_E9qhrwqSYiRUVApaRM8ToTl0xGgQ",x=m=>{const S=(we=>(we||"").replace(/\u00A0/g," "))(m).toLowerCase(),A=we=>{const Ce=S.match(we);if(!Ce)return null;const re=Ce[1].replace(/[^\d.]/g,"");return re?parseFloat(re):null},R=A(/calories[:\s]*([\d.,]+\s?k?cal)/i)||A(/energy[:\s]*([\d.,]+)/i)||A(/(\d{2,4})\s?k?cal/i)||null,N=A(/protein[:\s]*([\d.,]+)\s?g/i)||null,M=A(/carbohydrates[:\s]*([\d.,]+)\s?g/i)||A(/carbs[:\s]*([\d.,]+)\s?g/i)||null,F=A(/fat[:\s]*([\d.,]+)\s?g/i)||A(/fats[:\s]*([\d.,]+)\s?g/i)||null,k=S.match(/serving[:\s]*([^\n\r,]+)/i),$=k?k[1].trim():null,X=m.split(/\r?\n/).map(we=>we.trim()).filter(Boolean),te=X.length?X[0].slice(0,120):null,Ee=X.length>1&&X[1].length<40?X[1]:null;return{name:te||"",brand:Ee||"",calories:R!==null?String(R):"",protein:N!==null?String(N):"",carbs:M!==null?String(M):"",fats:F!==null?String(F):"",servingSize:$||"100g"}};if(w)try{const m=await g(v),S=`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${w}`,R={contents:[{parts:[{text:"Extract nutrition information from this image of a nutrition facts label. Return only valid JSON with keys: name, brand, calories, protein, carbs, fats, servingSize. Units: grams for macros and kcal for calories. If a value is not present, set it to an empty string."},{inline_data:{mime_type:v.type,data:m}}]}],generationConfig:{maxOutputTokens:512}},N=await fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(!N.ok){const $=await N.text();throw new Error(`Gemini API error ${N.status}: ${$}`)}const F=(await N.json()).candidates[0].content.parts[0].text;let k=null;try{k=JSON.parse(F)}catch{k=x(F)}n($=>({...$,name:k.name||$.name,brand:k.brand||$.brand,calories:k.calories||$.calories,protein:k.protein||$.protein,carbs:k.carbs||$.carbs,fats:k.fats||$.fats,servingSize:k.servingSize||$.servingSize})),o(!1),URL.revokeObjectURL(y);return}catch{console.warn("Gemini API attempt failed")}try{const{data:m}=await NC.recognize(v,"eng",{logger:A=>{}}),_=(m==null?void 0:m.text)||"",S=x(_);n(A=>({...A,name:S.name||A.name,brand:S.brand||A.brand,calories:S.calories||A.calories,protein:S.protein||A.protein,carbs:S.carbs||A.carbs,fats:S.fats||A.fats,servingSize:S.servingSize||A.servingSize})),o(!1),URL.revokeObjectURL(y)}catch(m){console.error("Local OCR failed:",m),l("Failed to extract nutrition information. Please enter manually."),o(!1),URL.revokeObjectURL(y)}}catch(y){console.error("OCR/Error:",y),l("Failed to extract nutrition information. Please enter manually."),o(!1)}},p=async v=>{var w;const y=(w=v.target.files)==null?void 0:w[0];if(y){if(!y.type.startsWith("image/")){l("Please upload a valid image file");return}if(y.size>5*1024*1024){l("Image size should be less than 5MB");return}await d(y)}},g=v=>new Promise((y,w)=>{const x=new FileReader;x.readAsDataURL(v),x.onload=()=>{var _;const m=(_=x.result)==null?void 0:_.split(",")[1];y(m)},x.onerror=m=>w(m)});return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"text-center mt-12",children:[E.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add Food Manually"}),E.jsx("p",{className:"text-gray-600",children:"Enter food nutrition information"})]}),E.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[E.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:" AI Nutrition Label Scan"}),E.jsx("p",{className:"text-blue-700 text-sm mb-3",children:"Take a photo of a nutrition label and we'll extract the data automatically"}),i&&E.jsxs("div",{className:"mb-3 relative",children:[E.jsx("img",{src:i,alt:"Uploaded nutrition label",className:"w-full h-48 object-contain bg-white rounded border"}),E.jsx("button",{onClick:()=>{i&&URL.revokeObjectURL(i),a(null),l("")},className:"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600",children:E.jsx(Kp,{className:"w-4 h-4"})})]}),s&&E.jsx("div",{className:"mb-3 p-2 bg-red-100 border border-red-300 rounded text-red-700 text-sm",children:s}),E.jsxs("label",{className:"flex items-center justify-center space-x-2 bg-white border-2 border-blue-300 border-dashed rounded-lg p-4 cursor-pointer hover:border-blue-400 transition-colors",children:[E.jsx(y2,{className:"w-5 h-5 text-blue-600"}),E.jsx("span",{className:"text-blue-700 font-medium",children:r?"Processing Image...":"Upload Nutrition Label"}),E.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:p,className:"hidden",disabled:r})]}),r&&E.jsxs("div",{className:"mt-3 flex items-center justify-center",children:[E.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),E.jsx("span",{className:"ml-2 text-blue-700 text-sm",children:"Extracting nutrition data..."})]})]}),E.jsxs("form",{onSubmit:f,className:"space-y-4",children:[E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Food Name *"}),E.jsx("input",{type:"text",name:"name",value:e.name,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"e.g., Apple",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Brand"}),E.jsx("input",{type:"text",name:"brand",value:e.brand,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"e.g., Chobani"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Serving Size"}),E.jsx("input",{type:"text",name:"servingSize",value:e.servingSize,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"e.g., 1 cup, 100g"})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Calories"}),E.jsx("input",{type:"number",name:"calories",value:e.calories,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"0",min:"0"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Protein (g)"}),E.jsx("input",{type:"number",step:"0.1",name:"protein",value:e.protein,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"0",min:"0"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Carbs (g)"}),E.jsx("input",{type:"number",step:"0.1",name:"carbs",value:e.carbs,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"0",min:"0"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fats (g)"}),E.jsx("input",{type:"number",step:"0.1",name:"fats",value:e.fats,onChange:u,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"0",min:"0"})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ingredients (Optional)"}),E.jsx("textarea",{name:"ingredients",value:e.ingredients,onChange:u,rows:"3",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"List of ingredients..."})]}),E.jsxs("button",{type:"submit",className:"w-full bg-black text-white py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 hover:bg-gray-800 transition-colors",children:[E.jsx(g2,{className:"w-5 h-5"}),E.jsx("span",{children:"Add to Today's Log"})]})]})]})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let PC,DC;function MC(){return{geminiUrl:PC,vertexUrl:DC}}function bC(t,e,n,r){var o,i;if(!(t!=null&&t.baseUrl)){const a=MC();return e?(o=a.vertexUrl)!==null&&o!==void 0?o:n:(i=a.geminiUrl)!==null&&i!==void 0?i:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bn{}function Q(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(e,o)){const i=e[o];return i!=null?String(i):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function h(t,e,n){for(let i=0;i<e.length-1;i++){const a=e[i];if(a.endsWith("[]")){const s=a.slice(0,-2);if(!(s in t))if(Array.isArray(n))t[s]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[s])){const l=t[s];if(Array.isArray(n))for(let u=0;u<l.length;u++){const f=l[u];h(f,e.slice(i+1),n[u])}else for(const u of l)h(u,e.slice(i+1),n)}return}else if(a.endsWith("[0]")){const s=a.slice(0,-3);s in t||(t[s]=[{}]);const l=t[s];h(l[0],e.slice(i+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const r=e[e.length-1],o=t[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const o=e[r];if(o.endsWith("[]")){const i=o.slice(0,-2);if(i in t){const a=t[i];return Array.isArray(a)?a.map(s=>c(s,e.slice(r+1),n)):n}else return n}else t=t[o]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function OC(t,e){for(const[n,r]of Object.entries(e)){const o=n.split("."),i=r.split("."),a=new Set;let s=-1;for(let l=0;l<o.length;l++)if(o[l]==="*"){s=l;break}if(s!==-1&&i.length>s)for(let l=s;l<i.length;l++){const u=i[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&a.add(u)}xu(t,o,i,0,a)}}function xu(t,e,n,r,o){if(r>=e.length||typeof t!="object"||t===null)return;const i=e[r];if(i.endsWith("[]")){const a=i.slice(0,-2),s=t;if(a in s&&Array.isArray(s[a]))for(const l of s[a])xu(l,e,n,r+1,o)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,s=Object.keys(a).filter(u=>!u.startsWith("_")&&!o.has(u)),l={};for(const u of s)l[u]=a[u];for(const[u,f]of Object.entries(l)){const d=[];for(const p of n.slice(r))p==="*"?d.push(u):d.push(p);h(a,d,f)}for(const u of s)delete a[u]}}else{const a=t;i in a&&xu(a[i],e,n,r+1,o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Of(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kC(t){const e={},n=c(t,["operationName"]);n!=null&&h(e,["operationName"],n);const r=c(t,["resourceName"]);return r!=null&&h(e,["_url","resourceName"],r),e}function LC(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const o=c(t,["done"]);o!=null&&h(e,["done"],o);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const a=c(t,["response","generateVideoResponse"]);return a!=null&&h(e,["response"],BC(a)),e}function FC(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const o=c(t,["done"]);o!=null&&h(e,["done"],o);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const a=c(t,["response"]);return a!=null&&h(e,["response"],UC(a)),e}function BC(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>VC(a))),h(e,["generatedVideos"],i)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const o=c(t,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function UC(t){const e={},n=c(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>GC(a))),h(e,["generatedVideos"],i)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const o=c(t,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function VC(t){const e={},n=c(t,["video"]);return n!=null&&h(e,["video"],YC(n)),e}function GC(t){const e={},n=c(t,["_self"]);return n!=null&&h(e,["video"],XC(n)),e}function HC(t){const e={},n=c(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function zC(t){const e={},n=c(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function WC(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const o=c(t,["done"]);o!=null&&h(e,["done"],o);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const a=c(t,["response"]);return a!=null&&h(e,["response"],qC(a)),e}function qC(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&h(e,["parent"],r);const o=c(t,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function pg(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const o=c(t,["done"]);o!=null&&h(e,["done"],o);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const a=c(t,["response"]);return a!=null&&h(e,["response"],$C(a)),e}function $C(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&h(e,["parent"],r);const o=c(t,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function YC(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&h(e,["videoBytes"],Of(r));const o=c(t,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function XC(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&h(e,["videoBytes"],Of(r));const o=c(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var l0;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(l0||(l0={}));var u0;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(u0||(u0={}));var f0;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(f0||(f0={}));var Qn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Qn||(Qn={}));var c0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(c0||(c0={}));var d0;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(d0||(d0={}));var h0;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(h0||(h0={}));var p0;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(p0||(p0={}));var g0;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(g0||(g0={}));var v0;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(v0||(v0={}));var m0;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(m0||(m0={}));var y0;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(y0||(y0={}));var x0;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(x0||(x0={}));var _0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(_0||(_0={}));var E0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(E0||(E0={}));var w0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(w0||(w0={}));var C0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(C0||(C0={}));var A0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(A0||(A0={}));var S0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(S0||(S0={}));var $a;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})($a||($a={}));var T0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(T0||(T0={}));var I0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(I0||(I0={}));var N0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(N0||(N0={}));var _u;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_u||(_u={}));var R0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(R0||(R0={}));var P0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(P0||(P0={}));var D0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(D0||(D0={}));var M0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(M0||(M0={}));var b0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(b0||(b0={}));var O0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(O0||(O0={}));var k0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(k0||(k0={}));var L0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(L0||(L0={}));var F0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(F0||(F0={}));var B0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(B0||(B0={}));var U0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(U0||(U0={}));var V0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(V0||(V0={}));var G0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(G0||(G0={}));var H0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(H0||(H0={}));var z0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(z0||(z0={}));var W0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(W0||(W0={}));var q0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(q0||(q0={}));var $0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})($0||($0={}));var Y0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Y0||(Y0={}));var X0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(X0||(X0={}));var K0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(K0||(K0={}));var J0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(J0||(J0={}));var Z0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Z0||(Z0={}));var Q0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Q0||(Q0={}));var j0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(j0||(j0={}));var eh;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(eh||(eh={}));var th;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(th||(th={}));var nh;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(nh||(nh={}));var rh;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(rh||(rh={}));var oh;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(oh||(oh={}));var to;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(to||(to={}));class Eu{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ho{get text(){var e,n,r,o,i,a,s,l;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const d=[];for(const p of(l=(s=(a=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)!==null&&l!==void 0?l:[]){for(const[g,v]of Object.entries(p))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(v!==null||v!==void 0)&&d.push(g);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,u+=p.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,n,r,o,i,a,s,l;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const d of(l=(s=(a=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)!==null&&l!==void 0?l:[]){for(const[p,g]of Object.entries(d))p!=="inlineData"&&(g!==null||g!==void 0)&&f.push(p);d.inlineData&&typeof d.inlineData.data=="string"&&(u+=atob(d.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,o,i,a,s,l;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(s=(a=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,o,i,a,s,l,u;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(l=(s=(a=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(d=>d.executableCode).map(d=>d.executableCode).filter(d=>d!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,o,i,a,s,l,u;if(((o=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(l=(s=(a=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(d=>d.codeExecutionResult).map(d=>d.codeExecutionResult).filter(d=>d!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}}class ih{}class ah{}class KC{}class JC{}class ZC{}class QC{}class sh{}class lh{}class uh{}class jC{}class Ya{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Ya;let o;const i=e;return n?o=FC(i):o=LC(i),Object.assign(r,o),r}}class fh{}class ch{}class dh{}class eA{}class tA{}class nA{}class kf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new kf,i=WC(e);return Object.assign(r,i),r}}class rA{}class oA{}class iA{}class hh{}class aA{get text(){var e,n,r;let o="",i=!1;const a=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(s))l!=="text"&&l!=="thought"&&u!==null&&a.push(l);if(typeof s.text=="string"){if(typeof s.thought=="boolean"&&s.thought)continue;i=!0,o+=s.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var e,n,r;let o="";const i=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[s,l]of Object.entries(a))s!=="inlineData"&&l!==null&&i.push(s);a.inlineData&&typeof a.inlineData.data=="string"&&(o+=atob(a.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}}class sA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Lf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Lf,i=pg(e);return Object.assign(r,i),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ye(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function gg(t,e){const n=ye(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function vg(t){return Array.isArray(t)?t.map(e=>Xa(e)):[Xa(t)]}function Xa(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function mg(t){const e=Xa(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function yg(t){const e=Xa(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ph(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function xg(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>ph(e)):[ph(t)]}function wu(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function gh(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function vh(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ct(t){if(t==null)throw new Error("ContentUnion is required");return wu(t)?t:{role:"user",parts:xg(t)}}function Ff(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Ct(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Ct(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ct(n)):[Ct(e)]}function tn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(gh(t)||vh(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ct(t)]}const e=[],n=[],r=wu(t[0]);for(const o of t){const i=wu(o);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(o);else{if(gh(o)||vh(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||e.push({role:"user",parts:xg(n)}),e}function lA(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Qn).includes(n[0].toUpperCase())?n[0].toUpperCase():Qn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Qn).includes(r.toUpperCase())?r.toUpperCase():Qn.TYPE_UNSPECIFIED})}}function lo(t){const e={},n=["items"],r=["anyOf"],o=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&lA(t.type,e);for(const[a,s]of Object.entries(t))if(s!=null)if(a=="type"){if(s==="null")throw new Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;e.type=Object.values(Qn).includes(s.toUpperCase())?s.toUpperCase():Qn.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=lo(s);else if(r.includes(a)){const l=[];for(const u of s){if(u.type=="null"){e.nullable=!0;continue}l.push(lo(u))}e[a]=l}else if(o.includes(a)){const l={};for(const[u,f]of Object.entries(s))l[u]=lo(f);e[a]=l}else{if(a==="additionalProperties")continue;e[a]=s}return e}function Bf(t){return lo(t)}function Uf(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Vf(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function So(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=lo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=lo(e.response));return t}function To(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function uA(t,e,n,r=1){const o=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:o?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:o?`${n}/${e}`:e}function Un(t,e){if(typeof e!="string")throw new Error("name must be a string");return uA(t,e,"cachedContents")}function _g(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function pr(t){return Of(t)}function fA(t){return t!=null&&typeof t=="object"&&"name"in t}function cA(t){return t!=null&&typeof t=="object"&&"video"in t}function dA(t){return t!=null&&typeof t=="object"&&"uri"in t}function Eg(t){var e;let n;if(fA(t)&&(n=t.name),!(dA(t)&&(n=t.uri,n===void 0))&&!(cA(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function wg(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Cg(t){for(const e of["models","tunedModels","publisherModels"])if(hA(t,e))return t[e];return[]}function hA(t,e){return t!==null&&typeof t=="object"&&e in t}function pA(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function gA(t,e={}){const n=[],r=new Set;for(const o of t){const i=o.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);const a=pA(o,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function Ag(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function vA(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Sg(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return t;let i=!1;for(const a of o){if(typeof a!="object"||a===null)continue;const l=a.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Io(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Tg(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mA(t){const e={},n=c(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const r=c(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>ZA(a))),h(e,["inlinedResponses"],i)}const o=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>a)),h(e,["inlinedEmbedContentResponses"],i)}return e}function yA(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const r=c(t,["gcsDestination","outputUriPrefix"]);r!=null&&h(e,["gcsUri"],r);const o=c(t,["bigqueryDestination","outputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function xA(t){const e={},n=c(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const r=c(t,["gcsUri"]);r!=null&&h(e,["gcsDestination","outputUriPrefix"],r);const o=c(t,["bigqueryUri"]);if(o!=null&&h(e,["bigqueryDestination","outputUri"],o),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ya(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata","displayName"]);r!=null&&h(e,["displayName"],r);const o=c(t,["metadata","state"]);o!=null&&h(e,["state"],Tg(o));const i=c(t,["metadata","createTime"]);i!=null&&h(e,["createTime"],i);const a=c(t,["metadata","endTime"]);a!=null&&h(e,["endTime"],a);const s=c(t,["metadata","updateTime"]);s!=null&&h(e,["updateTime"],s);const l=c(t,["metadata","model"]);l!=null&&h(e,["model"],l);const u=c(t,["metadata","output"]);return u!=null&&h(e,["dest"],mA(Sg(u))),e}function Cu(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["displayName"]);r!=null&&h(e,["displayName"],r);const o=c(t,["state"]);o!=null&&h(e,["state"],Tg(o));const i=c(t,["error"]);i!=null&&h(e,["error"],i);const a=c(t,["createTime"]);a!=null&&h(e,["createTime"],a);const s=c(t,["startTime"]);s!=null&&h(e,["startTime"],s);const l=c(t,["endTime"]);l!=null&&h(e,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&h(e,["updateTime"],u);const f=c(t,["model"]);f!=null&&h(e,["model"],f);const d=c(t,["inputConfig"]);d!=null&&h(e,["src"],_A(d));const p=c(t,["outputConfig"]);p!=null&&h(e,["dest"],yA(Sg(p)));const g=c(t,["completionStats"]);return g!=null&&h(e,["completionStats"],g),e}function _A(t){const e={},n=c(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const r=c(t,["gcsSource","uris"]);r!=null&&h(e,["gcsUri"],r);const o=c(t,["bigquerySource","inputUri"]);return o!=null&&h(e,["bigqueryUri"],o),e}function EA(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=c(e,["fileName"]);r!=null&&h(n,["fileName"],r);const o=c(e,["inlinedRequests"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>JA(t,a))),h(n,["requests","requests"],i)}return n}function wA(t){const e={},n=c(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const r=c(t,["gcsUri"]);r!=null&&h(e,["gcsSource","uris"],r);const o=c(t,["bigqueryUri"]);if(o!=null&&h(e,["bigquerySource","inputUri"],o),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function CA(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function AA(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Io(t,r)),n}function SA(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Io(t,r)),n}function TA(t){const e={},n=c(t,["content"]);n!=null&&h(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&h(e,["citationMetadata"],IA(r));const o=c(t,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);const i=c(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const a=c(t,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const s=c(t,["groundingMetadata"]);s!=null&&h(e,["groundingMetadata"],s);const l=c(t,["index"]);l!=null&&h(e,["index"],l);const u=c(t,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const f=c(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),h(e,["safetyRatings"],p)}const d=c(t,["urlContextMetadata"]);return d!=null&&h(e,["urlContextMetadata"],d),e}function IA(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),h(e,["citations"],r)}return e}function Ig(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>oS(i))),h(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function NA(t,e){const n={},r=c(t,["displayName"]);if(e!==void 0&&r!=null&&h(e,["batch","displayName"],r),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function RA(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const o=c(t,["dest"]);return e!==void 0&&o!=null&&h(e,["outputConfig"],xA(vA(o))),n}function mh(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["src"]);o!=null&&h(n,["batch","inputConfig"],EA(t,Ag(t,o)));const i=c(e,["config"]);return i!=null&&NA(i,n),n}function PA(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["model"],ye(t,r));const o=c(e,["src"]);o!=null&&h(n,["inputConfig"],wA(Ag(t,o)));const i=c(e,["config"]);return i!=null&&RA(i,n),n}function DA(t,e){const n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&h(e,["batch","displayName"],r),n}function MA(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["src"]);o!=null&&h(n,["batch","inputConfig"],UA(t,o));const i=c(e,["config"]);return i!=null&&DA(i,n),n}function bA(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Io(t,r)),n}function OA(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Io(t,r)),n}function kA(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const o=c(t,["done"]);o!=null&&h(e,["done"],o);const i=c(t,["error"]);return i!=null&&h(e,["error"],i),e}function LA(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const o=c(t,["done"]);o!=null&&h(e,["done"],o);const i=c(t,["error"]);return i!=null&&h(e,["error"],i),e}function FA(t,e){const n={},r=c(e,["contents"]);if(r!=null){let i=Ff(t,r);Array.isArray(i)&&(i=i.map(a=>a)),h(n,["requests[]","request","content"],i)}const o=c(e,["config"]);return o!=null&&(h(n,["_self"],BA(o,n)),OC(n,{"requests[].*":"requests[].request.*"})),n}function BA(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const o=c(t,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);const i=c(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&h(e,["requests[]","outputDimensionality"],i),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function UA(t,e){const n={},r=c(e,["fileName"]);r!=null&&h(n,["file_name"],r);const o=c(e,["inlinedRequests"]);return o!=null&&h(n,["requests"],FA(t,o)),n}function VA(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function GA(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const o=c(t,["name"]);if(o!=null&&h(e,["name"],o),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function HA(t){const e={},n=c(t,["mode"]);n!=null&&h(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zA(t,e,n){const r={},o=c(e,["systemInstruction"]);n!==void 0&&o!=null&&h(n,["systemInstruction"],Ig(Ct(o)));const i=c(e,["temperature"]);i!=null&&h(r,["temperature"],i);const a=c(e,["topP"]);a!=null&&h(r,["topP"],a);const s=c(e,["topK"]);s!=null&&h(r,["topK"],s);const l=c(e,["candidateCount"]);l!=null&&h(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&h(r,["maxOutputTokens"],u);const f=c(e,["stopSequences"]);f!=null&&h(r,["stopSequences"],f);const d=c(e,["responseLogprobs"]);d!=null&&h(r,["responseLogprobs"],d);const p=c(e,["logprobs"]);p!=null&&h(r,["logprobs"],p);const g=c(e,["presencePenalty"]);g!=null&&h(r,["presencePenalty"],g);const v=c(e,["frequencyPenalty"]);v!=null&&h(r,["frequencyPenalty"],v);const y=c(e,["seed"]);y!=null&&h(r,["seed"],y);const w=c(e,["responseMimeType"]);w!=null&&h(r,["responseMimeType"],w);const x=c(e,["responseSchema"]);x!=null&&h(r,["responseSchema"],Bf(x));const m=c(e,["responseJsonSchema"]);if(m!=null&&h(r,["responseJsonSchema"],m),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=c(e,["safetySettings"]);if(n!==void 0&&_!=null){let X=_;Array.isArray(X)&&(X=X.map(te=>iS(te))),h(n,["safetySettings"],X)}const S=c(e,["tools"]);if(n!==void 0&&S!=null){let X=To(S);Array.isArray(X)&&(X=X.map(te=>sS(So(te)))),h(n,["tools"],X)}const A=c(e,["toolConfig"]);if(n!==void 0&&A!=null&&h(n,["toolConfig"],aS(A)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=c(e,["cachedContent"]);n!==void 0&&R!=null&&h(n,["cachedContent"],Un(t,R));const N=c(e,["responseModalities"]);N!=null&&h(r,["responseModalities"],N);const M=c(e,["mediaResolution"]);M!=null&&h(r,["mediaResolution"],M);const F=c(e,["speechConfig"]);if(F!=null&&h(r,["speechConfig"],Uf(F)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=c(e,["thinkingConfig"]);k!=null&&h(r,["thinkingConfig"],k);const $=c(e,["imageConfig"]);return $!=null&&h(r,["imageConfig"],KA($)),r}function WA(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>TA(u))),h(e,["candidates"],l)}const o=c(t,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const i=c(t,["promptFeedback"]);i!=null&&h(e,["promptFeedback"],i);const a=c(t,["responseId"]);a!=null&&h(e,["responseId"],a);const s=c(t,["usageMetadata"]);return s!=null&&h(e,["usageMetadata"],s),e}function qA(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Io(t,r)),n}function $A(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Io(t,r)),n}function YA(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function XA(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function KA(t){const e={},n=c(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=c(t,["imageSize"]);if(r!=null&&h(e,["imageSize"],r),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function JA(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["request","model"],ye(t,r));const o=c(e,["contents"]);if(o!=null){let s=tn(o);Array.isArray(s)&&(s=s.map(l=>Ig(l))),h(n,["request","contents"],s)}const i=c(e,["metadata"]);i!=null&&h(n,["metadata"],i);const a=c(e,["config"]);return a!=null&&h(n,["request","generationConfig"],zA(t,a,c(n,["request"],{}))),n}function ZA(t){const e={},n=c(t,["response"]);n!=null&&h(e,["response"],WA(n));const r=c(t,["error"]);return r!=null&&h(e,["error"],r),e}function QA(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);if(e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function jA(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&h(e,["_query","pageToken"],o);const i=c(t,["filter"]);return e!==void 0&&i!=null&&h(e,["_query","filter"],i),n}function eS(t){const e={},n=c(t,["config"]);return n!=null&&QA(n,e),e}function tS(t){const e={},n=c(t,["config"]);return n!=null&&jA(n,e),e}function nS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const o=c(t,["operations"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>ya(a))),h(e,["batchJobs"],i)}return e}function rS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const o=c(t,["batchPredictionJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>Cu(a))),h(e,["batchJobs"],i)}return e}function oS(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const o=c(t,["executableCode"]);o!=null&&h(e,["executableCode"],o);const i=c(t,["fileData"]);i!=null&&h(e,["fileData"],VA(i));const a=c(t,["functionCall"]);a!=null&&h(e,["functionCall"],GA(a));const s=c(t,["functionResponse"]);s!=null&&h(e,["functionResponse"],s);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],CA(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const f=c(t,["thought"]);f!=null&&h(e,["thought"],f);const d=c(t,["thoughtSignature"]);d!=null&&h(e,["thoughtSignature"],d);const p=c(t,["videoMetadata"]);return p!=null&&h(e,["videoMetadata"],p),e}function iS(t){const e={},n=c(t,["category"]);if(n!=null&&h(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(t,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function aS(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],HA(n));const r=c(t,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function sS(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>d)),h(e,["functionDeclarations"],f)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const o=c(t,["computerUse"]);o!=null&&h(e,["computerUse"],o);const i=c(t,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const a=c(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],YA(s));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],XA(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ln;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Ln||(Ln={}));class Fr{constructor(e,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,o)}init(e,n,r){var o,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!r||Object.keys(r).length===0?a={config:{}}:typeof r=="object"?a=Object.assign({},r):a=r,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(i=(o=a.config)===null||o===void 0?void 0:o.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lS extends Bn{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Fr(Ln.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=mh(this.apiClient,e),r=n._url,o=Q("{model}:batchGenerateContent",r),s=n.batch.inputConfig.requests,l=s.requests,u=[];for(const f of l){const d=Object.assign({},f);if(d.systemInstruction){const p=d.systemInstruction;delete d.systemInstruction;const g=d.request;g.systemInstruction=p,d.request=g}u.push(d)}return s.requests=u,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){const i=this.getGcsUri(e),a=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${o}`;else if(a)r.dest=`${a}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=PA(this.apiClient,e);return s=Q("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>Cu(f))}else{const u=mh(this.apiClient,e);return s=Q("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>ya(f))}}async createEmbeddingsInternal(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=MA(this.apiClient,e);return i=Q("{model}:asyncBatchEmbedContent",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>ya(l))}}async get(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=$A(this.apiClient,e);return s=Q("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>Cu(f))}else{const u=qA(this.apiClient,e);return s=Q("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>ya(f))}}async cancel(e){var n,r,o,i;let a="",s={};if(this.apiClient.isVertexAI()){const l=SA(this.apiClient,e);a=Q("batchPredictionJobs/{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=AA(this.apiClient,e);a=Q("batches/{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=tS(e);return s=Q("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=rS(f),p=new hh;return Object.assign(p,d),p})}else{const u=eS(e);return s=Q("batches",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=nS(f),p=new hh;return Object.assign(p,d),p})}}async delete(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=OA(this.apiClient,e);return s=Q("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>LA(f))}else{const u=bA(this.apiClient,e);return s=Q("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>kA(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uS(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function yh(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>MS(i))),h(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function fS(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const o=c(t,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const i=c(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let f=tn(a);Array.isArray(f)&&(f=f.map(d=>yh(d))),h(e,["contents"],f)}const s=c(t,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],yh(Ct(s)));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(d=>OS(d))),h(e,["tools"],f)}const u=c(t,["toolConfig"]);if(e!==void 0&&u!=null&&h(e,["toolConfig"],bS(u)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function cS(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const o=c(t,["expireTime"]);e!==void 0&&o!=null&&h(e,["expireTime"],o);const i=c(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const a=c(t,["contents"]);if(e!==void 0&&a!=null){let d=tn(a);Array.isArray(d)&&(d=d.map(p=>p)),h(e,["contents"],d)}const s=c(t,["systemInstruction"]);e!==void 0&&s!=null&&h(e,["systemInstruction"],Ct(s));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(p=>kS(p))),h(e,["tools"],d)}const u=c(t,["toolConfig"]);e!==void 0&&u!=null&&h(e,["toolConfig"],u);const f=c(t,["kmsKeyName"]);return e!==void 0&&f!=null&&h(e,["encryption_spec","kmsKeyName"],f),n}function dS(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["model"],gg(t,r));const o=c(e,["config"]);return o!=null&&fS(o,n),n}function hS(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["model"],gg(t,r));const o=c(e,["config"]);return o!=null&&cS(o,n),n}function pS(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Un(t,r)),n}function gS(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Un(t,r)),n}function vS(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function mS(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function yS(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function xS(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const o=c(t,["name"]);if(o!=null&&h(e,["name"],o),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _S(t){const e={},n=c(t,["mode"]);n!=null&&h(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ES(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const o=c(t,["parameters"]);o!=null&&h(e,["parameters"],o);const i=c(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const a=c(t,["response"]);a!=null&&h(e,["response"],a);const s=c(t,["responseJsonSchema"]);return s!=null&&h(e,["responseJsonSchema"],s),e}function wS(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Un(t,r)),n}function CS(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Un(t,r)),n}function AS(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function SS(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function TS(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),n}function IS(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),n}function NS(t){const e={},n=c(t,["config"]);return n!=null&&TS(n,e),e}function RS(t){const e={},n=c(t,["config"]);return n!=null&&IS(n,e),e}function PS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const o=c(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>a)),h(e,["cachedContents"],i)}return e}function DS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const o=c(t,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>a)),h(e,["cachedContents"],i)}return e}function MS(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const o=c(t,["executableCode"]);o!=null&&h(e,["executableCode"],o);const i=c(t,["fileData"]);i!=null&&h(e,["fileData"],yS(i));const a=c(t,["functionCall"]);a!=null&&h(e,["functionCall"],xS(a));const s=c(t,["functionResponse"]);s!=null&&h(e,["functionResponse"],s);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],uS(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const f=c(t,["thought"]);f!=null&&h(e,["thought"],f);const d=c(t,["thoughtSignature"]);d!=null&&h(e,["thoughtSignature"],d);const p=c(t,["videoMetadata"]);return p!=null&&h(e,["videoMetadata"],p),e}function bS(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],_S(n));const r=c(t,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function OS(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>d)),h(e,["functionDeclarations"],f)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const o=c(t,["computerUse"]);o!=null&&h(e,["computerUse"],o);const i=c(t,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const a=c(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],AS(s));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],SS(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}function kS(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>ES(p))),h(e,["functionDeclarations"],d)}const r=c(t,["retrieval"]);r!=null&&h(e,["retrieval"],r);const o=c(t,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const i=c(t,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const s=c(t,["enterpriseWebSearch"]);s!=null&&h(e,["enterpriseWebSearch"],s);const l=c(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&h(e,["googleSearch"],u);const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}function LS(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const o=c(t,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),n}function FS(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const o=c(t,["expireTime"]);return e!==void 0&&o!=null&&h(e,["expireTime"],o),n}function BS(t,e){const n={},r=c(e,["name"]);r!=null&&h(n,["_url","name"],Un(t,r));const o=c(e,["config"]);return o!=null&&LS(o,n),n}function US(t,e){const n={},r=c(e,["name"]);r!=null&&h(n,["_url","name"],Un(t,r));const o=c(e,["config"]);return o!=null&&FS(o,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VS extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fr(Ln.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=hS(this.apiClient,e);return s=Q("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const u=dS(this.apiClient,e);return s=Q("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async get(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=CS(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const u=wS(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async delete(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=gS(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=mS(f),p=new ch;return Object.assign(p,d),p})}else{const u=pS(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=vS(f),p=new ch;return Object.assign(p,d),p})}}async update(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=US(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>f)}else{const u=BS(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>f)}}async listInternal(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=RS(e);return s=Q("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=DS(f),p=new dh;return Object.assign(p,d),p})}else{const u=NS(e);return s=Q("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=PS(f),p=new dh;return Object.assign(p,d),p})}}}function xh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(t){return this instanceof ke?(this.v=t,this):new ke(t)}function uo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),o[Symbol.asyncIterator]=function(){return this},o;function a(g){return function(v){return Promise.resolve(v).then(g,d)}}function s(g,v){r[g]&&(o[g]=function(y){return new Promise(function(w,x){i.push([g,y,w,x])>1||l(g,y)})},v&&(o[g]=v(o[g])))}function l(g,v){try{u(r[g](v))}catch(y){p(i[0][3],y)}}function u(g){g.value instanceof ke?Promise.resolve(g.value.v).then(f,d):p(i[0][2],g)}function f(g){l("next",g)}function d(g){l("throw",g)}function p(g,v){g(v),i.shift(),i.length&&l(i[0][0],i[0][1])}}function si(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof xh=="function"?xh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(a){return new Promise(function(s,l){a=t[i](a),o(s,l,a.done,a.value)})}}function o(i,a,s,l){Promise.resolve(l).then(function(u){i({value:u,done:s})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GS(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Ng(n)}function Ng(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function HS(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function _h(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const o=[];let i=!0;for(;r<n&&t[r].role==="model";)o.push(t[r]),i&&!Ng(t[r])&&(i=!1),r++;i?e.push(...o):e.pop()}return e}class zS{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new WS(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class WS{constructor(e,n,r,o={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),HS(i)}async sendMessage(e){var n;await this.sendPromise;const r=Ct(e.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,a,s;const l=await o,u=(a=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.content,f=l.automaticFunctionCallingHistory,d=this.getHistory(!0).length;let p=[];f!=null&&(p=(s=f.slice(d))!==null&&s!==void 0?s:[]);const g=u?[u]:[];this.recordHistory(r,g,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(e){var n;await this.sendPromise;const r=Ct(e.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});const i=await o;return this.processStreamResponse(i,r)}getHistory(e=!1){const n=e?_h(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,o;return uo(this,arguments,function*(){var a,s,l,u;const f=[];try{for(var d=!0,p=si(e),g;g=yield ke(p.next()),a=g.done,!a;d=!0){u=g.value,d=!1;const v=u;if(GS(v)){const y=(o=(r=v.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content;y!==void 0&&f.push(y)}yield yield ke(v)}}catch(v){s={error:v}}finally{try{!d&&!a&&(l=p.return)&&(yield ke(l.call(p)))}finally{if(s)throw s.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let o=[];n.length>0&&n.every(i=>i.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(..._h(r)):this.history.push(e),this.history.push(...o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gs extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,gs.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qS(t){const e={},n=c(t,["file"]);return n!=null&&h(e,["file"],n),e}function $S(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function YS(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","file"],Eg(n)),e}function XS(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function KS(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","file"],Eg(n)),e}function JS(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),n}function ZS(t){const e={},n=c(t,["config"]);return n!=null&&JS(n,e),e}function QS(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const o=c(t,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>a)),h(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jS extends Bn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fr(Ln.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=ZS(e);return i=Q("files",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{const u=QS(l),f=new rA;return Object.assign(f,u),f})}}async createInternal(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=qS(e);return i=Q("upload/v1beta/files",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const u=$S(l),f=new oA;return Object.assign(f,u),f})}}async get(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=KS(e);return i=Q("files/{file}",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=YS(e);return i=Q("files/{file}",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{const u=XS(l),f=new iA;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xa(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function eT(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>vT(i))),h(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function tT(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function nT(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const o=c(t,["name"]);if(o!=null&&h(e,["name"],o),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function rT(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const o=c(t,["parameters"]);o!=null&&h(e,["parameters"],o);const i=c(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const a=c(t,["response"]);a!=null&&h(e,["response"],a);const s=c(t,["responseJsonSchema"]);return s!=null&&h(e,["responseJsonSchema"],s),e}function oT(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const r=c(t,["responseJsonSchema"]);r!=null&&h(e,["responseJsonSchema"],r);const o=c(t,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);const i=c(t,["candidateCount"]);i!=null&&h(e,["candidateCount"],i);const a=c(t,["enableAffectiveDialog"]);a!=null&&h(e,["enableAffectiveDialog"],a);const s=c(t,["frequencyPenalty"]);s!=null&&h(e,["frequencyPenalty"],s);const l=c(t,["logprobs"]);l!=null&&h(e,["logprobs"],l);const u=c(t,["maxOutputTokens"]);u!=null&&h(e,["maxOutputTokens"],u);const f=c(t,["mediaResolution"]);f!=null&&h(e,["mediaResolution"],f);const d=c(t,["presencePenalty"]);d!=null&&h(e,["presencePenalty"],d);const p=c(t,["responseLogprobs"]);p!=null&&h(e,["responseLogprobs"],p);const g=c(t,["responseMimeType"]);g!=null&&h(e,["responseMimeType"],g);const v=c(t,["responseModalities"]);v!=null&&h(e,["responseModalities"],v);const y=c(t,["responseSchema"]);y!=null&&h(e,["responseSchema"],y);const w=c(t,["routingConfig"]);w!=null&&h(e,["routingConfig"],w);const x=c(t,["seed"]);x!=null&&h(e,["seed"],x);const m=c(t,["speechConfig"]);m!=null&&h(e,["speechConfig"],Rg(m));const _=c(t,["stopSequences"]);_!=null&&h(e,["stopSequences"],_);const S=c(t,["temperature"]);S!=null&&h(e,["temperature"],S);const A=c(t,["thinkingConfig"]);A!=null&&h(e,["thinkingConfig"],A);const R=c(t,["topK"]);R!=null&&h(e,["topK"],R);const N=c(t,["topP"]);if(N!=null&&h(e,["topP"],N),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function iT(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function aT(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function sT(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r);const o=c(t,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const i=c(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const a=c(t,["topP"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topP"],a);const s=c(t,["topK"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","topK"],s);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","mediaResolution"],u);const f=c(t,["seed"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","seed"],f);const d=c(t,["speechConfig"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","speechConfig"],Vf(d));const p=c(t,["thinkingConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","thinkingConfig"],p);const g=c(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=c(t,["systemInstruction"]);e!==void 0&&v!=null&&h(e,["setup","systemInstruction"],eT(Ct(v)));const y=c(t,["tools"]);if(e!==void 0&&y!=null){let R=To(y);Array.isArray(R)&&(R=R.map(N=>yT(So(N)))),h(e,["setup","tools"],R)}const w=c(t,["sessionResumption"]);e!==void 0&&w!=null&&h(e,["setup","sessionResumption"],mT(w));const x=c(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&h(e,["setup","inputAudioTranscription"],x);const m=c(t,["outputAudioTranscription"]);e!==void 0&&m!=null&&h(e,["setup","outputAudioTranscription"],m);const _=c(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&h(e,["setup","realtimeInputConfig"],_);const S=c(t,["contextWindowCompression"]);e!==void 0&&S!=null&&h(e,["setup","contextWindowCompression"],S);const A=c(t,["proactivity"]);return e!==void 0&&A!=null&&h(e,["setup","proactivity"],A),n}function lT(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],oT(r));const o=c(t,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const i=c(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const a=c(t,["topP"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topP"],a);const s=c(t,["topK"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","topK"],s);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","mediaResolution"],u);const f=c(t,["seed"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","seed"],f);const d=c(t,["speechConfig"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","speechConfig"],Rg(Vf(d)));const p=c(t,["thinkingConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","thinkingConfig"],p);const g=c(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=c(t,["systemInstruction"]);e!==void 0&&v!=null&&h(e,["setup","systemInstruction"],Ct(v));const y=c(t,["tools"]);if(e!==void 0&&y!=null){let R=To(y);Array.isArray(R)&&(R=R.map(N=>xT(So(N)))),h(e,["setup","tools"],R)}const w=c(t,["sessionResumption"]);e!==void 0&&w!=null&&h(e,["setup","sessionResumption"],w);const x=c(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&h(e,["setup","inputAudioTranscription"],x);const m=c(t,["outputAudioTranscription"]);e!==void 0&&m!=null&&h(e,["setup","outputAudioTranscription"],m);const _=c(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&h(e,["setup","realtimeInputConfig"],_);const S=c(t,["contextWindowCompression"]);e!==void 0&&S!=null&&h(e,["setup","contextWindowCompression"],S);const A=c(t,["proactivity"]);return e!==void 0&&A!=null&&h(e,["setup","proactivity"],A),n}function uT(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["setup","model"],ye(t,r));const o=c(e,["config"]);return o!=null&&h(n,["config"],sT(o,n)),n}function fT(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["setup","model"],ye(t,r));const o=c(e,["config"]);return o!=null&&h(n,["config"],lT(o,n)),n}function cT(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function dT(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),h(e,["weightedPrompts"],r)}return e}function hT(t){const e={},n=c(t,["media"]);if(n!=null){let u=vg(n);Array.isArray(u)&&(u=u.map(f=>xa(f))),h(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&h(e,["audio"],xa(yg(r)));const o=c(t,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);const i=c(t,["video"]);i!=null&&h(e,["video"],xa(mg(i)));const a=c(t,["text"]);a!=null&&h(e,["text"],a);const s=c(t,["activityStart"]);s!=null&&h(e,["activityStart"],s);const l=c(t,["activityEnd"]);return l!=null&&h(e,["activityEnd"],l),e}function pT(t){const e={},n=c(t,["media"]);if(n!=null){let u=vg(n);Array.isArray(u)&&(u=u.map(f=>f)),h(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&h(e,["audio"],yg(r));const o=c(t,["audioStreamEnd"]);o!=null&&h(e,["audioStreamEnd"],o);const i=c(t,["video"]);i!=null&&h(e,["video"],mg(i));const a=c(t,["text"]);a!=null&&h(e,["text"],a);const s=c(t,["activityStart"]);s!=null&&h(e,["activityStart"],s);const l=c(t,["activityEnd"]);return l!=null&&h(e,["activityEnd"],l),e}function gT(t){const e={},n=c(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const r=c(t,["serverContent"]);r!=null&&h(e,["serverContent"],r);const o=c(t,["toolCall"]);o!=null&&h(e,["toolCall"],o);const i=c(t,["toolCallCancellation"]);i!=null&&h(e,["toolCallCancellation"],i);const a=c(t,["usageMetadata"]);a!=null&&h(e,["usageMetadata"],_T(a));const s=c(t,["goAway"]);s!=null&&h(e,["goAway"],s);const l=c(t,["sessionResumptionUpdate"]);return l!=null&&h(e,["sessionResumptionUpdate"],l),e}function vT(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const o=c(t,["executableCode"]);o!=null&&h(e,["executableCode"],o);const i=c(t,["fileData"]);i!=null&&h(e,["fileData"],tT(i));const a=c(t,["functionCall"]);a!=null&&h(e,["functionCall"],nT(a));const s=c(t,["functionResponse"]);s!=null&&h(e,["functionResponse"],s);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],xa(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const f=c(t,["thought"]);f!=null&&h(e,["thought"],f);const d=c(t,["thoughtSignature"]);d!=null&&h(e,["thoughtSignature"],d);const p=c(t,["videoMetadata"]);return p!=null&&h(e,["videoMetadata"],p),e}function mT(t){const e={},n=c(t,["handle"]);if(n!=null&&h(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Rg(t){const e={},n=c(t,["languageCode"]);n!=null&&h(e,["languageCode"],n);const r=c(t,["voiceConfig"]);if(r!=null&&h(e,["voiceConfig"],r),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function yT(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>d)),h(e,["functionDeclarations"],f)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const o=c(t,["computerUse"]);o!=null&&h(e,["computerUse"],o);const i=c(t,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const a=c(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],iT(s));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],aT(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}function xT(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>rT(p))),h(e,["functionDeclarations"],d)}const r=c(t,["retrieval"]);r!=null&&h(e,["retrieval"],r);const o=c(t,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const i=c(t,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const s=c(t,["enterpriseWebSearch"]);s!=null&&h(e,["enterpriseWebSearch"],s);const l=c(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&h(e,["googleSearch"],u);const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}function _T(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const r=c(t,["cachedContentTokenCount"]);r!=null&&h(e,["cachedContentTokenCount"],r);const o=c(t,["candidatesTokenCount"]);o!=null&&h(e,["responseTokenCount"],o);const i=c(t,["toolUsePromptTokenCount"]);i!=null&&h(e,["toolUsePromptTokenCount"],i);const a=c(t,["thoughtsTokenCount"]);a!=null&&h(e,["thoughtsTokenCount"],a);const s=c(t,["totalTokenCount"]);s!=null&&h(e,["totalTokenCount"],s);const l=c(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(v=>v)),h(e,["promptTokensDetails"],g)}const u=c(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(v=>v)),h(e,["cacheTokensDetails"],g)}const f=c(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(v=>v)),h(e,["responseTokensDetails"],g)}const d=c(t,["toolUsePromptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>v)),h(e,["toolUsePromptTokensDetails"],g)}const p=c(t,["trafficType"]);return p!=null&&h(e,["trafficType"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ET(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function wT(t){const e={},n=c(t,["content"]);n!=null&&h(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&h(e,["citationMetadata"],CT(r));const o=c(t,["tokenCount"]);o!=null&&h(e,["tokenCount"],o);const i=c(t,["finishReason"]);i!=null&&h(e,["finishReason"],i);const a=c(t,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const s=c(t,["groundingMetadata"]);s!=null&&h(e,["groundingMetadata"],s);const l=c(t,["index"]);l!=null&&h(e,["index"],l);const u=c(t,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const f=c(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(g=>g)),h(e,["safetyRatings"],p)}const d=c(t,["urlContextMetadata"]);return d!=null&&h(e,["urlContextMetadata"],d),e}function CT(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),h(e,["citations"],r)}return e}function AT(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["contents"]);if(o!=null){let i=tn(o);Array.isArray(i)&&(i=i.map(a=>a)),h(n,["contents"],i)}return n}function ST(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),h(e,["tokensInfo"],o)}return e}function TT(t){const e={},n=c(t,["values"]);n!=null&&h(e,["values"],n);const r=c(t,["statistics"]);return r!=null&&h(e,["statistics"],IT(r)),e}function IT(t){const e={},n=c(t,["truncated"]);n!=null&&h(e,["truncated"],n);const r=c(t,["token_count"]);return r!=null&&h(e,["tokenCount"],r),e}function vs(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>LI(i))),h(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function NT(t){const e={},n=c(t,["controlType"]);n!=null&&h(e,["controlType"],n);const r=c(t,["enableControlImageComputation"]);return r!=null&&h(e,["computeControl"],r),e}function RT(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function PT(t,e){const n={},r=c(t,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],Ct(r));const o=c(t,["tools"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>Og(s))),h(e,["tools"],a)}const i=c(t,["generationConfig"]);return e!==void 0&&i!=null&&h(e,["generationConfig"],EI(i)),n}function DT(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["contents"]);if(o!=null){let a=tn(o);Array.isArray(a)&&(a=a.map(s=>vs(s))),h(n,["contents"],a)}const i=c(e,["config"]);return i!=null&&RT(i),n}function MT(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["contents"]);if(o!=null){let a=tn(o);Array.isArray(a)&&(a=a.map(s=>s)),h(n,["contents"],a)}const i=c(e,["config"]);return i!=null&&PT(i,n),n}function bT(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);r!=null&&h(e,["totalTokens"],r);const o=c(t,["cachedContentTokenCount"]);return o!=null&&h(e,["cachedContentTokenCount"],o),e}function OT(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);return r!=null&&h(e,["totalTokens"],r),e}function kT(t,e){const n={},r=c(e,["model"]);return r!=null&&h(n,["_url","name"],ye(t,r)),n}function LT(t,e){const n={},r=c(e,["model"]);return r!=null&&h(n,["_url","name"],ye(t,r)),n}function FT(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function BT(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function UT(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const o=c(t,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&h(e,["parameters","aspectRatio"],a);const s=c(t,["guidanceScale"]);e!==void 0&&s!=null&&h(e,["parameters","guidanceScale"],s);const l=c(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const d=c(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&h(e,["parameters","includeSafetyAttributes"],d);const p=c(t,["includeRaiReason"]);e!==void 0&&p!=null&&h(e,["parameters","includeRaiReason"],p);const g=c(t,["language"]);e!==void 0&&g!=null&&h(e,["parameters","language"],g);const v=c(t,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const y=c(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","compressionQuality"],y);const w=c(t,["addWatermark"]);e!==void 0&&w!=null&&h(e,["parameters","addWatermark"],w);const x=c(t,["labels"]);e!==void 0&&x!=null&&h(e,["labels"],x);const m=c(t,["editMode"]);e!==void 0&&m!=null&&h(e,["parameters","editMode"],m);const _=c(t,["baseSteps"]);return e!==void 0&&_!=null&&h(e,["parameters","editConfig","baseSteps"],_),n}function VT(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["prompt"]);o!=null&&h(n,["instances[0]","prompt"],o);const i=c(e,["referenceImages"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>HI(l))),h(n,["instances[0]","referenceImages"],s)}const a=c(e,["config"]);return a!=null&&UT(a,n),n}function GT(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>ms(i))),h(e,["generatedImages"],o)}return e}function HT(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const o=c(t,["title"]);e!==void 0&&o!=null&&h(e,["requests[]","title"],o);const i=c(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&h(e,["requests[]","outputDimensionality"],i),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function zT(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const o=c(t,["title"]);e!==void 0&&o!=null&&h(e,["instances[]","title"],o);const i=c(t,["outputDimensionality"]);e!==void 0&&i!=null&&h(e,["parameters","outputDimensionality"],i);const a=c(t,["mimeType"]);e!==void 0&&a!=null&&h(e,["instances[]","mimeType"],a);const s=c(t,["autoTruncate"]);return e!==void 0&&s!=null&&h(e,["parameters","autoTruncate"],s),n}function WT(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["contents"]);if(o!=null){let s=Ff(t,o);Array.isArray(s)&&(s=s.map(l=>l)),h(n,["requests[]","content"],s)}const i=c(e,["config"]);i!=null&&HT(i,n);const a=c(e,["model"]);return a!==void 0&&h(n,["requests[]","model"],ye(t,a)),n}function qT(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["contents"]);if(o!=null){let a=Ff(t,o);Array.isArray(a)&&(a=a.map(s=>s)),h(n,["instances[]","content"],a)}const i=c(e,["config"]);return i!=null&&zT(i,n),n}function $T(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),h(e,["embeddings"],i)}const o=c(t,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function YT(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions[]","embeddings"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>TT(a))),h(e,["embeddings"],i)}const o=c(t,["metadata"]);return o!=null&&h(e,["metadata"],o),e}function XT(t){const e={},n=c(t,["endpoint"]);n!=null&&h(e,["name"],n);const r=c(t,["deployedModelId"]);return r!=null&&h(e,["deployedModelId"],r),e}function KT(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function JT(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const o=c(t,["name"]);if(o!=null&&h(e,["name"],o),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ZT(t){const e={},n=c(t,["mode"]);n!=null&&h(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function QT(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const o=c(t,["parameters"]);o!=null&&h(e,["parameters"],o);const i=c(t,["parametersJsonSchema"]);i!=null&&h(e,["parametersJsonSchema"],i);const a=c(t,["response"]);a!=null&&h(e,["response"],a);const s=c(t,["responseJsonSchema"]);return s!=null&&h(e,["responseJsonSchema"],s),e}function jT(t,e,n){const r={},o=c(e,["systemInstruction"]);n!==void 0&&o!=null&&h(n,["systemInstruction"],vs(Ct(o)));const i=c(e,["temperature"]);i!=null&&h(r,["temperature"],i);const a=c(e,["topP"]);a!=null&&h(r,["topP"],a);const s=c(e,["topK"]);s!=null&&h(r,["topK"],s);const l=c(e,["candidateCount"]);l!=null&&h(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&h(r,["maxOutputTokens"],u);const f=c(e,["stopSequences"]);f!=null&&h(r,["stopSequences"],f);const d=c(e,["responseLogprobs"]);d!=null&&h(r,["responseLogprobs"],d);const p=c(e,["logprobs"]);p!=null&&h(r,["logprobs"],p);const g=c(e,["presencePenalty"]);g!=null&&h(r,["presencePenalty"],g);const v=c(e,["frequencyPenalty"]);v!=null&&h(r,["frequencyPenalty"],v);const y=c(e,["seed"]);y!=null&&h(r,["seed"],y);const w=c(e,["responseMimeType"]);w!=null&&h(r,["responseMimeType"],w);const x=c(e,["responseSchema"]);x!=null&&h(r,["responseSchema"],Bf(x));const m=c(e,["responseJsonSchema"]);if(m!=null&&h(r,["responseJsonSchema"],m),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=c(e,["safetySettings"]);if(n!==void 0&&_!=null){let X=_;Array.isArray(X)&&(X=X.map(te=>zI(te))),h(n,["safetySettings"],X)}const S=c(e,["tools"]);if(n!==void 0&&S!=null){let X=To(S);Array.isArray(X)&&(X=X.map(te=>JI(So(te)))),h(n,["tools"],X)}const A=c(e,["toolConfig"]);if(n!==void 0&&A!=null&&h(n,["toolConfig"],KI(A)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=c(e,["cachedContent"]);n!==void 0&&R!=null&&h(n,["cachedContent"],Un(t,R));const N=c(e,["responseModalities"]);N!=null&&h(r,["responseModalities"],N);const M=c(e,["mediaResolution"]);M!=null&&h(r,["mediaResolution"],M);const F=c(e,["speechConfig"]);if(F!=null&&h(r,["speechConfig"],Uf(F)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=c(e,["thinkingConfig"]);k!=null&&h(r,["thinkingConfig"],k);const $=c(e,["imageConfig"]);return $!=null&&h(r,["imageConfig"],TI($)),r}function eI(t,e,n){const r={},o=c(e,["systemInstruction"]);n!==void 0&&o!=null&&h(n,["systemInstruction"],Ct(o));const i=c(e,["temperature"]);i!=null&&h(r,["temperature"],i);const a=c(e,["topP"]);a!=null&&h(r,["topP"],a);const s=c(e,["topK"]);s!=null&&h(r,["topK"],s);const l=c(e,["candidateCount"]);l!=null&&h(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&h(r,["maxOutputTokens"],u);const f=c(e,["stopSequences"]);f!=null&&h(r,["stopSequences"],f);const d=c(e,["responseLogprobs"]);d!=null&&h(r,["responseLogprobs"],d);const p=c(e,["logprobs"]);p!=null&&h(r,["logprobs"],p);const g=c(e,["presencePenalty"]);g!=null&&h(r,["presencePenalty"],g);const v=c(e,["frequencyPenalty"]);v!=null&&h(r,["frequencyPenalty"],v);const y=c(e,["seed"]);y!=null&&h(r,["seed"],y);const w=c(e,["responseMimeType"]);w!=null&&h(r,["responseMimeType"],w);const x=c(e,["responseSchema"]);x!=null&&h(r,["responseSchema"],Bf(x));const m=c(e,["responseJsonSchema"]);m!=null&&h(r,["responseJsonSchema"],m);const _=c(e,["routingConfig"]);_!=null&&h(r,["routingConfig"],_);const S=c(e,["modelSelectionConfig"]);S!=null&&h(r,["modelConfig"],S);const A=c(e,["safetySettings"]);if(n!==void 0&&A!=null){let Ce=A;Array.isArray(Ce)&&(Ce=Ce.map(re=>re)),h(n,["safetySettings"],Ce)}const R=c(e,["tools"]);if(n!==void 0&&R!=null){let Ce=To(R);Array.isArray(Ce)&&(Ce=Ce.map(re=>Og(So(re)))),h(n,["tools"],Ce)}const N=c(e,["toolConfig"]);n!==void 0&&N!=null&&h(n,["toolConfig"],N);const M=c(e,["labels"]);n!==void 0&&M!=null&&h(n,["labels"],M);const F=c(e,["cachedContent"]);n!==void 0&&F!=null&&h(n,["cachedContent"],Un(t,F));const k=c(e,["responseModalities"]);k!=null&&h(r,["responseModalities"],k);const $=c(e,["mediaResolution"]);$!=null&&h(r,["mediaResolution"],$);const X=c(e,["speechConfig"]);X!=null&&h(r,["speechConfig"],bg(Uf(X)));const te=c(e,["audioTimestamp"]);te!=null&&h(r,["audioTimestamp"],te);const Ee=c(e,["thinkingConfig"]);Ee!=null&&h(r,["thinkingConfig"],Ee);const we=c(e,["imageConfig"]);return we!=null&&h(r,["imageConfig"],II(we)),r}function Eh(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["contents"]);if(o!=null){let a=tn(o);Array.isArray(a)&&(a=a.map(s=>vs(s))),h(n,["contents"],a)}const i=c(e,["config"]);return i!=null&&h(n,["generationConfig"],jT(t,i,n)),n}function wh(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["contents"]);if(o!=null){let a=tn(o);Array.isArray(a)&&(a=a.map(s=>s)),h(n,["contents"],a)}const i=c(e,["config"]);return i!=null&&h(n,["generationConfig"],eI(t,i,n)),n}function Ch(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>wT(u))),h(e,["candidates"],l)}const o=c(t,["modelVersion"]);o!=null&&h(e,["modelVersion"],o);const i=c(t,["promptFeedback"]);i!=null&&h(e,["promptFeedback"],i);const a=c(t,["responseId"]);a!=null&&h(e,["responseId"],a);const s=c(t,["usageMetadata"]);return s!=null&&h(e,["usageMetadata"],s),e}function Ah(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),h(e,["candidates"],u)}const o=c(t,["createTime"]);o!=null&&h(e,["createTime"],o);const i=c(t,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const a=c(t,["promptFeedback"]);a!=null&&h(e,["promptFeedback"],a);const s=c(t,["responseId"]);s!=null&&h(e,["responseId"],s);const l=c(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function tI(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const i=c(t,["guidanceScale"]);if(e!==void 0&&i!=null&&h(e,["parameters","guidanceScale"],i),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const s=c(t,["personGeneration"]);e!==void 0&&s!=null&&h(e,["parameters","personGeneration"],s);const l=c(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&h(e,["parameters","includeSafetyAttributes"],l);const u=c(t,["includeRaiReason"]);e!==void 0&&u!=null&&h(e,["parameters","includeRaiReason"],u);const f=c(t,["language"]);e!==void 0&&f!=null&&h(e,["parameters","language"],f);const d=c(t,["outputMimeType"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","mimeType"],d);const p=c(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=c(t,["imageSize"]);if(e!==void 0&&g!=null&&h(e,["parameters","sampleImageSize"],g),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function nI(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const o=c(t,["negativePrompt"]);e!==void 0&&o!=null&&h(e,["parameters","negativePrompt"],o);const i=c(t,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const a=c(t,["aspectRatio"]);e!==void 0&&a!=null&&h(e,["parameters","aspectRatio"],a);const s=c(t,["guidanceScale"]);e!==void 0&&s!=null&&h(e,["parameters","guidanceScale"],s);const l=c(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const d=c(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&h(e,["parameters","includeSafetyAttributes"],d);const p=c(t,["includeRaiReason"]);e!==void 0&&p!=null&&h(e,["parameters","includeRaiReason"],p);const g=c(t,["language"]);e!==void 0&&g!=null&&h(e,["parameters","language"],g);const v=c(t,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const y=c(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&h(e,["parameters","outputOptions","compressionQuality"],y);const w=c(t,["addWatermark"]);e!==void 0&&w!=null&&h(e,["parameters","addWatermark"],w);const x=c(t,["labels"]);e!==void 0&&x!=null&&h(e,["labels"],x);const m=c(t,["imageSize"]);e!==void 0&&m!=null&&h(e,["parameters","sampleImageSize"],m);const _=c(t,["enhancePrompt"]);return e!==void 0&&_!=null&&h(e,["parameters","enhancePrompt"],_),n}function rI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["prompt"]);o!=null&&h(n,["instances[0]","prompt"],o);const i=c(e,["config"]);return i!=null&&tI(i,n),n}function oI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["prompt"]);o!=null&&h(n,["instances[0]","prompt"],o);const i=c(e,["config"]);return i!=null&&nI(i,n),n}function iI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>mI(a))),h(e,["generatedImages"],i)}const o=c(t,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],Dg(o)),e}function aI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>ms(a))),h(e,["generatedImages"],i)}const o=c(t,["positivePromptSafetyAttributes"]);return o!=null&&h(e,["positivePromptSafetyAttributes"],Mg(o)),e}function sI(t,e){const n={},r=c(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=c(t,["durationSeconds"]);if(e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=c(t,["aspectRatio"]);e!==void 0&&i!=null&&h(e,["parameters","aspectRatio"],i);const a=c(t,["resolution"]);e!==void 0&&a!=null&&h(e,["parameters","resolution"],a);const s=c(t,["personGeneration"]);if(e!==void 0&&s!=null&&h(e,["parameters","personGeneration"],s),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=c(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=c(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&h(e,["parameters","enhancePrompt"],u),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=c(t,["lastFrame"]);e!==void 0&&f!=null&&h(e,["instances[0]","lastFrame"],ys(f));const d=c(t,["referenceImages"]);if(e!==void 0&&d!=null){let p=d;Array.isArray(p)&&(p=p.map(g=>u3(g))),h(e,["instances[0]","referenceImages"],p)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function lI(t,e){const n={},r=c(t,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&h(e,["parameters","storageUri"],o);const i=c(t,["fps"]);e!==void 0&&i!=null&&h(e,["parameters","fps"],i);const a=c(t,["durationSeconds"]);e!==void 0&&a!=null&&h(e,["parameters","durationSeconds"],a);const s=c(t,["seed"]);e!==void 0&&s!=null&&h(e,["parameters","seed"],s);const l=c(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=c(t,["resolution"]);e!==void 0&&u!=null&&h(e,["parameters","resolution"],u);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const d=c(t,["pubsubTopic"]);e!==void 0&&d!=null&&h(e,["parameters","pubsubTopic"],d);const p=c(t,["negativePrompt"]);e!==void 0&&p!=null&&h(e,["parameters","negativePrompt"],p);const g=c(t,["enhancePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","enhancePrompt"],g);const v=c(t,["generateAudio"]);e!==void 0&&v!=null&&h(e,["parameters","generateAudio"],v);const y=c(t,["lastFrame"]);e!==void 0&&y!=null&&h(e,["instances[0]","lastFrame"],vn(y));const w=c(t,["referenceImages"]);if(e!==void 0&&w!=null){let _=w;Array.isArray(_)&&(_=_.map(S=>f3(S))),h(e,["instances[0]","referenceImages"],_)}const x=c(t,["mask"]);e!==void 0&&x!=null&&h(e,["instances[0]","mask"],l3(x));const m=c(t,["compressionQuality"]);return e!==void 0&&m!=null&&h(e,["parameters","compressionQuality"],m),n}function uI(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const o=c(t,["done"]);o!=null&&h(e,["done"],o);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const a=c(t,["response","generateVideoResponse"]);return a!=null&&h(e,["response"],hI(a)),e}function fI(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const o=c(t,["done"]);o!=null&&h(e,["done"],o);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const a=c(t,["response"]);return a!=null&&h(e,["response"],pI(a)),e}function cI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["prompt"]);o!=null&&h(n,["instances[0]","prompt"],o);const i=c(e,["image"]);i!=null&&h(n,["instances[0]","image"],ys(i));const a=c(e,["video"]);a!=null&&h(n,["instances[0]","video"],kg(a));const s=c(e,["source"]);s!=null&&gI(s,n);const l=c(e,["config"]);return l!=null&&sI(l,n),n}function dI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["prompt"]);o!=null&&h(n,["instances[0]","prompt"],o);const i=c(e,["image"]);i!=null&&h(n,["instances[0]","image"],vn(i));const a=c(e,["video"]);a!=null&&h(n,["instances[0]","video"],Lg(a));const s=c(e,["source"]);s!=null&&vI(s,n);const l=c(e,["config"]);return l!=null&&lI(l,n),n}function hI(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>xI(a))),h(e,["generatedVideos"],i)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const o=c(t,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function pI(t){const e={},n=c(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>_I(a))),h(e,["generatedVideos"],i)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const o=c(t,["raiMediaFilteredReasons"]);return o!=null&&h(e,["raiMediaFilteredReasons"],o),e}function gI(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const o=c(t,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],ys(o));const i=c(t,["video"]);return e!==void 0&&i!=null&&h(e,["instances[0]","video"],kg(i)),n}function vI(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const o=c(t,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],vn(o));const i=c(t,["video"]);return e!==void 0&&i!=null&&h(e,["instances[0]","video"],Lg(i)),n}function mI(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["image"],NI(n));const r=c(t,["raiFilteredReason"]);r!=null&&h(e,["raiFilteredReason"],r);const o=c(t,["_self"]);return o!=null&&h(e,["safetyAttributes"],Dg(o)),e}function ms(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["image"],Pg(n));const r=c(t,["raiFilteredReason"]);r!=null&&h(e,["raiFilteredReason"],r);const o=c(t,["_self"]);o!=null&&h(e,["safetyAttributes"],Mg(o));const i=c(t,["prompt"]);return i!=null&&h(e,["enhancedPrompt"],i),e}function yI(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["mask"],Pg(n));const r=c(t,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),h(e,["labels"],o)}return e}function xI(t){const e={},n=c(t,["video"]);return n!=null&&h(e,["video"],a3(n)),e}function _I(t){const e={},n=c(t,["_self"]);return n!=null&&h(e,["video"],s3(n)),e}function EI(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const r=c(t,["responseJsonSchema"]);r!=null&&h(e,["responseJsonSchema"],r);const o=c(t,["audioTimestamp"]);o!=null&&h(e,["audioTimestamp"],o);const i=c(t,["candidateCount"]);i!=null&&h(e,["candidateCount"],i);const a=c(t,["enableAffectiveDialog"]);a!=null&&h(e,["enableAffectiveDialog"],a);const s=c(t,["frequencyPenalty"]);s!=null&&h(e,["frequencyPenalty"],s);const l=c(t,["logprobs"]);l!=null&&h(e,["logprobs"],l);const u=c(t,["maxOutputTokens"]);u!=null&&h(e,["maxOutputTokens"],u);const f=c(t,["mediaResolution"]);f!=null&&h(e,["mediaResolution"],f);const d=c(t,["presencePenalty"]);d!=null&&h(e,["presencePenalty"],d);const p=c(t,["responseLogprobs"]);p!=null&&h(e,["responseLogprobs"],p);const g=c(t,["responseMimeType"]);g!=null&&h(e,["responseMimeType"],g);const v=c(t,["responseModalities"]);v!=null&&h(e,["responseModalities"],v);const y=c(t,["responseSchema"]);y!=null&&h(e,["responseSchema"],y);const w=c(t,["routingConfig"]);w!=null&&h(e,["routingConfig"],w);const x=c(t,["seed"]);x!=null&&h(e,["seed"],x);const m=c(t,["speechConfig"]);m!=null&&h(e,["speechConfig"],bg(m));const _=c(t,["stopSequences"]);_!=null&&h(e,["stopSequences"],_);const S=c(t,["temperature"]);S!=null&&h(e,["temperature"],S);const A=c(t,["thinkingConfig"]);A!=null&&h(e,["thinkingConfig"],A);const R=c(t,["topK"]);R!=null&&h(e,["topK"],R);const N=c(t,["topP"]);if(N!=null&&h(e,["topP"],N),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function wI(t,e){const n={},r=c(e,["model"]);return r!=null&&h(n,["_url","name"],ye(t,r)),n}function CI(t,e){const n={},r=c(e,["model"]);return r!=null&&h(n,["_url","name"],ye(t,r)),n}function AI(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function SI(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function TI(t){const e={},n=c(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=c(t,["imageSize"]);if(r!=null&&h(e,["imageSize"],r),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function II(t){const e={},n=c(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=c(t,["imageSize"]);r!=null&&h(e,["imageSize"],r);const o=c(t,["outputMimeType"]);o!=null&&h(e,["imageOutputOptions","mimeType"],o);const i=c(t,["outputCompressionQuality"]);return i!=null&&h(e,["imageOutputOptions","compressionQuality"],i),e}function NI(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],pr(n));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Pg(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&h(e,["imageBytes"],pr(r));const o=c(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function ys(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],pr(n));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function vn(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const r=c(t,["imageBytes"]);r!=null&&h(e,["bytesBase64Encoded"],pr(r));const o=c(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function RI(t,e,n){const r={},o=c(e,["pageSize"]);n!==void 0&&o!=null&&h(n,["_query","pageSize"],o);const i=c(e,["pageToken"]);n!==void 0&&i!=null&&h(n,["_query","pageToken"],i);const a=c(e,["filter"]);n!==void 0&&a!=null&&h(n,["_query","filter"],a);const s=c(e,["queryBase"]);return n!==void 0&&s!=null&&h(n,["_url","models_url"],wg(t,s)),r}function PI(t,e,n){const r={},o=c(e,["pageSize"]);n!==void 0&&o!=null&&h(n,["_query","pageSize"],o);const i=c(e,["pageToken"]);n!==void 0&&i!=null&&h(n,["_query","pageToken"],i);const a=c(e,["filter"]);n!==void 0&&a!=null&&h(n,["_query","filter"],a);const s=c(e,["queryBase"]);return n!==void 0&&s!=null&&h(n,["_url","models_url"],wg(t,s)),r}function DI(t,e){const n={},r=c(e,["config"]);return r!=null&&RI(t,r,n),n}function MI(t,e){const n={},r=c(e,["config"]);return r!=null&&PI(t,r,n),n}function bI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const o=c(t,["_self"]);if(o!=null){let i=Cg(o);Array.isArray(i)&&(i=i.map(a=>Au(a))),h(e,["models"],i)}return e}function OI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const o=c(t,["_self"]);if(o!=null){let i=Cg(o);Array.isArray(i)&&(i=i.map(a=>Su(a))),h(e,["models"],i)}return e}function kI(t){const e={},n=c(t,["maskMode"]);n!=null&&h(e,["maskMode"],n);const r=c(t,["segmentationClasses"]);r!=null&&h(e,["maskClasses"],r);const o=c(t,["maskDilation"]);return o!=null&&h(e,["dilation"],o),e}function Au(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["displayName"]);r!=null&&h(e,["displayName"],r);const o=c(t,["description"]);o!=null&&h(e,["description"],o);const i=c(t,["version"]);i!=null&&h(e,["version"],i);const a=c(t,["_self"]);a!=null&&h(e,["tunedModelInfo"],ZI(a));const s=c(t,["inputTokenLimit"]);s!=null&&h(e,["inputTokenLimit"],s);const l=c(t,["outputTokenLimit"]);l!=null&&h(e,["outputTokenLimit"],l);const u=c(t,["supportedGenerationMethods"]);u!=null&&h(e,["supportedActions"],u);const f=c(t,["temperature"]);f!=null&&h(e,["temperature"],f);const d=c(t,["maxTemperature"]);d!=null&&h(e,["maxTemperature"],d);const p=c(t,["topP"]);p!=null&&h(e,["topP"],p);const g=c(t,["topK"]);g!=null&&h(e,["topK"],g);const v=c(t,["thinking"]);return v!=null&&h(e,["thinking"],v),e}function Su(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["displayName"]);r!=null&&h(e,["displayName"],r);const o=c(t,["description"]);o!=null&&h(e,["description"],o);const i=c(t,["versionId"]);i!=null&&h(e,["version"],i);const a=c(t,["deployedModels"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(p=>XT(p))),h(e,["endpoints"],d)}const s=c(t,["labels"]);s!=null&&h(e,["labels"],s);const l=c(t,["_self"]);l!=null&&h(e,["tunedModelInfo"],QI(l));const u=c(t,["defaultCheckpointId"]);u!=null&&h(e,["defaultCheckpointId"],u);const f=c(t,["checkpoints"]);if(f!=null){let d=f;Array.isArray(d)&&(d=d.map(p=>p)),h(e,["checkpoints"],d)}return e}function LI(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const o=c(t,["executableCode"]);o!=null&&h(e,["executableCode"],o);const i=c(t,["fileData"]);i!=null&&h(e,["fileData"],KT(i));const a=c(t,["functionCall"]);a!=null&&h(e,["functionCall"],JT(a));const s=c(t,["functionResponse"]);s!=null&&h(e,["functionResponse"],s);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],ET(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const f=c(t,["thought"]);f!=null&&h(e,["thought"],f);const d=c(t,["thoughtSignature"]);d!=null&&h(e,["thoughtSignature"],d);const p=c(t,["videoMetadata"]);return p!=null&&h(e,["videoMetadata"],p),e}function FI(t){const e={},n=c(t,["productImage"]);return n!=null&&h(e,["image"],vn(n)),e}function BI(t,e){const n={},r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const o=c(t,["baseSteps"]);e!==void 0&&o!=null&&h(e,["parameters","baseSteps"],o);const i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const a=c(t,["seed"]);e!==void 0&&a!=null&&h(e,["parameters","seed"],a);const s=c(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&h(e,["parameters","safetySetting"],s);const l=c(t,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const u=c(t,["addWatermark"]);e!==void 0&&u!=null&&h(e,["parameters","addWatermark"],u);const f=c(t,["outputMimeType"]);e!==void 0&&f!=null&&h(e,["parameters","outputOptions","mimeType"],f);const d=c(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","compressionQuality"],d);const p=c(t,["enhancePrompt"]);e!==void 0&&p!=null&&h(e,["parameters","enhancePrompt"],p);const g=c(t,["labels"]);return e!==void 0&&g!=null&&h(e,["labels"],g),n}function UI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["source"]);o!=null&&GI(o,n);const i=c(e,["config"]);return i!=null&&BI(i,n),n}function VI(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>ms(o))),h(e,["generatedImages"],r)}return e}function GI(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const o=c(t,["personImage"]);e!==void 0&&o!=null&&h(e,["instances[0]","personImage","image"],vn(o));const i=c(t,["productImages"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>FI(s))),h(e,["instances[0]","productImages"],a)}return n}function HI(t){const e={},n=c(t,["referenceImage"]);n!=null&&h(e,["referenceImage"],vn(n));const r=c(t,["referenceId"]);r!=null&&h(e,["referenceId"],r);const o=c(t,["referenceType"]);o!=null&&h(e,["referenceType"],o);const i=c(t,["maskImageConfig"]);i!=null&&h(e,["maskImageConfig"],kI(i));const a=c(t,["controlImageConfig"]);a!=null&&h(e,["controlImageConfig"],NT(a));const s=c(t,["styleImageConfig"]);s!=null&&h(e,["styleImageConfig"],s);const l=c(t,["subjectImageConfig"]);return l!=null&&h(e,["subjectImageConfig"],l),e}function Dg(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&h(e,["scores"],r);const o=c(t,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function Mg(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&h(e,["scores"],r);const o=c(t,["contentType"]);return o!=null&&h(e,["contentType"],o),e}function zI(t){const e={},n=c(t,["category"]);if(n!=null&&h(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(t,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function WI(t){const e={},n=c(t,["image"]);return n!=null&&h(e,["image"],vn(n)),e}function qI(t,e){const n={},r=c(t,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const o=c(t,["maxPredictions"]);e!==void 0&&o!=null&&h(e,["parameters","maxPredictions"],o);const i=c(t,["confidenceThreshold"]);e!==void 0&&i!=null&&h(e,["parameters","confidenceThreshold"],i);const a=c(t,["maskDilation"]);e!==void 0&&a!=null&&h(e,["parameters","maskDilation"],a);const s=c(t,["binaryColorThreshold"]);e!==void 0&&s!=null&&h(e,["parameters","binaryColorThreshold"],s);const l=c(t,["labels"]);return e!==void 0&&l!=null&&h(e,["labels"],l),n}function $I(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["source"]);o!=null&&XI(o,n);const i=c(e,["config"]);return i!=null&&qI(i,n),n}function YI(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>yI(o))),h(e,["generatedMasks"],r)}return e}function XI(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const o=c(t,["image"]);e!==void 0&&o!=null&&h(e,["instances[0]","image"],vn(o));const i=c(t,["scribbleImage"]);return e!==void 0&&i!=null&&h(e,["instances[0]","scribble"],WI(i)),n}function bg(t){const e={},n=c(t,["languageCode"]);n!=null&&h(e,["languageCode"],n);const r=c(t,["voiceConfig"]);if(r!=null&&h(e,["voiceConfig"],r),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function KI(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],ZT(n));const r=c(t,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function JI(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>d)),h(e,["functionDeclarations"],f)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const o=c(t,["computerUse"]);o!=null&&h(e,["computerUse"],o);const i=c(t,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const a=c(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],AI(s));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],SI(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}function Og(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>QT(p))),h(e,["functionDeclarations"],d)}const r=c(t,["retrieval"]);r!=null&&h(e,["retrieval"],r);const o=c(t,["googleSearchRetrieval"]);o!=null&&h(e,["googleSearchRetrieval"],o);const i=c(t,["computerUse"]);if(i!=null&&h(e,["computerUse"],i),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=c(t,["codeExecution"]);a!=null&&h(e,["codeExecution"],a);const s=c(t,["enterpriseWebSearch"]);s!=null&&h(e,["enterpriseWebSearch"],s);const l=c(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&h(e,["googleSearch"],u);const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}function ZI(t){const e={},n=c(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&h(e,["createTime"],r);const o=c(t,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function QI(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&h(e,["createTime"],r);const o=c(t,["updateTime"]);return o!=null&&h(e,["updateTime"],o),e}function jI(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const o=c(t,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const i=c(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&h(e,["defaultCheckpointId"],i),n}function e3(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const o=c(t,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);const i=c(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&h(e,["defaultCheckpointId"],i),n}function t3(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","name"],ye(t,r));const o=c(e,["config"]);return o!=null&&jI(o,n),n}function n3(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["config"]);return o!=null&&e3(o,n),n}function r3(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const o=c(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const i=c(t,["personGeneration"]);e!==void 0&&i!=null&&h(e,["parameters","personGeneration"],i);const a=c(t,["includeRaiReason"]);e!==void 0&&a!=null&&h(e,["parameters","includeRaiReason"],a);const s=c(t,["outputMimeType"]);e!==void 0&&s!=null&&h(e,["parameters","outputOptions","mimeType"],s);const l=c(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&h(e,["parameters","outputOptions","compressionQuality"],l);const u=c(t,["enhanceInputImage"]);e!==void 0&&u!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],u);const f=c(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const d=c(t,["labels"]);e!==void 0&&d!=null&&h(e,["labels"],d);const p=c(t,["numberOfImages"]);e!==void 0&&p!=null&&h(e,["parameters","sampleCount"],p);const g=c(t,["mode"]);return e!==void 0&&g!=null&&h(e,["parameters","mode"],g),n}function o3(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],ye(t,r));const o=c(e,["image"]);o!=null&&h(n,["instances[0]","image"],vn(o));const i=c(e,["upscaleFactor"]);i!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],i);const a=c(e,["config"]);return a!=null&&r3(a,n),n}function i3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>ms(i))),h(e,["generatedImages"],o)}return e}function a3(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&h(e,["videoBytes"],pr(r));const o=c(t,["encoding"]);return o!=null&&h(e,["mimeType"],o),e}function s3(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&h(e,["videoBytes"],pr(r));const o=c(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}function l3(t){const e={},n=c(t,["image"]);n!=null&&h(e,["_self"],vn(n));const r=c(t,["maskMode"]);return r!=null&&h(e,["maskMode"],r),e}function u3(t){const e={},n=c(t,["image"]);n!=null&&h(e,["image"],ys(n));const r=c(t,["referenceType"]);return r!=null&&h(e,["referenceType"],r),e}function f3(t){const e={},n=c(t,["image"]);n!=null&&h(e,["image"],vn(n));const r=c(t,["referenceType"]);return r!=null&&h(e,["referenceType"],r),e}function kg(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const r=c(t,["videoBytes"]);r!=null&&h(e,["encodedVideo"],pr(r));const o=c(t,["mimeType"]);return o!=null&&h(e,["encoding"],o),e}function Lg(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["gcsUri"],n);const r=c(t,["videoBytes"]);r!=null&&h(e,["bytesBase64Encoded"],pr(r));const o=c(t,["mimeType"]);return o!=null&&h(e,["mimeType"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c3="Content-Type",d3="X-Server-Timeout",h3="User-Agent",Tu="x-goog-api-client",p3="1.30.0",g3=`google-genai-sdk/${p3}`,v3="v1beta1",m3="v1beta",Sh=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class y3{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const o={};this.clientOptions.vertexai?(o.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:v3,o.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:m3,o.baseUrl="https://generativelanguage.googleapis.com/"),o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),e!==""&&o.push(e),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[a,s]of Object.entries(e.queryParams))o.searchParams.append(a,String(s));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.unaryApiCall(o,i,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[o,i]of Object.entries(n))typeof i=="object"?r[o]=Object.assign(Object.assign({},r[o]),i):i!==void 0&&(r[o]=i);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),o=this.constructUrl(e.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),e.abortSignal),this.streamApiCall(o,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,o){if(n&&n.timeout||o){const i=new AbortController,a=i.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>i.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}o&&o.addEventListener("abort",()=>{i.abort()}),e.signal=a}return n&&n.extraBody!==null&&x3(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Th(o),new Eu(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await Th(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(e){var n;return uo(this,arguments,function*(){const o=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let a="";for(;;){const{done:s,value:l}=yield ke(o.read());if(s){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=i.decode(l,{stream:!0});try{const d=JSON.parse(u);if("error"in d){const p=JSON.parse(JSON.stringify(d.error)),g=p.status,v=p.code,y=`got status: ${g}. ${JSON.stringify(d)}`;if(v>=400&&v<600)throw new gs({message:y,status:v})}}catch(d){if(d.name==="ApiError")throw d}a+=u;let f=a.match(Sh);for(;f;){const d=f[1];try{const p=new Response(d,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ke(new Eu(p)),a=a.slice(f[0].length),f=a.match(Sh)}catch(p){throw new Error(`exception parsing stream chunk ${d}. ${p}`)}}}}finally{o.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=g3+" "+this.clientOptions.userAgentExtra;return e[h3]=n,e[Tu]=n,e[c3]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[o,i]of Object.entries(e.headers))r.append(o,i);e.timeout&&e.timeout>0&&r.append(d3,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);const i=this.clientOptions.uploader,a=await i.stat(e);o.sizeBytes=String(a.size);const s=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:a.type;if(s===void 0||s==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=s;const l={file:o},u=this.getFileName(e),f=Q("upload/v1beta/files",l._url),d=await this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,u,l,n==null?void 0:n.httpOptions);return i.upload(e,d,this)}async uploadFileToFileSearchStore(e,n,r){var o;const i=this.clientOptions.uploader,a=await i.stat(n),s=String(a.size),l=(o=r==null?void 0:r.mimeType)!==null&&o!==void 0?o:a.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),d={};r!=null&&r.customMetadata&&(d.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(d.chunkingConfig=r.chunkingConfig);const p=await this.fetchUploadUrl(u,s,l,f,d,r==null?void 0:r.httpOptions);return i.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,o,i,a){var s;let l={};a?l=a:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};const u=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(s=u==null?void 0:u.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Th(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const o=JSON.stringify(r);throw n>=400&&n<600?new gs({message:o,status:n}):new Error(o)}}function x3(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,a){const s=Object.assign({},i);for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const u=a[l],f=s[l];u&&typeof u=="object"&&!Array.isArray(u)&&f&&typeof f=="object"&&!Array.isArray(f)?s[l]=r(f,u):(f&&u&&typeof f!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof f}, New type: ${typeof u}. Overwriting.`),s[l]=u)}return s}const o=r(n,e);t.body=JSON.stringify(o)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _3="mcp_used/unknown";let E3=!1;function Fg(t){for(const e of t)if(w3(e)||typeof e=="object"&&"inputSchema"in e)return!0;return E3}function Bg(t){var e;const n=(e=t[Tu])!==null&&e!==void 0?e:"";t[Tu]=(n+` ${_3}`).trimStart()}function w3(t){return t!==null&&typeof t=="object"&&t instanceof Gf}function C3(t,e=100){return uo(this,arguments,function*(){let r,o=0;for(;o<e;){const i=yield ke(t.listTools({cursor:r}));for(const a of i.tools)yield yield ke(a),o++;if(!i.nextCursor)break;r=i.nextCursor}})}class Gf{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Gf(e,n)}async initialize(){var e,n,r,o;if(this.mcpTools.length>0)return;const i={},a=[];for(const f of this.mcpClients)try{for(var s=!0,l=(n=void 0,si(C3(f))),u;u=await l.next(),e=u.done,!e;s=!0){o=u.value,s=!1;const d=o;a.push(d);const p=d.name;if(i[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);i[p]=f}}catch(d){n={error:d}}finally{try{!s&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),gA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const o=this.functionNameToMcpClient[r.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const a=await o.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function A3(t,e,n){const r=new sA;let o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),e(r)}class S3{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),a=N3(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),l=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${s}`;let u=()=>{};const f=new Promise(_=>{u=_}),d=e.callbacks,p=function(){u({})},g=this.apiClient,v={onopen:p,onmessage:_=>{A3(g,d.onmessage,_)},onerror:(n=d==null?void 0:d.onerror)!==null&&n!==void 0?n:function(_){},onclose:(r=d==null?void 0:d.onclose)!==null&&r!==void 0?r:function(_){}},y=this.webSocketFactory.create(l,I3(a),v);y.connect(),await f;const m={setup:{model:ye(this.apiClient,e.model)}};return y.send(JSON.stringify(m)),new T3(y,this.apiClient)}}class T3{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=dT(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=cT(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(to.PLAY)}pause(){this.sendPlaybackControl(to.PAUSE)}stop(){this.sendPlaybackControl(to.STOP)}resetContext(){this.sendPlaybackControl(to.RESET_CONTEXT)}close(){this.conn.close()}}function I3(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function N3(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R3="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function P3(t,e,n){const r=new aA;let o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;const i=JSON.parse(o);if(t.isVertexAI()){const a=gT(i);Object.assign(r,a)}else Object.assign(r,i);e(r)}class D3{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new S3(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,o,i,a,s;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let f;const d=this.apiClient.getHeaders();e.config&&e.config.tools&&Fg(e.config.tools)&&Bg(d);const p=k3(d);if(this.apiClient.isVertexAI())f=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f);else{const F=this.apiClient.getApiKey();let k="BidiGenerateContent",$="key";F!=null&&F.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",$="access_token"),f=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${k}?${$}=${F}`}let g=()=>{};const v=new Promise(F=>{g=F}),y=e.callbacks,w=function(){var F;(F=y==null?void 0:y.onopen)===null||F===void 0||F.call(y),g({})},x=this.apiClient,m={onopen:w,onmessage:F=>{P3(x,y.onmessage,F)},onerror:(n=y==null?void 0:y.onerror)!==null&&n!==void 0?n:function(F){},onclose:(r=y==null?void 0:y.onclose)!==null&&r!==void 0?r:function(F){}},_=this.webSocketFactory.create(f,O3(p),m);_.connect(),await v;let S=ye(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const F=this.apiClient.getProject(),k=this.apiClient.getLocation();S=`projects/${F}/locations/${k}/`+S}let A={};this.apiClient.isVertexAI()&&((o=e.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[$a.AUDIO]}:e.config.responseModalities=[$a.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R=(s=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&s!==void 0?s:[],N=[];for(const F of R)if(this.isCallableTool(F)){const k=F;N.push(await k.tool())}else N.push(F);N.length>0&&(e.config.tools=N);const M={model:S,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?A=fT(this.apiClient,M):A=uT(this.apiClient,M),delete A.config,_.send(JSON.stringify(A)),new b3(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const M3={turnComplete:!0};class b3{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=tn(n.turns),e.isVertexAI()||(r=r.map(o=>vs(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(R3)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},M3),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:pT(e)}:n={realtimeInput:hT(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function O3(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function k3(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ih=10;function Nh(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let o=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(fo(a)){o=!0;break}if(!o)return!0;const i=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function fo(t){return"callTool"in t&&typeof t.callTool=="function"}function L3(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(o=>fo(o)))!==null&&r!==void 0?r:!1}function Rh(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,o)=>{if(fo(r))return;const i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(o)}),n}function Ph(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F3 extends Bn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,o,i,a,s;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!L3(n)||Nh(n.config))return await this.generateContentInternal(l);const u=Rh(n);if(u.length>0){const y=u.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let f,d;const p=tn(l.contents),g=(i=(o=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:Ih;let v=0;for(;v<g&&(f=await this.generateContentInternal(l),!(!f.functionCalls||f.functionCalls.length===0));){const y=f.candidates[0].content,w=[];for(const x of(s=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&s!==void 0?s:[])if(fo(x)){const _=await x.callTool(f.functionCalls);w.push(..._)}v++,d={role:"user",parts:w},l.contents=tn(l.contents),l.contents.push(y),l.contents.push(d),Ph(l.config)&&(p.push(y),p.push(d))}return Ph(l.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{var r,o,i,a,s;if(this.maybeMoveToResponseJsonSchem(n),Nh(n.config)){const d=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(d)}const l=Rh(n);if(l.length>0){const d=l.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${d}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(i=(o=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(s=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||s===void 0?void 0:s.disable;if(u&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let i;const a=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((o=l==null?void 0:l.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?i=l==null?void 0:l.safetyAttributes:a.push(l);let s;return i?s={generatedImages:a,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:s={generatedImages:a,sdkHttpResponse:r.sdkHttpResponse},s}),this.list=async n=>{var r;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((r=a.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Fr(Ln.PAGED_ITEM_MODELS,s=>this.listInternal(s),await this.listInternal(a),a)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,i,a,s,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(i=n.source)===null||i===void 0?void 0:i.video)===null||a===void 0)&&a.uri&&(!((l=(s=n.source)===null||s===void 0?void 0:s.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,o;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const a=await Promise.all(i.map(async l=>fo(l)?await l.tool():l)),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(s.config.tools=a,e.config&&e.config.tools&&Fg(e.config.tools)){const l=(o=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),Bg(u),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return s}async initAfcToolsMap(e){var n,r,o;const i=new Map;for(const a of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(fo(a)){const s=a,l=await s.tool();for(const u of(o=l.functionDeclarations)!==null&&o!==void 0?o:[]){if(!u.name)throw new Error("Function declaration name is required.");if(i.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);i.set(u.name,s)}}return i}async processAfcStream(e){var n,r,o;const i=(o=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Ih;let a=!1,s=0;const l=await this.initAfcToolsMap(e);return function(u,f,d){var p,g;return uo(this,arguments,function*(){for(var v,y,w,x;s<i;){a&&(s++,a=!1);const A=yield ke(u.processParamsMaybeAddMcpUsage(d)),R=yield ke(u.generateContentStreamInternal(A)),N=[],M=[];try{for(var m=!0,_=(y=void 0,si(R)),S;S=yield ke(_.next()),v=S.done,!v;m=!0){x=S.value,m=!1;const F=x;if(yield yield ke(F),F.candidates&&(!((p=F.candidates[0])===null||p===void 0)&&p.content)){M.push(F.candidates[0].content);for(const k of(g=F.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(s<i&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(k.functionCall.name)){const $=yield ke(f.get(k.functionCall.name).callTool([k.functionCall]));N.push(...$)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(F){y={error:F}}finally{try{!m&&!v&&(w=_.return)&&(yield ke(w.call(_)))}finally{if(y)throw y.error}}if(N.length>0){a=!0;const F=new Ho;F.candidates=[{content:{role:"user",parts:N}}],yield yield ke(F);const k=[];k.push(...M),k.push({role:"user",parts:N});const $=tn(d.contents).concat(k);d.contents=$}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=wh(this.apiClient,e);return s=Q("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=Ah(f),p=new Ho;return Object.assign(p,d),p})}else{const u=Eh(this.apiClient,e);return s=Q("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=Ch(f),p=new Ho;return Object.assign(p,d),p})}}async generateContentStreamInternal(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=wh(this.apiClient,e);return s=Q("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(d){return uo(this,arguments,function*(){var p,g,v,y;try{for(var w=!0,x=si(d),m;m=yield ke(x.next()),p=m.done,!p;w=!0){y=m.value,w=!1;const _=y,S=Ah(yield ke(_.json()));S.sdkHttpResponse={headers:_.headers};const A=new Ho;Object.assign(A,S),yield yield ke(A)}}catch(_){g={error:_}}finally{try{!w&&!p&&(v=x.return)&&(yield ke(v.call(x)))}finally{if(g)throw g.error}}})})}else{const u=Eh(this.apiClient,e);return s=Q("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(d){return uo(this,arguments,function*(){var p,g,v,y;try{for(var w=!0,x=si(d),m;m=yield ke(x.next()),p=m.done,!p;w=!0){y=m.value,w=!1;const _=y,S=Ch(yield ke(_.json()));S.sdkHttpResponse={headers:_.headers};const A=new Ho;Object.assign(A,S),yield yield ke(A)}}catch(_){g={error:_}}finally{try{!w&&!p&&(v=x.return)&&(yield ke(v.call(x)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=qT(this.apiClient,e);return s=Q("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=YT(f),p=new ih;return Object.assign(p,d),p})}else{const u=WT(this.apiClient,e);return s=Q("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=$T(f),p=new ih;return Object.assign(p,d),p})}}async generateImagesInternal(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=oI(this.apiClient,e);return s=Q("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=aI(f),p=new ah;return Object.assign(p,d),p})}else{const u=rI(this.apiClient,e);return s=Q("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=iI(f),p=new ah;return Object.assign(p,d),p})}}async editImageInternal(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI()){const s=VT(this.apiClient,e);return i=Q("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{const u=GT(l),f=new KC;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI()){const s=o3(this.apiClient,e);return i=Q("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{const u=i3(l),f=new JC;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI()){const s=UI(this.apiClient,e);return i=Q("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const u=VI(l),f=new ZC;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI()){const s=$I(this.apiClient,e);return i=Q("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const u=YI(l),f=new QC;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=CI(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>Su(f))}else{const u=wI(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>Au(f))}}async listInternal(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=MI(this.apiClient,e);return s=Q("{models_url}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=OI(f),p=new sh;return Object.assign(p,d),p})}else{const u=DI(this.apiClient,e);return s=Q("{models_url}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=bI(f),p=new sh;return Object.assign(p,d),p})}}async update(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=n3(this.apiClient,e);return s=Q("{model}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>Su(f))}else{const u=t3(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>Au(f))}}async delete(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=LT(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=BT(f),p=new lh;return Object.assign(p,d),p})}else{const u=kT(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=FT(f),p=new lh;return Object.assign(p,d),p})}}async countTokens(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=MT(this.apiClient,e);return s=Q("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=OT(f),p=new uh;return Object.assign(p,d),p})}else{const u=DT(this.apiClient,e);return s=Q("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=bT(f),p=new uh;return Object.assign(p,d),p})}}async computeTokens(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI()){const s=AT(this.apiClient,e);return i=Q("{model}:computeTokens",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{const u=ST(l),f=new jC;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=dI(this.apiClient,e);return s=Q("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a.then(f=>{const d=fI(f),p=new Ya;return Object.assign(p,d),p})}else{const u=cI(this.apiClient,e);return s=Q("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a.then(f=>{const d=uI(f),p=new Ya;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B3 extends Bn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const o=n.name.split("/operations/")[0];let i;r&&"httpOptions"in r&&(i=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=zC(e);return s=Q("{operationName}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),a}else{const u=HC(e);return s=Q("{operationName}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),a}}async fetchPredictVideosOperationInternal(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI()){const s=kC(e);return i=Q("{resourceName}:fetchPredictOperation",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function U3(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function V3(t){const e={},n=c(t,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>K3(i))),h(e,["parts"],o)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function G3(t,e,n){const r={},o=c(e,["expireTime"]);n!==void 0&&o!=null&&h(n,["expireTime"],o);const i=c(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&h(n,["newSessionExpireTime"],i);const a=c(e,["uses"]);n!==void 0&&a!=null&&h(n,["uses"],a);const s=c(e,["liveConnectConstraints"]);n!==void 0&&s!=null&&h(n,["bidiGenerateContentSetup"],X3(t,s));const l=c(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&h(n,["fieldMask"],l),r}function H3(t,e){const n={},r=c(e,["config"]);return r!=null&&h(n,["config"],G3(t,r,n)),n}function z3(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function W3(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const o=c(t,["name"]);if(o!=null&&h(e,["name"],o),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function q3(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function $3(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function Y3(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r);const o=c(t,["responseModalities"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","responseModalities"],o);const i=c(t,["temperature"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","temperature"],i);const a=c(t,["topP"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topP"],a);const s=c(t,["topK"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","topK"],s);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","mediaResolution"],u);const f=c(t,["seed"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","seed"],f);const d=c(t,["speechConfig"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","speechConfig"],Vf(d));const p=c(t,["thinkingConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","thinkingConfig"],p);const g=c(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],g);const v=c(t,["systemInstruction"]);e!==void 0&&v!=null&&h(e,["setup","systemInstruction"],V3(Ct(v)));const y=c(t,["tools"]);if(e!==void 0&&y!=null){let R=To(y);Array.isArray(R)&&(R=R.map(N=>Z3(So(N)))),h(e,["setup","tools"],R)}const w=c(t,["sessionResumption"]);e!==void 0&&w!=null&&h(e,["setup","sessionResumption"],J3(w));const x=c(t,["inputAudioTranscription"]);e!==void 0&&x!=null&&h(e,["setup","inputAudioTranscription"],x);const m=c(t,["outputAudioTranscription"]);e!==void 0&&m!=null&&h(e,["setup","outputAudioTranscription"],m);const _=c(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&h(e,["setup","realtimeInputConfig"],_);const S=c(t,["contextWindowCompression"]);e!==void 0&&S!=null&&h(e,["setup","contextWindowCompression"],S);const A=c(t,["proactivity"]);return e!==void 0&&A!=null&&h(e,["setup","proactivity"],A),n}function X3(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["setup","model"],ye(t,r));const o=c(e,["config"]);return o!=null&&h(n,["config"],Y3(o,n)),n}function K3(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const o=c(t,["executableCode"]);o!=null&&h(e,["executableCode"],o);const i=c(t,["fileData"]);i!=null&&h(e,["fileData"],z3(i));const a=c(t,["functionCall"]);a!=null&&h(e,["functionCall"],W3(a));const s=c(t,["functionResponse"]);s!=null&&h(e,["functionResponse"],s);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],U3(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const f=c(t,["thought"]);f!=null&&h(e,["thought"],f);const d=c(t,["thoughtSignature"]);d!=null&&h(e,["thoughtSignature"],d);const p=c(t,["videoMetadata"]);return p!=null&&h(e,["videoMetadata"],p),e}function J3(t){const e={},n=c(t,["handle"]);if(n!=null&&h(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Z3(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(d=>d)),h(e,["functionDeclarations"],f)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const o=c(t,["computerUse"]);o!=null&&h(e,["computerUse"],o);const i=c(t,["fileSearch"]);i!=null&&h(e,["fileSearch"],i);const a=c(t,["codeExecution"]);if(a!=null&&h(e,["codeExecution"],a),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const s=c(t,["googleMaps"]);s!=null&&h(e,["googleMaps"],q3(s));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],$3(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q3(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const o=Object.keys(r).map(i=>`${n}.${i}`);e.push(...o)}else e.push(n)}return e.join(",")}function j3(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const i=r.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const o=t.fieldMask;if(n){const i=Q3(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let s=[];o.length>0&&(s=o.map(u=>a.includes(u)?`generationConfig.${u}`:u));const l=[];i&&l.push(i),s.length>0&&l.push(...s),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?t.fieldMask=o.join(","):delete t.fieldMask;return t}class e4 extends Bn{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=H3(this.apiClient,e);i=Q("auth_tokens",s._url),a=s._query,delete s.config,delete s._url,delete s._query;const l=j3(s,e.config);return o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),o.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t4(t,e){const n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&h(e,["displayName"],r),n}function n4(t){const e={},n=c(t,["config"]);return n!=null&&t4(n,e),e}function r4(t,e){const n={},r=c(t,["force"]);return e!==void 0&&r!=null&&h(e,["_query","force"],r),n}function o4(t){const e={},n=c(t,["name"]);n!=null&&h(e,["_url","name"],n);const r=c(t,["config"]);return r!=null&&r4(r,e),e}function i4(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function a4(t,e){const n={},r=c(t,["customMetadata"]);if(e!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),h(e,["customMetadata"],i)}const o=c(t,["chunkingConfig"]);return e!==void 0&&o!=null&&h(e,["chunkingConfig"],o),n}function s4(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const o=c(t,["done"]);o!=null&&h(e,["done"],o);const i=c(t,["error"]);i!=null&&h(e,["error"],i);const a=c(t,["response"]);return a!=null&&h(e,["response"],u4(a)),e}function l4(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const r=c(t,["fileName"]);r!=null&&h(e,["fileName"],r);const o=c(t,["config"]);return o!=null&&a4(o,e),e}function u4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&h(e,["parent"],r);const o=c(t,["documentName"]);return o!=null&&h(e,["documentName"],o),e}function f4(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),n}function c4(t){const e={},n=c(t,["config"]);return n!=null&&f4(n,e),e}function d4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const o=c(t,["fileSearchStores"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>a)),h(e,["fileSearchStores"],i)}return e}function h4(t,e){const n={},r=c(t,["mimeType"]);e!==void 0&&r!=null&&h(e,["mimeType"],r);const o=c(t,["displayName"]);e!==void 0&&o!=null&&h(e,["displayName"],o);const i=c(t,["customMetadata"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>l)),h(e,["customMetadata"],s)}const a=c(t,["chunkingConfig"]);return e!==void 0&&a!=null&&h(e,["chunkingConfig"],a),n}function p4(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const r=c(t,["config"]);return r!=null&&h4(r,e),e}function g4(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v4(t,e){const n={},r=c(t,["force"]);return e!==void 0&&r!=null&&h(e,["_query","force"],r),n}function m4(t){const e={},n=c(t,["name"]);n!=null&&h(e,["_url","name"],n);const r=c(t,["config"]);return r!=null&&v4(r,e),e}function y4(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function x4(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const o=c(t,["pageToken"]);return e!==void 0&&o!=null&&h(e,["_query","pageToken"],o),n}function _4(t){const e={},n=c(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const r=c(t,["config"]);return r!=null&&x4(r,e),e}function E4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const o=c(t,["documents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(a=>a)),h(e,["documents"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w4 extends Bn{constructor(e){super(),this.apiClient=e,this.list=async n=>new Fr(Ln.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=y4(e);return i=Q("{name}",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=m4(e);o=Q("{name}",a._url),i=a._query,delete a._url,delete a._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=_4(e);return i=Q("{parent}/documents",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const u=E4(l),f=new eA;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C4 extends Bn{constructor(e,n=new w4(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Fr(Ln.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=n4(e);return i=Q("fileSearchStores",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=i4(e);return i=Q("{name}",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(e){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=o4(e);o=Q("{name}",a._url),i=a._query,delete a._url,delete a._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=c4(e);return i=Q("fileSearchStores",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const u=d4(l),f=new tA;return Object.assign(f,u),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=p4(e);return i=Q("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const u=g4(l),f=new nA;return Object.assign(f,u),f})}}async importFile(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=l4(e);return i=Q("{file_search_store_name}:importFile",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{const u=s4(l),f=new kf;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A4(t,e){const n={},r=c(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function S4(t,e){const n={},r=c(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function T4(t,e,n){const r={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=c(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&h(e,["displayName"],o),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const i=c(t,["epochCount"]);e!==void 0&&i!=null&&h(e,["tuningTask","hyperparameters","epochCount"],i);const a=c(t,["learningRateMultiplier"]);if(a!=null&&h(r,["tuningTask","hyperparameters","learningRateMultiplier"],a),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=c(t,["batchSize"]);e!==void 0&&s!=null&&h(e,["tuningTask","hyperparameters","batchSize"],s);const l=c(t,["learningRate"]);if(e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","learningRate"],l),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function I4(t,e,n){const r={};let o=c(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const g=c(t,["validationDataset"]);e!==void 0&&g!=null&&h(e,["supervisedTuningSpec"],Dh(g))}else if(o==="PREFERENCE_TUNING"){const g=c(t,["validationDataset"]);e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec"],Dh(g))}const i=c(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&h(e,["tunedModelDisplayName"],i);const a=c(t,["description"]);e!==void 0&&a!=null&&h(e,["description"],a);let s=c(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=c(t,["epochCount"]);e!==void 0&&g!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(s==="PREFERENCE_TUNING"){const g=c(t,["epochCount"]);e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=c(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=c(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=c(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=c(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(u==="PREFERENCE_TUNING"){const g=c(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=c(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=c(t,["adapterSize"]);e!==void 0&&g!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=c(t,["adapterSize"]);e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const d=c(t,["labels"]);e!==void 0&&d!=null&&h(e,["labels"],d);const p=c(t,["beta"]);return e!==void 0&&p!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),r}function N4(t,e){const n={},r=c(t,["baseModel"]);r!=null&&h(n,["baseModel"],r);const o=c(t,["preTunedModel"]);o!=null&&h(n,["preTunedModel"],o);const i=c(t,["trainingDataset"]);i!=null&&U4(i);const a=c(t,["config"]);return a!=null&&T4(a,n),n}function R4(t,e){const n={},r=c(t,["baseModel"]);r!=null&&h(n,["baseModel"],r);const o=c(t,["preTunedModel"]);o!=null&&h(n,["preTunedModel"],o);const i=c(t,["trainingDataset"]);i!=null&&V4(i,n,e);const a=c(t,["config"]);return a!=null&&I4(a,n,e),n}function P4(t,e){const n={},r=c(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function D4(t,e){const n={},r=c(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function M4(t,e,n){const r={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const a=c(t,["filter"]);return e!==void 0&&a!=null&&h(e,["_query","filter"],a),r}function b4(t,e,n){const r={},o=c(t,["pageSize"]);e!==void 0&&o!=null&&h(e,["_query","pageSize"],o);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const a=c(t,["filter"]);return e!==void 0&&a!=null&&h(e,["_query","filter"],a),r}function O4(t,e){const n={},r=c(t,["config"]);return r!=null&&M4(r,n),n}function k4(t,e){const n={},r=c(t,["config"]);return r!=null&&b4(r,n),n}function L4(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const o=c(t,["nextPageToken"]);o!=null&&h(n,["nextPageToken"],o);const i=c(t,["tunedModels"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>Ug(s))),h(n,["tuningJobs"],a)}return n}function F4(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const o=c(t,["nextPageToken"]);o!=null&&h(n,["nextPageToken"],o);const i=c(t,["tuningJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>Iu(s))),h(n,["tuningJobs"],a)}return n}function B4(t,e){const n={},r=c(t,["name"]);r!=null&&h(n,["model"],r);const o=c(t,["name"]);return o!=null&&h(n,["endpoint"],o),n}function U4(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=c(t,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),h(n,["examples","examples"],o)}return n}function V4(t,e,n){const r={};let o=c(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=c(t,["gcsUri"]);e!==void 0&&a!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let i=c(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(i==="PREFERENCE_TUNING"){const a=c(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Ug(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const o=c(t,["name"]);o!=null&&h(n,["name"],o);const i=c(t,["state"]);i!=null&&h(n,["state"],_g(i));const a=c(t,["createTime"]);a!=null&&h(n,["createTime"],a);const s=c(t,["tuningTask","startTime"]);s!=null&&h(n,["startTime"],s);const l=c(t,["tuningTask","completeTime"]);l!=null&&h(n,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&h(n,["updateTime"],u);const f=c(t,["description"]);f!=null&&h(n,["description"],f);const d=c(t,["baseModel"]);d!=null&&h(n,["baseModel"],d);const p=c(t,["_self"]);return p!=null&&h(n,["tunedModel"],B4(p)),n}function Iu(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const o=c(t,["name"]);o!=null&&h(n,["name"],o);const i=c(t,["state"]);i!=null&&h(n,["state"],_g(i));const a=c(t,["createTime"]);a!=null&&h(n,["createTime"],a);const s=c(t,["startTime"]);s!=null&&h(n,["startTime"],s);const l=c(t,["endTime"]);l!=null&&h(n,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&h(n,["updateTime"],u);const f=c(t,["error"]);f!=null&&h(n,["error"],f);const d=c(t,["description"]);d!=null&&h(n,["description"],d);const p=c(t,["baseModel"]);p!=null&&h(n,["baseModel"],p);const g=c(t,["tunedModel"]);g!=null&&h(n,["tunedModel"],g);const v=c(t,["preTunedModel"]);v!=null&&h(n,["preTunedModel"],v);const y=c(t,["supervisedTuningSpec"]);y!=null&&h(n,["supervisedTuningSpec"],y);const w=c(t,["preferenceOptimizationSpec"]);w!=null&&h(n,["preferenceOptimizationSpec"],w);const x=c(t,["tuningDataStats"]);x!=null&&h(n,["tuningDataStats"],x);const m=c(t,["encryptionSpec"]);m!=null&&h(n,["encryptionSpec"],m);const _=c(t,["partnerModelTuningSpec"]);_!=null&&h(n,["partnerModelTuningSpec"],_);const S=c(t,["customBaseModel"]);S!=null&&h(n,["customBaseModel"],S);const A=c(t,["experiment"]);A!=null&&h(n,["experiment"],A);const R=c(t,["labels"]);R!=null&&h(n,["labels"],R);const N=c(t,["outputUri"]);N!=null&&h(n,["outputUri"],N);const M=c(t,["pipelineJob"]);M!=null&&h(n,["pipelineJob"],M);const F=c(t,["serviceAccount"]);F!=null&&h(n,["serviceAccount"],F);const k=c(t,["tunedModelDisplayName"]);k!=null&&h(n,["tunedModelDisplayName"],k);const $=c(t,["veoTuningSpec"]);return $!=null&&h(n,["veoTuningSpec"],$),n}function G4(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const o=c(t,["name"]);o!=null&&h(n,["name"],o);const i=c(t,["metadata"]);i!=null&&h(n,["metadata"],i);const a=c(t,["done"]);a!=null&&h(n,["done"],a);const s=c(t,["error"]);return s!=null&&h(n,["error"],s),n}function Dh(t,e){const n={},r=c(t,["gcsUri"]);r!=null&&h(n,["validationDatasetUri"],r);const o=c(t,["vertexDatasetResource"]);return o!=null&&h(n,["validationDatasetUri"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H4 extends Bn{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Fr(Ln.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:o});return i.baseModel=void 0,await this.tuneInternal(i)}else{const o=Object.assign({},n);return await this.tuneInternal(o)}else{const o=Object.assign({},n),i=await this.tuneMldevInternal(o);let a="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?a=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(a=i.name.split("/operations/")[0]),{name:a,state:_u.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=D4(e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Iu(f))}else{const u=P4(e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>Ug(f))}}async listInternal(e){var n,r,o,i;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=k4(e);return s=Q("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=F4(f),p=new fh;return Object.assign(p,d),p})}else{const u=O4(e);return s=Q("tunedModels",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:f.headers},p})),a.then(f=>{const d=L4(f),p=new fh;return Object.assign(p,d),p})}}async cancel(e){var n,r,o,i;let a="",s={};if(this.apiClient.isVertexAI()){const l=S4(e);a=Q("{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=A4(e);a=Q("{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async tuneInternal(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI()){const s=R4(e,e);return i=Q("tuningJobs",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>Iu(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let o,i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=N4(e);return i=Q("tunedModels",s._url),a=s._query,delete s._url,delete s._query,o=this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>G4(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class z4{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const W4=1024*1024*8,q4=3,$4=1e3,Y4=2,Ka="x-goog-upload-status";async function X4(t,e,n){var r;const o=await Vg(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[Ka])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function K4(t,e,n){var r;const o=await Vg(t,e,n),i=await(o==null?void 0:o.json());if(((r=o==null?void 0:o.headers)===null||r===void 0?void 0:r[Ka])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=pg(i),s=new Lf;return Object.assign(s,a),s}async function Vg(t,e,n){var r,o;let i=0,a=0,s=new Eu(new Response),l="upload";for(i=t.size;a<i;){const u=Math.min(W4,i-a),f=t.slice(a,a+u);a+u>=i&&(l+=", finalize");let d=0,p=$4;for(;d<q4&&(s=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(a),"Content-Length":String(u)}}}),!(!((r=s==null?void 0:s.headers)===null||r===void 0)&&r[Ka]));)d++,await Z4(p),p=p*Y4;if(a+=u,((o=s==null?void 0:s.headers)===null||o===void 0?void 0:o[Ka])!=="active")break;if(i<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return s}async function J4(t){return{size:t.size,type:t.type}}function Z4(t){return new Promise(e=>setTimeout(e,t))}class Q4{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await X4(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await K4(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await J4(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j4{create(e,n,r){return new e8(e,n,r)}}class e8{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mh="x-goog-api-key";class t8{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Mh)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Mh,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n8="gl-node/";class r8{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=bC(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const o=new t8(this.apiKey);this.apiClient=new y3({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:n8+"web",uploader:new Q4,downloader:new z4}),this.models=new F3(this.apiClient),this.live=new D3(this.apiClient,o,new j4),this.batches=new lS(this.apiClient),this.chats=new zS(this.models,this.apiClient),this.caches=new VS(this.apiClient),this.files=new jS(this.apiClient),this.operations=new B3(this.apiClient),this.authTokens=new e4(this.apiClient),this.tunings=new H4(this.apiClient),this.fileSearchStores=new C4(this.apiClient)}}const o8="AIzaSyD1uH_E9qhrwqSYiRUVApaRM8ToTl0xGgQ",i8=async(t={})=>{var n,r;const e=`Create a detailed one-day meal plan based on Nigerian cuisine.
    The user's data is as follows:
    - Daily calorie target: ${t.dailyCalories||2e3} calories
    - Goal: ${t.goal||"Maintain weight"}
    - Dietary restrictions: ${((n=t.dietaryRestrictions)==null?void 0:n.join(", "))||"None"}
    - Preferences: ${((r=t.preferences)==null?void 0:r.join(", "))||"None"}
    - Activity level: ${t.activityLevel||"Sedentary"}

    Please provide the response in a valid JSON format with the following structure:
    {
      "day": "Today's date",
      "meals": [
        {
          "type": "breakfast" | "lunch" | "dinner" | "snack",
          "name": "Nigerian dish name",
          "foods": [
            {
              "name": "Food item",
              "serving": "Serving size (e.g., 1 cup, 100g)",
              "calories": 0,
              "protein": 0,
              "carbs": 0,
              "fats": 0
            }
          ],
          "totalCalories": 0,
          "totalProtein": 0,
          "totalCarbs": 0,
          "totalFats": 0
        }
      ],
      "shoppingList": ["Item 1", "Item 2", ...],
      "dailyTotals": {
        "calories": 0,
        "protein": 0,
        "carbs": 0,
        "fats": 0
      }
    }
    
    Return ONLY the JSON object, no markdown formatting or additional text.`;try{const o=new r8({apiKey:o8}),i="gemini-2.5-flash";console.log("Using model:",i);const a=[{role:"user",parts:[{text:e}]}],s=await o.models.generateContentStream({model:i,contents:a});let l="";for await(const f of s)console.log(f.text),f.text&&(l+=f.text);console.log("Raw AI response:",l);let u;try{u=JSON.parse(l)}catch{const d=l.match(/```json\n([\s\S]*?)\n```/)||l.match(/```\n([\s\S]*?)\n```/)||l.match(/{[\s\S]*}/);if(d){const p=d[1]||d[0];u=JSON.parse(p)}else throw new Error("Could not extract valid JSON from response")}return u.day=new Date().toDateString(),u}catch(o){return console.error("Error generating meal plan:",o),a8()}},a8=t=>({day:new Date().toDateString(),meals:[{type:"breakfast",name:"Akara and Pap",foods:[{name:"Akara (Bean Cakes)",serving:"3 pieces",calories:200,protein:10,carbs:20,fats:8},{name:"Pap (Ogi)",serving:"1 cup",calories:150,protein:2,carbs:30,fats:1}],totalCalories:350,totalProtein:12,totalCarbs:50,totalFats:9},{type:"lunch",name:"Jollof Rice with Chicken",foods:[{name:"Jollof Rice",serving:"1.5 cups",calories:400,protein:8,carbs:75,fats:10},{name:"Grilled Chicken",serving:"150g",calories:250,protein:35,carbs:0,fats:12},{name:"Fried Plantain",serving:"1 medium",calories:150,protein:1,carbs:35,fats:5}],totalCalories:800,totalProtein:44,totalCarbs:110,totalFats:27},{type:"snack",name:"Groundnuts and Banana",foods:[{name:"Roasted Groundnuts",serving:"30g",calories:180,protein:8,carbs:6,fats:14},{name:"Banana",serving:"1 medium",calories:105,protein:1,carbs:27,fats:0}],totalCalories:285,totalProtein:9,totalCarbs:33,totalFats:14},{type:"dinner",name:"Egusi Soup with Fufu",foods:[{name:"Egusi Soup",serving:"1 bowl",calories:300,protein:15,carbs:10,fats:25},{name:"Fufu",serving:"1 wrap",calories:200,protein:2,carbs:45,fats:1}],totalCalories:500,totalProtein:17,totalCarbs:55,totalFats:26}],shoppingList:["Black-eyed beans","Cornmeal","Rice","Tomatoes","Chicken","Plantain","Groundnuts","Banana","Egusi seeds","Cassava flour","Palm oil","Onions","Peppers"],dailyTotals:{calories:1935,protein:82,carbs:248,fats:76}}),s8=({userData:t})=>{const[e,n]=le.useState(null),[r,o]=le.useState(!1);le.useEffect(()=>{const a=localStorage.getItem("mealPlan");a&&n(JSON.parse(a))},[]);const i=async()=>{o(!0),n(null),localStorage.removeItem("mealPlan");try{const a=await i8(t);n(a),localStorage.setItem("mealPlan",JSON.stringify(a))}catch(a){console.error("Failed to generate meal plan:",a),alert("Failed to generate meal plan. Please try again.")}finally{o(!1)}};return e?E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"text-center mt-12",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Meal Plan"}),E.jsxs("p",{className:"text-gray-600",children:["Generated for ",e.day]})]}),E.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[E.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Daily Summary"}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[E.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[E.jsx("div",{className:"text-gray-600",children:"Total Calories"}),E.jsx("div",{className:"font-semibold text-lg",children:e.dailyTotals.calories})]}),E.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[E.jsx("div",{className:"text-gray-600",children:"Protein"}),E.jsxs("div",{className:"font-semibold text-lg",children:[e.dailyTotals.protein,"g"]})]}),E.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[E.jsx("div",{className:"text-gray-600",children:"Carbs"}),E.jsxs("div",{className:"font-semibold text-lg",children:[e.dailyTotals.carbs,"g"]})]}),E.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[E.jsx("div",{className:"text-gray-600",children:"Fats"}),E.jsxs("div",{className:"font-semibold text-lg",children:[e.dailyTotals.fats,"g"]})]})]})]}),E.jsx("div",{className:"space-y-4",children:e.meals.map((a,s)=>E.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[E.jsxs("div",{className:"flex justify-between items-start mb-3",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"font-semibold text-gray-900 capitalize",children:a.type}),E.jsx("p",{className:"text-gray-600",children:a.name})]}),E.jsxs("div",{className:"text-right",children:[E.jsxs("div",{className:"font-semibold text-gray-900",children:[a.totalCalories," cal"]}),E.jsxs("div",{className:"text-sm text-gray-600",children:["P:",a.totalProtein,"g C:",a.totalCarbs,"g F:",a.totalFats,"g"]})]})]}),E.jsx("div",{className:"space-y-2",children:a.foods.map((l,u)=>E.jsxs("div",{className:"flex justify-between text-sm py-1 border-b border-gray-100 last:border-0",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-700",children:l.name}),E.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["(",l.serving,")"]})]}),E.jsxs("div",{className:"text-gray-900",children:[l.calories," cal"]})]},u))})]},s))}),E.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[E.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[E.jsx(v2,{className:"w-5 h-5 mr-2"}),"Shopping List"]}),E.jsx("div",{className:"grid grid-cols-2 gap-2",children:e.shoppingList.map((a,s)=>E.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-gray-50 rounded",children:[E.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full"}),E.jsx("span",{className:"text-sm text-gray-700",children:a})]},s))})]}),E.jsx("button",{onClick:i,disabled:r,className:"w-full border-2 border-gray-300 text-gray-700 py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-700"}),E.jsx("span",{children:"Generating New Plan..."})]}):E.jsxs(E.Fragment,{children:[E.jsx(Nr,{className:"w-5 h-5"}),E.jsx("span",{children:"Generate New Plan"})]})})]}):E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx(Nr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),E.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"AI Meal Planner"}),E.jsx("p",{className:"text-gray-600",children:"Get personalized meal plans based on your goals"})]}),E.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 space-y-4",children:[E.jsxs("div",{className:"text-center",children:[E.jsx(c2,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),E.jsx("h3",{className:"font-semibold text-gray-900",children:"Ready to Generate Your Plan?"}),E.jsxs("p",{className:"text-gray-600 text-sm",children:["Based on your profile: ",t==null?void 0:t.dailyCalories," calories,"," ",t==null?void 0:t.goal," goal"]})]}),E.jsx("button",{onClick:i,disabled:r,className:"w-full bg-black text-white py-4 rounded-lg font-semibold flex items-center justify-center space-x-2 hover:bg-gray-800 transition-colors disabled:opacity-50",children:r?E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),E.jsx("span",{children:"Generating..."})]}):E.jsxs(E.Fragment,{children:[E.jsx(Nr,{className:"w-5 h-5"}),E.jsx("span",{children:"Generate Meal Plan"})]})})]})]})},bh=({onComplete:t})=>{const[e,n]=le.useState(1),[r,o]=le.useState({age:"",weight:"",height:"",activityLevel:"moderate",goal:"maintain",dietaryRestrictions:[],preferences:[],dailyCalories:2e3}),i=[{value:"sedentary",label:"Sedentary (little to no exercise)"},{value:"light",label:"Light (exercise 1-3 times/week)"},{value:"moderate",label:"Moderate (exercise 3-5 times/week)"},{value:"active",label:"Active (exercise 6-7 times/week)"},{value:"very_active",label:"Very Active (physical job + exercise)"}],a=[{value:"loss",label:"Weight Loss",icon:""},{value:"maintain",label:"Maintain Weight",icon:""},{value:"gain",label:"Muscle Gain",icon:""}],s=[{value:"vegetarian",label:"Vegetarian"},{value:"vegan",label:"Vegan"},{value:"gluten_free",label:"Gluten-Free"},{value:"dairy_free",label:"Dairy-Free"},{value:"halal",label:"Halal"},{value:"kosher",label:"Kosher"}],l=[{value:"quick_meals",label:"Quick & Easy Meals"},{value:"african",label:"African Cuisine"},{value:"asian",label:"Asian Cuisine"},{value:"mediterranean",label:"Mediterranean"},{value:"low_carb",label:"Low Carb"},{value:"high_protein",label:"High Protein"}],u=()=>{const v=parseFloat(r.weight)||70,y=parseFloat(r.height)||170,w=parseFloat(r.age)||30;let _=(10*v+6.25*y-5*w+5)*({sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9}[r.activityLevel]||1.55);return r.goal==="loss"&&(_-=500),r.goal==="gain"&&(_+=500),Math.round(_)},f=()=>{if(e<4)n(e+1);else{const v={...r,dailyCalories:u()};t(v)}},d=(v,y)=>{o(w=>({...w,[v]:y}))},p=(v,y)=>{o(w=>({...w,[v]:w[v].includes(y)?w[v].filter(x=>x!==y):[...w[v],y]}))},g=()=>{switch(e){case 1:return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx(x2,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),E.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Personal Info"}),E.jsx("p",{className:"text-gray-600",children:"Tell us about yourself"})]}),E.jsxs("div",{className:"space-y-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age"}),E.jsx("input",{type:"number",value:r.age,onChange:v=>d("age",v.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Enter your age"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (kg)"}),E.jsx("input",{type:"number",value:r.weight,onChange:v=>d("weight",v.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Enter your weight"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Height (cm)"}),E.jsx("input",{type:"number",value:r.height,onChange:v=>d("height",v.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-black focus:border-transparent",placeholder:"Enter your height"})]})]})]});case 2:return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx(s2,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),E.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Activity Level"}),E.jsx("p",{className:"text-gray-600",children:"How active are you?"})]}),E.jsx("div",{className:"space-y-3",children:i.map(v=>E.jsx("button",{onClick:()=>d("activityLevel",v.value),className:`w-full p-4 text-left border rounded-lg transition-colors ${r.activityLevel===v.value?"border-black bg-black text-white":"border-gray-300 hover:border-gray-400"}`,children:v.label},v.value))})]});case 3:return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx(Xp,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),E.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Goal"}),E.jsx("p",{className:"text-gray-600",children:"What do you want to achieve?"})]}),E.jsx("div",{className:"grid gap-3",children:a.map(v=>E.jsx("button",{onClick:()=>d("goal",v.value),className:`p-4 border rounded-lg text-center transition-colors ${r.goal===v.value?"border-black bg-black text-white":"border-gray-300 hover:border-gray-400"}`,children:E.jsx("div",{className:"font-semibold",children:v.label})},v.value))})]});case 4:return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"text-center",children:[E.jsx(Nr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),E.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Diet & Preferences"}),E.jsx("p",{className:"text-gray-600",children:"Customize your experience"})]}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Dietary Restrictions"}),E.jsx("div",{className:"grid grid-cols-2 gap-2",children:s.map(v=>E.jsx("button",{onClick:()=>p("dietaryRestrictions",v.value),className:`p-3 border rounded-lg text-sm transition-colors ${r.dietaryRestrictions.includes(v.value)?"border-black bg-black text-white":"border-gray-300 hover:border-gray-400"}`,children:v.label},v.value))})]}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Food Preferences"}),E.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.map(v=>E.jsx("button",{onClick:()=>p("preferences",v.value),className:`p-3 border rounded-lg text-sm transition-colors ${r.preferences.includes(v.value)?"border-black bg-black text-white":"border-gray-300 hover:border-gray-400"}`,children:v.label},v.value))})]})]})]});default:return null}};return E.jsx("div",{className:"min-h-screen bg-white p-6",children:E.jsxs("div",{className:"max-w-md mx-auto",children:[E.jsxs("div",{className:"mb-8",children:[E.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[E.jsxs("span",{children:["Step ",e," of 4"]}),E.jsxs("span",{children:[Math.round(e/4*100),"%"]})]}),E.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:E.jsx("div",{className:"bg-black h-2 rounded-full transition-all duration-300",style:{width:`${e/4*100}%`}})})]}),g(),E.jsxs("button",{onClick:f,className:"w-full mt-8 bg-black text-white py-4 rounded-lg font-semibold flex items-center justify-center space-x-2 hover:bg-gray-800 transition-colors",children:[E.jsx("span",{children:e===4?"Complete Setup":"Continue"}),E.jsx(u2,{className:"w-5 h-5"})]})]})})},l8=({currentView:t,onViewChange:e})=>{const n=[{id:"dashboard",label:"Dashboard",icon:h2},{id:"planner",label:"Meal Plan",icon:Nr},{id:"scanner",label:"Scan",icon:Yp},{id:"history",label:"History",icon:d2}];return E.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 py-2 px-4",children:E.jsx("div",{className:"flex justify-around items-center",children:n.map(r=>{const o=r.icon;return E.jsxs("button",{onClick:()=>e(r.id),className:`flex flex-col items-center p-2 rounded-lg transition-colors ${t===r.id?"text-black":"text-gray-500"}`,children:[E.jsx(o,{className:"w-6 h-6"}),E.jsx("span",{className:"text-xs mt-1",children:r.label})]},r.id)})})})},u8=({onBack:t})=>{const[e,n]=le.useState([]);le.useEffect(()=>{r()},[]);const r=async()=>{const i=[];for(let a=0;a<7;a++){const s=new Date;s.setDate(s.getDate()-a);const l=s.toDateString(),u=await Nn.getItem(`foodLog_${l}`);u&&u.length>0&&i.push({date:l,log:u})}n(i)},o=i=>i.reduce((a,s)=>({calories:a.calories+(s.calories||0),protein:a.protein+(s.protein||0),carbs:a.carbs+(s.carbs||0),fats:a.fats+(s.fats||0)}),{calories:0,protein:0,carbs:0,fats:0});return E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center space-x-4 mt-12",children:[E.jsx("button",{onClick:t,className:"p-2",children:E.jsx(l2,{className:"w-5 h-5"})}),E.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"History"})]}),e.length===0?E.jsxs("div",{className:"text-center py-8",children:[E.jsx(f2,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),E.jsx("p",{className:"text-gray-600",children:"No past logs found"})]}):E.jsx("div",{className:"space-y-4",children:e.map((i,a)=>{const s=o(i.log);return E.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[E.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:i.date}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-600",children:"Calories:"}),E.jsx("div",{className:"font-semibold",children:s.calories.toFixed(0)})]}),E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-600",children:"Protein:"}),E.jsxs("div",{className:"font-semibold",children:[s.protein.toFixed(1),"g"]})]}),E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-600",children:"Carbs:"}),E.jsxs("div",{className:"font-semibold",children:[s.carbs.toFixed(1),"g"]})]}),E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-600",children:"Fats:"}),E.jsxs("div",{className:"font-semibold",children:[s.fats.toFixed(1),"g"]})]})]}),E.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[i.log.length," food(s) logged"]})]},a)})})]})};function f8(){const[t,e]=le.useState("dashboard"),[n,r]=le.useState(null),[o,i]=le.useState([]),[a,s]=le.useState(!0);le.useEffect(()=>{l(),u()},[]);const l=async()=>{try{const g=await Nn.getItem("userData");g?r(g):e("onboarding")}catch(g){console.error("Error loading user data:",g)}finally{s(!1)}},u=async()=>{try{const g=new Date().toDateString(),v=await Nn.getItem(`foodLog_${g}`)||[];i(v)}catch(g){console.error("Error loading food log:",g)}},f=g=>{r(g),e("dashboard"),Nn.setItem("userData",g)},d=async g=>{const v=new Date().toDateString(),y=[...o,{...g,id:Date.now(),timestamp:new Date().toISOString()}];i(y),await Nn.setItem(`foodLog_${v}`,y),e("dashboard")},p=async g=>{const v=new Date().toDateString(),y=o.filter(w=>w.id!==g);i(y),await Nn.setItem(`foodLog_${v}`,y)};return a?E.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:E.jsxs("div",{className:"text-center",children:[E.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto mb-4"}),E.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!n&&t!=="onboarding"?E.jsx(bh,{onComplete:f}):E.jsx("div",{className:"min-h-screen bg-gray-50",children:E.jsxs("div",{className:"max-w-md mx-auto bg-white min-h-screen shadow-sm",children:[t!=="onboarding"&&E.jsx(l8,{currentView:t,onViewChange:e}),E.jsxs("main",{className:"p-4 pb-20",children:[t==="onboarding"&&E.jsx(bh,{onComplete:f}),t==="dashboard"&&E.jsx(_2,{userData:n,dailyLog:o,onAddFood:()=>e("scanner"),onRemoveFood:p}),t==="scanner"&&E.jsx(gw,{onFoodScanned:d,onManualEntry:()=>e("logger")}),t==="logger"&&E.jsx(RC,{onFoodAdded:d}),t==="planner"&&E.jsx(s8,{userData:n}),t==="history"&&E.jsx(u8,{onBack:()=>e("dashboard")})]})]})})}cl.createRoot(document.getElementById("root")).render(E.jsx(Wv.StrictMode,{children:E.jsx(f8,{})}));
